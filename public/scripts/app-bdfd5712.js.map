{"version":3,"sources":["scripts/app-bdfd5712.js"],"names":["appConfig","$provide","appRun","Security","$rootScope","$state","$analytics","view","$on","event","toState","toParams","fromState","navMode","data","eventTrack","name","pageTrack","window","location","hash","requestCurrentUser","evt","to","toP","from","fromP","err","sessionInfo","ConfigService","restrict","template","link","scope","conf","angular","module","run","config","$inject","value","noop","gravatarServiceProvider","defaults","size","default","routesConfig","$stateProvider","$urlRouterProvider","otherwise","when","state","url","controller","templateUrl","titleExp","controllerAs","labelifyFilter","input","replace","a","toUpperCase","arrayToListFilter","_","limitTo","terminator","showTotal","parseInt","isArray","output","slice","join","concat","length","String","encodeUri","$window","encodeURIComponent","decodeUri","decodeURIComponent","capitalizeFilter","toLowerCase","substring","unsafe","$sce","trustAsHtml","filter","formlyTemplatesConfig","formlyConfigProvider","formConfig","inputColWidth","options","labelColWidth","helpColWidth","setWrapper","setType","extends","wrapper","defaultOptions","noFormControl","templateOptions","inputOptions","$scope","copyItemOptions","copy","constant","errorMessages","400","401","403","404","405","406","409","500","501","errorPrompts","LoginFormController","$location","absUrl","cancelLogin","$http","$q","RetryQueue","dialogs","$log","redirect","openLoginDialog","loginDialog","Error","create","result","then","onLoginDialogClose","closeLoginDialog","success","info","close","retryAll","cancelAll","onItemAddedCallbacks","push","hasMore","service","showLogin","getLoginReason","retryReason","login","request","get","response","currentUser","user","isAuthenticated","logout","redirectTo","digest","warn","Object","keys","isAdmin","contains","roles","factory","retryQueue","retryItem","forEach","cb","e","error","pushRetryFn","reason","retryFn","arguments","undefined","deferred","defer","retry","resolve","reject","cancel","promise","shift","Interceptor","$injector","responseError","interceptorServiceConfig","$httpProvider","provider","requireAdminUser","Authorization","requireAuthenticatedUser","$get","GenesResource","$resource","$cacheFactory","cache","cacheInterceptor","remove","$promise","geneId","query","method","update","interceptor","delete","apply","getMyGeneInfo","params","transformResponse","JSON","parse","srcMap","kegg","reactome","pharmgkb","humancyc","smpdb","pid","wikipathways","netpath","biocarta","inoh","signalink","ehmn","pathways","pathway","pathwaysFinal","src","p","id","alias","interpro","queryVariants","queryVariantGroups","queryComments","getComment","commentId","submitComment","updateComment","deleteComment","GenesService","initBase","all","initComments","collection","item","reqObj","deleteItem","myGeneInfo","variants","variantGroups","comments","GeneRevisionsResource","cacheResponseInterceptor","revisionId","submitRevision","acceptRevision","rejectRevision","GeneRevisionsService","Genes","initRevisions","comment","GeneHistoryResource","last","queryFresh","lastFresh","GeneHistoryService","VariantGroupsResource","variantGroupId","VariantGroupsService","VariantGroupRevisionsResource","VariantGroupRevisionsService","VariantGroups","VariantGroupHistoryResource","variantId","VariantGroupHistoryService","VariantsResource","queryEvidence","VariantsService","evidence","VariantRevisionsResource","VariantRevisionsService","Variants","VariantHistoryResource","VariantHistoryService","EvidenceResource","evidenceId","add","EvidenceService","EvidenceRevisionsResource","getFresh","queryCommentsFresh","getCommentFresh","EvidenceRevisionsService","Evidence","EvidenceHistoryResource","EvidenceHistoryService","serverUrl","mainMenuItems","label","footerMenuItems","DatatablesResource","mode","count","page","events","map","key","DatatablesService","TypeAheadResultsService","TypeAheadResults","limit","GlossaryService","Glossary","MyGeneInfoResource","MyGeneInfoService","entrez_id","TitleService","$parse","title","titleScope","gene","variant","variantGroup","has","genePromise","variantPromise","variantGroupsPromise","evidencePromise","resolutions","$broadcast","newTitle","ng","propGetterFactory","prop","obj","lodashModule","utilsModule","filtersModule","each","fnName","wrap","fn","args","toArray","isString","injector","invoke","$filter","select","exp","diff","bind","difference","methods","methodName","register","adapList","filterNames","filterFactory","filterName","ReleasesResource","ReleasesService","HomeCtrl","HelpCtrl","loadedMsg","ContactCtrl","GlossaryCtrl","glossary","terms","CollaborateCtrl","ReleasesController","Releases","vm","this","releases","release","fileNames","files","filename","split","fileUrls","origin","titleDirective","$timeout","directive","listener","subheader","SubheaderCtrl","stateTitle","quickSearchCtrl","getVariants","val","labelLimit","entrez_gene","includes","aliasLabel","gene_aliases","drugLabel","drug_names","diseaseLabel","disease_names","trunc","entrez_name","gene_id","variant_id","onSelect","$item","$model","go","asyncSelected","model","quickSearch","mainMenu","mainMenuController","menuItems","footerMenu","FooterMenuController","headerSearch","civicLogo","civicLogoController","pageTitle","cancelButton","cancelButtonController","$previousState","loginToolbar","adminUrl","$watch","status","isopen","toggleDropdown","$event","preventDefault","stopPropagation","currentUrl","userImageDirective","height","width","UserImageController","ctrl","hasAvatar","BrowseViewConfig","BrowseController","uiGridConstants","Datatables","updateData","fetchData","sorting","filters","gridOptions","columnDefs","modeColumnDefs","totalItems","total","field","term","sort","direction","maxRows","Number","isFiltered","totalPages","Math","ceil","enablePaginationControls","useExternalFiltering","useExternalSorting","paginationPageSizes","paginationPageSize","minRowsToShow","enableHorizontalScrollbar","scrollbars","NEVER","enableVerticalScrollbar","enableFiltering","enableColumnMenus","enableSorting","enableRowSelection","enableRowHeaderSelection","multiSelect","modifierKeysToMultiSelect","noUnselect","rowTemplate","allowCellFocus","condition","CONTAINS","ASC","displayName","cellTemplate","genes","onRegisterApi","gridApi","pageChanged","core","on","filterChanged","filteredCols","grid","columns","col","isEmpty","sortChanged","sortColumns","selection","rowSelectionChanged","row","entity","switchMode","EventsViewConfig","abstract","onExit","$deepStateRedirect","reset","EventsViewController","EntityViewController","entityViewModel","viewModel","entityViewOptions","viewOptions","transclude","entityTabsDirective","showCorner","justified","vertical","require","entityTabsLink","element","attributes","entityView","type","word","viewBackground","styles","backgroundColor","tabs","tabData","unbindStateChangeSuccess","update_tabs","EntityTabsController","unwatch","$watchCollection","currentStateEqualTo","tab","isEqual","is","route","disabled","active","chain","dropRight","isAncestorOfCurrentRoute","editableField","editableFieldLink","attrs","EditableFieldController","baseState","stateParams","gstateParams","mouseOver","hover","mouseLeave","click","EntityTalkViewController","revisionsModel","entityTalkTabsDirective","entityTalkTabsLink","entityTalkView","tabRowBackground","EntityTalkTabsController","entityLogEntryDirective","entryData","entityLogEntryLink","EntityLogEntryController","entry","username","EntityTalkRevisionsViewController","entityTalkRevisionsViewModel","entityTalkRevisionsViewOptions","revisionsGrid","changes","RevisionsGridController","$stateParams","revisionsGridOptions","DESC","merge","newState","entityCommentDirective","commentData","EntityCommentController","security","entityCommenntFormDirective","entityModel","EntityCommentFormController","newComment","text","newCommentFields","rows","submit","resetModel","GenesConfig","initGene","deepStateRedirect","refreshGene","GenesViewOptions","init","baseParams","baseUrl","href","heading","summary","variantMenu","edit","summaryBackgroundColor","GenesController","GenesViewModel","GeneSummaryController","showMenu","geneDescriptionLink","GeneDescriptionController","geneData","MyGeneInfoController","ngDialog","popupOptions","openDialog","dialog","closeDialog","dlg","open","closePromise","omit","MyGeneInfoDialogController","$parent","proteinDomains","geneInfo","enableColumnxsMenus","VariantMenuController","geneEditConfig","GeneRevisions","initGeneEdit","GeneHistory","GeneEditViewOptions","editBackgroundColor","talkBackgroundColor","GeneEditController","GeneEditViewModel","GeneRevisionsModel","geneEditBasicDirective","GeneEditBasicController","geneModel","geneRevisions","geneHistory","geneEdit","formErrors","formMessages","newRevisionId","geneFields","helpText","focus","minLength","geneTalkConfig","initGeneTalk","GenesTalkViewOptions","GeneTalkController","GenesTalkViewModel","geneTalkLogDirective","geneTalkLogLink","GeneTalkLogController","revisions","history","collections","revision","change","logItems","timestamp","updated_at","created_at","sortBy","Date","reverse","geneTalkCommentsDirective","GeneTalkCommentsController","geneTalkModel","geneTalkRevisionsConfig","initGeneTalkRevisions","initRevisionList","initRevision","GeneTalkRevisionsViewOptions","GeneTalkRevisionsController","GeneTalkRevisionsRevisionsViewOptions","geneTalkRevisionsDirective","geneTalkRevisionSummary","GeneTalkRevisionSummaryController","VariantsConfig","initVariant","refreshVariant","VariantsViewOptions","VariantsController","VariantsViewModel","VariantSummaryController","showEvidenceGrid","evidenceGrid","EvidenceGridController","evidenceGridOptions","drugs","pluck","variantEditConfig","VariantRevisions","initVariantEdit","VariantHistory","VariantEditViewOptions","VariantEditController","VariantEditViewModel","VariantRevisionsModel","variantEditBasicDirective","VariantEditBasicController","variantModel","variantRevisions","variantHistory","variantEdit","myVariantInfo","variantFields","variantTalkConfig","initVariantTalk","VariantsTalkViewOptions","VariantTalkController","VariantsTalkViewModel","variantTalkLogDirective","variantTalkLogLink","VariantTalkLogController","variantTalkCommentsDirective","VariantTalkCommentsController","variantTalkModel","variantTalkRevisionsConfig","initVariantTalkRevisions","VariantTalkRevisionsViewOptions","VariantTalkRevisionsController","VariantTalkRevisionsRevisionsViewOptions","variantTalkRevisionsDirective","variantTalkRevisionSummary","VariantTalkRevisionSummaryController","EvidenceConfig","initEvidence","EvidenceViewOptions","EvidenceController","EvidenceViewModel","EvidenceSummaryController","drugsStr","evidenceEditConfig","EvidenceRevisions","initEvidenceEdit","EvidenceHistory","EvidenceEditViewOptions","EvidenceEditController","EvidenceEditViewModel","EvidenceRevisionsModel","evidenceEditBasicDirective","EvidenceEditBasicController","evidenceModel","evidenceRevisions","evidenceHistory","evidenceEdit","drugNames","formSelects","evidence_levels","evidence_ratings","clinical_significance","evidence_types","evidence_directions","variant_origins","evidenceFields","valueProp","labelProp","evidenceTalkConfig","initEvidenceTalk","EvidenceTalkViewOptions","EvidenceTalkController","EvidenceTalkViewModel","evidenceTalkLogDirective","evidenceTalkLogLink","EvidenceTalkLogController","evidenceTalkCommentsDirective","EvidenceTalkCommentsController","evidenceTalkModel","evidenceTalkRevisionsConfig","initEvidenceTalkRevisions","EvidenceTalkRevisionsViewOptions","EvidenceTalkRevisionsController","EvidenceTalkRevisionsDirective","evidenceTalkRevisionSummary","EvidenceTalkRevisionSummaryController","VariantGroupsConfig","initVariantGroups","refreshVariantGroups","VariantGroupsViewOptions","myVariantGroupsInfo","VariantGroupsController","VariantGroupsViewModel","VariantGroupSummaryController","showVariantGrid","variantGrid","VariantGridController","variantGridOptions","variantGroupEditConfig","VariantGroupRevisions","initVariantGroupEdit","VariantGroupHistory","VariantGroupEditViewOptions","VariantGroupEditController","VariantGroupEditViewModel","VariantGroupRevisionsModel","variantGroupEditBasicDirective","VariantGroupEditBasicController","variantGroupModel","variantGroupRevisions","variantGroupHistory","variantGroupEdit","variantNames","variantGroupFields","initVariantGroupTalk","VariantGroupsTalkViewOptions","VariantGroupsTalkController","VariantGroupsTalkViewModel","variantGroupTalkLogDirective","variantGroupTalkLogLink","VariantGroupTalkLogController","VariantGroupTalkCommentsDirective","VariantGroupTalkCommentsController","variantGroupTalkModel","variantGroupTalkRevisionsConfig","initVariantGroupTalkRevisions","VariantGroupTalkRevisionsViewOptions","variantGroupTalkRevisionsDirective","VariantGroupTalkRevisionsController","variantGroupTalkRevisionSummary","VariantGroupTalkRevisionSummaryController","AddViewConfig","AddViewController","AddEvidenceConfig","AddEvidenceViewOptions","AddEvidenceController","AddEvidenceViewModel","addEvidenceBasicDirective","AddEvidenceBasicController","evidenceLevelChange","evidenceOptions","newEvidence","variant_name","description","disease","doid","pubmed_id","rating","evidence_level","evidence_type","evidence_direction","variant_origin","onChange","predictiveOpts","prognosticOpts","diagnosticOpts","$templateCache","put"],"mappings":"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","file":"scripts/app-bdfd5712.js","sourcesContent":["angular.module('civicClient', [\n  // vendor modules\n  'ui.router',\n  'ct.ui.router.extras',\n  'angular-loading-bar',\n  'ngDialog',\n  'ngMessages',\n  'ui.bootstrap',\n  'ui.grid',\n  'ui.grid.autoResize',\n  'ui.grid.pagination',\n  'ui.grid.cellNav',\n  'ui.gravatar',\n  'formly',\n  'dialogs.main',\n  'yaru22.angular-timeago',\n  'angulartics',\n  'angulartics.google.analytics',\n\n  // config\n  'civic.states',\n\n  // app services\n  'civic.config',\n  'civic.services',\n  'civic.security',\n  'civic.login',\n  'civic.common',\n  'angular-lodash',\n\n  // app root views\n  'civic.pages',\n  'civic.account',\n  'civic.browse',\n  'civic.events',\n  'civic.add'\n])\n  .run(appRun)\n  .config(appConfig);\n\n// @ngInject\nfunction appConfig($provide) {\n  // log all rootScope events to the console for debugging\n  // (this code should be commented out before building for production)\n  //$provide.decorator('$rootScope', function ($delegate) {\n  //  var _emit = $delegate.$emit;\n  //\n  //  $delegate.$emit = function () {\n  //    console.log.apply(console, arguments);\n  //    _emit.apply(this, arguments);\n  //  };\n  //\n  //  return $delegate;\n  //});\n}\n\n// @ngInject\nfunction appRun(Security, $rootScope, $state, $analytics) {\n  'use strict';\n  $rootScope.view = {};\n\n  // ensure $state is globally addressable/injectable\n  $rootScope.$state = $state;\n\n  $rootScope.$on('$stateChangeSuccess',function(event, toState, toParams, fromState){\n    $rootScope.view.navMode = toState.data.navMode;\n    $analytics.eventTrack(toState.name);\n    $analytics.pageTrack(window.location.hash);\n  });\n\n  Security.requestCurrentUser();\n\n  // console.table($state.get());\n\n  /*  ui-router debug logging */\n  function message(to, toP, from, fromP) { return from.name  + angular.toJson(fromP) + \" -> \" + to.name + angular.toJson(toP); }\n  $rootScope.$on(\"$stateChangeStart\", function(evt, to, toP, from, fromP) {\n    console.log(\"Start:   \" + message(to, toP, from, fromP));\n  });\n  $rootScope.$on(\"$stateChangeSuccess\", function(evt, to, toP, from, fromP) {\n    console.log(\"Success: \" + message(to, toP, from, fromP));\n  });\n  $rootScope.$on(\"$stateChangeError\", function(evt, to, toP, from, fromP, err) {\n    console.error(\"Error:   \" + message(to, toP, from, fromP), err);\n  });\n\n}\n// define top-level app modules & dependencies\nangular.module('civic.security', [\n  'civic.security.authorization',\n  'civic.security.service',\n  'civic.security.interceptor',\n  'civic.security.login'\n]);\nangular.module('civic.config', ['formly', 'formlyBootstrap']);\nangular.module('civic.states', ['ui.router']);\nangular.module('civic.services', ['ui.router', 'ngResource', 'angular-lodash/filters']);\nangular.module('civic.pages', ['civic.security.authorization', 'ui.router']);\nangular.module('civic.account', ['civic.security.authorization', 'ui.router']);\nangular.module('civic.common', ['ui.router']);\nangular.module('civic.login', ['ui.router']);\nangular.module('civic.browse', ['ui.grid.selection', 'ui.grid.pagination', 'ui.router']);\nangular.module('civic.search', ['ui.router']);\n\nangular.module('civic.add', [\n  'ui.router',\n  'formly',\n  'formlyBootstrap',\n  'civic.add.evidence'\n]);\n\nangular.module('civic.events', [\n  'ui.router',\n  'ui.grid',\n  'ngDialog',\n  'formly',\n  'formlyBootstrap',\n  'angular-lodash/filters',\n  'civic.events.common',\n  'civic.events.genes',\n  'civic.events.variants',\n  'civic.events.variantGroups',\n  'civic.events.evidence'\n]);\n\n// disable anchor-scrolling\nangular.module('civicClient').value('$anchorScroll', angular.noop);\n\n// configure gravatar service\nangular.module('ui.gravatar').config([\n  'gravatarServiceProvider', function(gravatarServiceProvider) {\n    gravatarServiceProvider.defaults = {\n      size     : 32,\n      'default': 'retro'  // retro 8-bit style as default for missing avatars\n    };\n  }\n]);\n\n(function(){\n  'use strict';\n  angular.module('civic.states')\n    .config(routesConfig);\n\n  // @ngInject\n  function routesConfig($stateProvider, $urlRouterProvider) {\n\n    // 404\n    $urlRouterProvider.otherwise('home');\n\n    // abstract state redirects\n    $urlRouterProvider.when('/events/genes/:geneId', '/events/genes/:geneId/summary');\n    $urlRouterProvider.when('/events/genes', '/browse');\n    $urlRouterProvider.when('/events', '/browse');\n\n    // NOTE: data.titleExp in state configs are ng expressions parsed by the TitleService\n\n    // static frontend pages\n    $stateProvider\n      .state('home', {\n        url: '/home',\n        controller: 'HomeCtrl',\n        templateUrl: 'app/pages/home.tpl.html',\n        data: {\n          titleExp: '\"Home\"',\n          navMode: 'home'\n        }\n      })\n      .state('collaborate', {\n        url: '/collaborate',\n        controller: 'CollaborateCtrl',\n        templateUrl: 'app/pages/collaborate.tpl.html',\n        data: {\n          titleExp: '\"Collaborate\"',\n          navMode: 'sub'\n        }\n      })\n      .state('faq', {\n        url: '/faq',\n        templateUrl: 'app/pages/faq.tpl.html',\n        data: {\n          titleExp: '\"FAQ\"',\n          navMode: 'sub'\n        }\n      })\n      .state('glossary', {\n        url: '/glossary',\n        templateUrl: 'app/pages/glossary.tpl.html',\n        controller: 'GlossaryCtrl',\n        data: {\n          titleExp: '\"Glossary\"',\n          navMode: 'sub'\n        }\n      })\n      .state('releases', {\n        url: '/releases',\n        templateUrl: 'app/pages/releases.tpl.html',\n        //resolve: {\n        //  Releases: 'Releases',\n        //  initReleases: function(Releases) {\n        //    return Releases.initBase();\n        //  }\n        //},\n        controller: 'ReleasesController',\n        controllerAs: 'vm',\n        data: {\n          titleExp: '\"Data Releases\"',\n          navMode: 'sub'\n        }\n      })\n      .state('api', {\n        url: '/api-documentation',\n        templateUrl: 'app/pages/apiDocumentation.tpl.html',\n        data: {\n          titleExp: '\"API Documentation\"',\n          navMode: 'sub'\n        }\n      })\n      .state('help', {\n        url: '/help',\n        controller: 'HelpCtrl',\n        templateUrl: 'app/pages/help.tpl.html',\n        data: {\n          titleExp: '\"Help\"',\n          navMode: 'sub'\n        }\n      })\n      .state('contact', {\n        url: '/contact',\n        controller: 'ContactCtrl',\n        templateUrl: 'app/pages/contact.tpl.html',\n        data: {\n          titleExp: '\"Contact\"',\n          navMode: 'sub'\n        }\n      });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .filter('labelify', labelifyFilter)\n    .filter('arrayToList', arrayToListFilter)\n    .filter('encodeUri', encodeUri)\n    .filter('capitalize', capitalizeFilter)\n    .filter('decodeUri', decodeUri)\n    .filter('unsafe', unsafe);\n\n  // @ngInject\n  function labelifyFilter() {\n    return function (input) {\n      input = input.replace(/_/g, ' ');\n      return input.replace(/(?:^|\\s)\\S/g, function(a) { return a.toUpperCase(); });\n    };\n  }\n\n  // @ngInject\n  function arrayToListFilter(_) {\n    return function(input, limitTo, terminator, showTotal) {\n      limitTo = parseInt(limitTo, 10);\n      terminator = terminator ? terminator : '';\n      if (_.isArray(input) && parseInt(limitTo, 10)) {\n        var output = input.slice(0,limitTo).join(', ').concat(terminator);\n        if(showTotal && input.length > limitTo) {\n          output = output + '<span class=\"more\"> (' + String(input.length - limitTo) + ' more)</span>';\n        }\n        return output;\n      } else if (_.isArray(input)) {\n        return input.join(', ');\n      } else {\n        return input;\n      }\n    };\n  }\n\n  // @ngInject\n  function encodeUri($window) {\n    return function (input) {\n      return $window.encodeURIComponent(input);\n    };\n  }\n\n  // @ngInject\n  function decodeUri($window) {\n    return function (input) {\n      return $window.decodeURIComponent(input);\n    };\n  }\n\n  // @ngInject\n  function capitalizeFilter() {\n    return function (input) {\n      if (input != null) {\n        input = input.toLowerCase();\n        return input.substring(0, 1).toUpperCase() + input.substring(1);\n      } else {\n        return;\n      }\n\n    };\n  }\n\n  // @ngInject\n  function unsafe($sce) { return $sce.trustAsHtml; }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.config')\n    .constant('formConfig', {\n      options: {\n        labelColWidth: 2,\n        inputColWidth: 5,\n        helpColWidth: 5\n      },\n      errorMessages: {\n        '400': 'Bad Request',\n        '401': 'Unauthorized',\n        '403': 'Forbidden',\n        '404': 'Not Found',\n        '405': 'Method Not Allowed',\n        '406': 'Not Acceptable',\n        '409': 'Conflict',\n        '500': 'Server Error',\n        '501': 'Not Implemented'\n      },\n      errorPrompts: {\n        '400': 'The CIViC Client made a request the server didn\\'t like, check the console output for more information.',\n        '401': 'You must be logged in to perform that action.',\n        '403': 'You do not have sufficient permissions to perform that action.',\n        '404': 'The CIViC client made a request to a route that could not be found, check the console output for more information',\n        '405': 'The CIViC client made a request that is not supported, check the console output for more information',\n        '406': 'TOTALLY UNACCEPTABLE, I CAN\\'T EVEN',\n        '409': 'The attempted update conflicts with an existing record.',\n        '500': 'The CIViC server experienced an unrecoverable error, please check the console output for more information.',\n        '501': 'The CIViC client attempted to utilize an unimplemented route.'\n      }\n    })\n    .config(formlyTemplatesConfig);\n\n  // @ngInject\n  function formlyTemplatesConfig(formlyConfigProvider, formConfig) {\n    var inputColWidth = formConfig.options.inputColWidth;\n    var labelColWidth = formConfig.options.labelColWidth;\n    var helpColWidth = formConfig.options.helpColWidth;\n    /*\n    * FIELD WRAPPERS\n     */\n    // TODO: get all template strings into their own files while preserving the ability to define col widths etc.\n    formlyConfigProvider.setWrapper({\n      // horizontal bootstrap row with label\n      name: 'horizontalBootstrapLabel',\n      template: [\n              '<label for=\"{{::id}}\" class=\"col-sm-'+ labelColWidth +' control-label\">',\n              '{{to.label}}',\n              '</label>',\n              '<div class=\"col-sm-' + inputColWidth + '\">',\n              '<formly-transclude></formly-transclude>',\n              '</div>'\n            ].join(' ')\n    });\n\n    // horizontal bootstrap field with label and help column\n    formlyConfigProvider.setWrapper({\n      name: 'horizontalBootstrapHelp',\n      template: ['<label for=\"{{::id}}\" class=\"col-sm-'+ labelColWidth +' control-label\">',\n              '{{to.label}}',\n              '</label>',\n              '<div class=\"col-sm-'+ inputColWidth +'\">',\n              '<formly-transclude></formly-transclude>',\n              '</div>',\n              '<div class=\"col-sm-'+ helpColWidth +' control-help\">',\n              '<span class=\"small\" ng-bind-html=\"to.helpText\"></span>',\n              '</div>'\n            ].join(' ')\n    });\n\n    // horizontal bootstrap checkbox\n    formlyConfigProvider.setWrapper({\n      name: 'horizontalBootstrapCheckbox',\n      template: [\n              '<div class=\"col-sm-offset-'+ labelColWidth +' col-sm-8\">',\n              '<formly-transclude></formly-transclude>',\n              '</div>'\n            ].join(' ')\n    });\n\n    /*\n    * BASIC FIELD TYPES\n    * Two versions of each basic field type, one with a help column and one without\n     */\n    // input\n    formlyConfigProvider.setType({\n      name: 'horizontalInput',\n      extends: 'input',\n      wrapper: ['horizontalBootstrapLabel', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalInputHelp',\n      extends: 'input',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n    // select\n    formlyConfigProvider.setType({\n      name: 'horizontalSelect',\n      extends: 'select',\n      wrapper: ['horizontalBootstrapLabel', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalSelectHelp',\n      extends: 'select',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n    // textarea\n    formlyConfigProvider.setType({\n      name: 'horizontalTextarea',\n      extends: 'textarea',\n      wrapper: ['horizontalBootstrapLabel', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalTextareaHelp',\n      extends: 'textarea',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n\n    // checkbox\n    formlyConfigProvider.setType({\n      name: 'horizontalCheckbox',\n      extends: 'checkbox',\n      wrapper: ['horizontalBootstrapCheckbox', 'bootstrapHasError']\n    });\n\n    formlyConfigProvider.setType({\n      name: 'horizontalCheckboxHelp',\n      extends: 'checkbox',\n      wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError']\n    });\n\n    /*\n    * MULTI-INPUT FIELD\n     */\n    formlyConfigProvider.setType({\n      name: 'multiInput',\n      templateUrl: '/components/forms/multiInput.tpl.html',\n      defaultOptions: {\n        noFormControl: true,\n        wrapper: ['horizontalBootstrapHelp', 'bootstrapHasError'],\n        templateOptions: {\n          inputOptions: {\n            wrapper: null\n          }\n        }\n      },\n      controller: /* @ngInject */ function($scope) {\n        $scope.copyItemOptions = copyItemOptions;\n        function copyItemOptions() {\n          return angular.copy($scope.to.inputOptions);\n        }\n      }\n    });\n  }\n})();\n\nangular.module('civic.security.login', ['civic.security.login.form', 'civic.security.login.toolbar']);\n(function() {\n  'use strict';\n  angular.module('civic.security.login.form', [])\n    .controller('LoginFormController', LoginFormController);\n\n  /**\n   * @name LoginFormController\n   * @desc provides the behaviour behind a reusable form to allow users to authenticate. This controller and\n   * its template (login/form.tpl.html) are used in a modal dialog box by the security service.\n   * @param $scope\n   * @param security\n   * @constructor\n   * @ngInject\n   */\n  function LoginFormController($scope, Security, $location) {\n    var location = $scope.location = $location.absUrl();\n    var url = $location.url();\n    $scope.cancelLogin = function() {\n      Security.cancelLogin(url);\n    };\n  }\n})();\n\n// Based loosely around work by Witold Szczerba - https://github.com/witoldsz/angular-http-auth\n(function() {\n  'use strict';\n  angular.module('civic.security.service', [\n    'civic.security.retryQueue',\n    'civic.security.login',\n    'dialogs.main'\n  ])\n    .factory('Security', Security);\n\n// @ngInject\n  function Security($http, $q, $location, RetryQueue, dialogs, $log, $rootScope, _) {\n    // Redirect to the given url (defaults to '/')\n    function redirect(url) {\n      url = url || '/';\n      $location.url(url);\n    }\n\n    // Login form dialog stuff\n    var loginDialog = null;\n    function openLoginDialog() {\n      if ( loginDialog ) {\n        throw new Error('Trying to open a dialog that is already open!');\n      }\n      loginDialog= dialogs.create('components/security/login/LoginForm.tpl.html','LoginFormController',{},'lg');\n      loginDialog.result.then(onLoginDialogClose);\n    }\n    function closeLoginDialog(success) {\n      $log.info('Security.closeLoginDialog() called.');\n      if (loginDialog) {\n        loginDialog.close(success);\n      }\n    }\n    function onLoginDialogClose(success) {\n      loginDialog = null;\n      if ( success ) {\n        RetryQueue.retryAll();\n      } else {\n        RetryQueue.cancelAll();\n        // redirect();\n      }\n    }\n\n    // Register a handler for when an item is added to the retry queue\n    RetryQueue.onItemAddedCallbacks.push(function() {\n      if ( RetryQueue.hasMore() ) {\n        service.showLogin();\n      }\n    });\n\n    // The public API of the service\n    var service = {\n\n      // Get the first reason for needing a login\n      getLoginReason: function() {\n        return RetryQueue.retryReason();\n      },\n\n      // Show the modal login dialog\n      showLogin: function() {\n        openLoginDialog();\n      },\n\n      // Attempt to authenticate a user by the given email and password\n      login: function() {\n        var request = $http.get('/api/current_user.json');\n        return request.then(function(response) {\n          service.currentUser = response.data.user;\n          if ( service.isAuthenticated() ) {\n            closeLoginDialog(true);\n          }\n          return service.isAuthenticated();\n        });\n      },\n\n      // Give up trying to login and clear the retry queue\n      cancelLogin: function(url) {\n        closeLoginDialog(false);\n        redirect(url);\n      },\n\n      // Logout the current user and redirect\n      logout: function(redirectTo) {\n        $http.get('/api/sign_out').then(function(response) { // success\n          service.currentUser = null;\n          $rootScope.digest();\n          redirect(redirectTo);\n        }, function(response) { // failure\n          $log.warn(\"COULD NOT LOG OUT\");\n        });\n      },\n\n      // Ask the backend to see if a user is already authenticated - this may be from a previous session.\n      requestCurrentUser: function() {\n        if ( service.isAuthenticated() ) {\n          return $q.when(service.currentUser);\n        } else {\n          return $http.get('/api/current_user.json').then(function(response) {\n            // unauthenticated request returns an empty JSON object, so we count the keys\n            // and if there are any we assume an authenticated user\n            if(Object.keys(response.data).length > 0) {\n              service.currentUser = response.data;\n            } else {\n              service.currentUser = null;\n            }\n            return service.currentUser;\n          });\n        }\n      },\n\n      // Information about the current user\n      currentUser: null,\n\n      // Is the current user authenticated?\n      isAuthenticated: function(){\n        return !!service.currentUser;\n      },\n\n      // Is the current user an adminstrator?\n      isAdmin: function() {\n        return !!(service.currentUser && _.contains(service.currentUser.roles, 'admin'));\n      }\n    };\n\n    return service;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.security.retryQueue', [])\n    .factory('RetryQueue', RetryQueue);\n\n  /**\n   * @name RetryQueue\n   * @desc This is a generic retry queue for security failures.  Each item is expected to expose two functions: retry and cancel.\n   * @param $q\n   * @param $log\n   * @returns {{onItemAddedCallbacks: Array, hasMore: hasMore, push: push, pushRetryFn: pushRetryFn, retryReason: retryReason, cancelAll: cancelAll, retryAll: retryAll}}\n   * @ngInject\n   */\n  function RetryQueue($q, $log) {\n    var retryQueue = [];\n    var service = {\n      // The security service puts its own handler in here!\n      onItemAddedCallbacks: [],\n\n      hasMore: function() {\n        return retryQueue.length > 0;\n      },\n      push: function(retryItem) {\n        $log.info('retryQueue.push() called with item: ' + retryItem);\n        retryQueue.push(retryItem);\n        // Call all the onItemAdded callbacks\n        angular.forEach(service.onItemAddedCallbacks, function(cb) {\n          try {\n            cb(retryItem);\n          } catch(e) {\n            $log.error('securityRetryQueue.push(retryItem): callback threw an error' + e);\n          }\n        });\n      },\n      pushRetryFn: function(reason, retryFn) {\n        // The reason parameter is optional\n        if ( arguments.length === 1) {\n          retryFn = reason;\n          reason = undefined;\n        }\n\n        // The deferred object that will be resolved or rejected by calling retry or cancel\n        var deferred = $q.defer();\n        var retryItem = {\n          reason: reason,\n          retry: function() {\n            // Wrap the result of the retryFn into a promise if it is not already\n            $q.when(retryFn()).then(function(value) {\n              // If it was successful then resolve our deferred\n              deferred.resolve(value);\n            }, function(value) {\n              // Othewise reject it\n              deferred.reject(value);\n            });\n          },\n          cancel: function() {\n            // Give up on retrying and reject our deferred\n            deferred.reject();\n          }\n        };\n        service.push(retryItem);\n        return deferred.promise;\n      },\n      retryReason: function() {\n        return service.hasMore() && retryQueue[0].reason;\n      },\n      cancelAll: function() {\n        while(service.hasMore()) {\n          retryQueue.shift().cancel();\n        }\n      },\n      retryAll: function() {\n        $log.info('RetryQueue.retryall() called.');\n        while(service.hasMore()) {\n          retryQueue.shift().retry();\n        }\n      }\n    };\n    return service;\n  }\n})();\n(function() {\n  'use strict';\n  angular.module('civic.security.interceptor', ['civic.security.retryQueue'])\n    .factory('Interceptor', Interceptor)\n    .config(interceptorServiceConfig);\n\n  /**\n   * @name Interceptor\n   * @desc listens for authentication failures\n   * @param $injector\n   * @param RetryQueue\n   * @returns {Function}\n   * @ngInject\n   */\n  function Interceptor($injector, RetryQueue) {\n    return {\n      response: function(response) { // success - just pass the response through\n        return response;\n      },\n      responseError: function(response) {\n        // The request bounced because it was not authorized - add a new request to the retry RetryQueue\n        var $q = RetryQueue.pushRetryFn('unauthorized-server', function retryRequest() {\n          // We must use $injector to get the $http service to prevent circular dependency\n          return $injector.get('$http')(response.config);\n        });\n        return response || $q.when(response);\n        //return response;\n      }\n    };\n\n  }\n\n  /**\n   * @name interceptorServiceConfig\n   * @desc We have to add the interceptor to the RetryQueue as a string because the interceptor depends upon service instances that are not available in the config block.\n   * @param $httpProvider\n   * @ngInject\n   */\n  function interceptorServiceConfig($httpProvider) {\n    // $httpProvider.interceptors.push('Interceptor');\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.security.authorization', ['civic.security.service'])\n    // This service provides guard methods to support AngularJS routes.\n    // You can add them as resolves to routes to require authorization levels\n    // before allowing a route change to complete\n    .provider('Authorization', {\n      requireAdminUser: /*@ngInject*/ function(Authorization) {\n        return Authorization.requireAdminUser();\n      },\n\n      requireAuthenticatedUser: /*@ngInject*/ function(Authorization) {\n        return Authorization.requireAuthenticatedUser();\n      },\n\n      $get: /*@ngInject*/ function(Security, RetryQueue) {\n        var service = {\n\n          // Require that there is an authenticated user\n          // (use this in a route resolve to prevent non-authenticated users from entering that route)\n          requireAuthenticatedUser: function() {\n            var promise = Security.requestCurrentUser().then(function() {\n              if ( !Security.isAuthenticated() ) {\n                return RetryQueue.pushRetryFn('unauthenticated-client', service.requireAuthenticatedUser);\n              }\n            });\n            return promise;\n          },\n\n          // Require that there is an administrator logged in\n          // (use this in a route resolve to prevent non-administrators from entering that route)\n          requireAdminUser: function() {\n            var promise = Security.requestCurrentUser().then(function() {\n              if ( !Security.isAdmin() ) {\n                return RetryQueue.pushRetryFn('unauthorized-client', service.requireAdminUser);\n              }\n            });\n            return promise;\n          }\n\n        };\n\n        return service;\n      }\n    });\n\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('GenesResource', GenesResource)\n    .factory('Genes', GenesService);\n\n  // @ngInject\n  function GenesResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      console.log(['GenesResource: removing', response.config.url, 'from $http cache.'].join(\" \"));\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/genes/:geneId',\n      {\n        geneId: '@geneId'\n      },\n      {\n        // Base Gene Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: { // get a single gene\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        update: {\n          method: 'PATCH',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        delete: {\n          method: 'DELETE',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        apply: {\n          method: 'PATCH',\n          cache: false\n        },\n\n        // Gene Additional Info\n        getMyGeneInfo: {\n          url: '/api/genes/:geneId/mygene_info_proxy',\n          params: {\n            geneId: '@geneId'\n          },\n          cache: cache,\n          transformResponse: function(data) {\n            if(typeof data == 'string') {\n              data = JSON.parse(data);\n            }\n            var srcMap = {\n              kegg: 'http://www.genome.jp/kegg-bin/show_pathway?',\n              reactome: 'http://www.reactome.org/cgi-bin/control_panel_st_id?ST_ID=',\n              pharmgkb: 'https://www.pharmgkb.org/pathway/',\n              humancyc: 'http://humancyc.org/HUMAN/NEW-IMAGE?type=PATHWAY&object=',\n              smpdb: 'http://www.smpdb.ca/view/',\n              pid: 'http://pid.nci.nih.gov/search/pathway_landing.shtml?what=graphic&jpg=on&pathway_id=',\n              wikipathways: 'http://wikipathways.org/index.php/Pathway:',\n              netpath: null,\n              biocarta: null,\n              inoh: null,\n              signalink: null,\n              ehmn: null\n            };\n            var pathways = data.pathway || [];\n            var pathwaysFinal = [];\n            var link;\n            for(var src in pathways){\n              if(!angular.isArray(pathways[src])){\n                pathways[src] = [pathways[src]];\n              }\n              for(var p in pathways[src]){\n                link = srcMap[src]+pathways[src][p].id;\n                if(srcMap[src] === null){\n                  link = null;\n                }\n                pathwaysFinal.push({\n                  name: pathways[src][p].name,\n                  link: link,\n                  src: src\n                });\n              }\n            }\n            data.pathway = pathwaysFinal;\n            if(!_.isArray(data.alias) && data.alias){\n              data.alias = [data.alias];\n            }\n            if(!_.isArray(data.interpro) && data.interpro){\n              data.interpro = [data.interpro];\n            }\n            return data;\n          }\n        },\n\n        // Gene Collections\n        queryVariants: {\n          method: 'GET',\n          url: '/api/genes/:geneId/variants',\n          isArray: true,\n          cache: cache\n        },\n        queryVariantGroups: {\n          method: 'GET',\n          url: '/api/genes/:geneId/variant_groups',\n          isArray: true,\n          cache: cache\n        },\n\n        // Gene Comments Resources\n        queryComments: {\n          method: 'GET',\n          url: '/api/genes/:geneId/comments',\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/genes/:geneId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n\n        submitComment: {\n          method: 'POST',\n          url: '/api/genes/:geneId/comments',\n          params: {\n            geneId: '@geneId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/genes/:geneId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/genes/:geneId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheInterceptor\n          }\n        }\n      }\n    )\n  }\n\n  // @ngInject\n  function GenesService(GenesResource, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // Base Gene and Gene Collection\n    var item = {};\n    var collection = [];\n\n    // Additional Gene Data\n    var myGeneInfo = {};\n\n    // Gene Collections\n    var variants = [];\n    var variantGroups = [];\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        myGeneInfo: myGeneInfo,\n        variants: variants,\n        variantGroups: variantGroups,\n        comments: comments\n      },\n\n      // Gene Base\n      query: query,\n      get: get,\n      update: update,\n      delete: deleteItem,\n      apply: apply,\n\n      // Gene Additional Info\n      getMyGeneInfo: getMyGeneInfo,\n\n      // Gene Collections\n      queryVariants: queryVariants,\n      queryVariantGroups: queryVariantGroups,\n\n      // Gene Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n\n    };\n\n    function initBase(geneId) {\n      return $q.all([\n        get(geneId),\n        getMyGeneInfo(geneId),\n        queryVariants(geneId),\n        queryVariantGroups(geneId)\n      ])\n    }\n\n    function initComments(geneId) {\n      return $q.all([\n        queryComments(geneId)\n      ])\n    }\n    // Gene Base\n    function query() {\n      return GenesResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(geneId) {\n      return GenesResource.get({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function update(reqObj) {\n      return GenesResource.update(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function deleteItem(geneId) {\n      return GenesResource.delete({geneId: geneId}).$promise\n        .then(function(response) {\n          item = null;\n          return response.$promise;\n        });\n    }\n    function apply(reqObj) {\n      return GenesResource.apply(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/genes/' + response.id);\n          get(reqObj.geneId);\n          return $q.when(response);\n        },\n        function(error) { // fail\n          return $q.reject(error);\n        })\n    }\n\n    // Gene Additional Data\n    function getMyGeneInfo(geneId) {\n      return GenesResource.getMyGeneInfo({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response, myGeneInfo);\n          return response.$promise;\n        });\n    }\n\n    // Gene Collections\n    function queryVariants(geneId) {\n      return GenesResource.queryVariants({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response, variants);\n          return response.$promise;\n        });\n    }\n    function queryVariantGroups(geneId) {\n      return GenesResource.queryVariantGroups({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response, variantGroups);\n          return response.$promise;\n        });\n    }\n\n    // Gene Comments\n    function queryComments(geneId) {\n      return GenesResource.queryComments({geneId: geneId}).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(geneId, commentId) {\n      return GenesResource.getComment({geneId: geneId, commentId: commentId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return GenesResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + reqObj.geneId + '/comments');\n          queryComments(reqObj.geneId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return GenesResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + reqObj.geneId + '/comments');\n          queryComments(reqObj.geneId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(geneId, commentId) {\n      return GenesResource.deleteComment({geneId: geneId, commentId: commentId}).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + geneId + '/comments');\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('GeneRevisionsResource', GeneRevisionsResource)\n    .factory('GeneRevisions', GeneRevisionsService);\n\n  function GeneRevisionsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheResponseInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/genes/:geneId/suggested_changes/:revisionId',\n      {\n        geneId: '@geneId',\n        revisionId: '@revisionId'\n      },\n      {\n        // Base Gene Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        submitRevision: {\n          method: 'POST',\n          cache: false\n        },\n        acceptRevision: {\n          method: 'POST',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/accept',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        rejectRevision: {\n          method: 'POST',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/reject',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n\n        // Gene Revisions Comments Resources\n        submitComment: {\n          method: 'POST',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n        queryComments: {\n          method: 'GET',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/genes/:geneId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            geneId: '@geneId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        }\n      }\n    )\n  }\n\n  function GeneRevisionsService(GeneRevisionsResource, Genes, $cacheFactory, $q) {\n    // fetch genes cache, need to delete gene record when revision is submitted\n    var cache = $cacheFactory.get('$http');\n\n    // Base Gene Revision and Gene Revisions Collection\n    var item = {};\n    var collection = [];\n\n    // Gene Revisions Comments\n    var comment = {};\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initRevisions: initRevisions,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        comment: comment,\n        comments: comments\n      },\n\n      // Gene Revisions Base\n      query: query,\n      get: get,\n      submitRevision: submitRevision,\n      acceptRevision: acceptRevision,\n      rejectRevision: rejectRevision,\n\n\n      // Gene Revisions Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n    };\n\n    function initBase(geneId, revisionId) {\n      return $q.all([\n        query(geneId, revisionId)\n      ])\n    }\n\n    function initRevisions(geneId) {\n      return $q.all([\n        query(geneId)\n      ])\n    }\n\n    function initComments(geneId, revisionId) {\n      return $q.all([\n        query(geneId, revisionId)\n      ])\n    }\n\n    // Gene Revisions Base\n    function query(geneId) {\n      return GeneRevisionsResource.query({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(geneId, revisionId) {\n      return GeneRevisionsResource.get({ geneId: geneId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n\n    function submitRevision(reqObj) {\n      return GeneRevisionsResource.submitRevision(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/genes/' + reqObj.id + '/suggested_changes');\n          return $q.when(response);\n        },\n        function(error) { //fail\n          return $q.reject(error);\n        });\n    }\n\n    function acceptRevision(geneId, revisionId) {\n      return GeneRevisionsResource.acceptRevision({ geneId: geneId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/genes/' + geneId + '/suggested_changes');\n          query(geneId);\n          cache.remove('/api/genes/' + geneId + '/suggested_changes/' + revisionId);\n          get(geneId, revisionId);\n          cache.remove('/api/genes/' + geneId );\n          Genes.get(geneId);\n          return $q.when(response)\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n    function rejectRevision(geneId, revisionId) {\n      return GeneRevisionsResource.rejectRevision({ geneId: geneId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/genes/' + response.id + '/suggested_changes');\n          query(geneId);\n          cache.remove('/api/genes/' + response.id + '/suggested_changes/' + revisionId);\n          get(geneId, revisionId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    // Gene Revisions Comments\n    function queryComments(geneId, revisionId) {\n      return GeneRevisionsResource.queryComments({ geneId: geneId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(geneId, revisionId, commentId) {\n      return GeneRevisionsResource.getComment({ geneId: geneId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return GeneRevisionsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + reqObj.geneId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          queryComments(reqObj.geneId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return GeneRevisionsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          cache.remove('/api/genes/' + reqObj.geneId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          cache.remove('/api/genes/' + reqObj.geneId + '/suggested_changes/' + reqObj.revisionId + '/comments' + reqObj.commentId);\n          queryComments(reqObj.geneId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(geneId, revisionId, commentId) {\n      return GeneRevisionsResource.deleteComment({ geneId: geneId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          cache.remove('/api/genes/' + reqObj.geneId + '/suggested_changes/' + reqObj.revisionId + '/comments' + reqObj.commentId);\n          comment = null;\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('GeneHistoryResource', GeneHistoryResource)\n    .factory('GeneHistory', GeneHistoryService);\n\n  function GeneHistoryResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n    return $resource('/api/genes/:geneId/revisions',\n      {\n        geneId: '@geneId'\n      },\n      {\n        // Base Gene Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        last: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n\n        // Base Gene History Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        lastFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    )\n  }\n\n  function GeneHistoryService(GeneHistoryResource, $q) {\n    // Gene History Base\n    var item = {};\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        item: item,\n        collection: collection,\n      },\n\n      // Gene History Base\n      query: query,\n      last: last,\n\n      // Gene History Base Refresh\n      queryFresh: queryFresh,\n      lastFresh: lastFresh\n    };\n\n    function initBase(geneId) {\n      return $q.all([\n        query(geneId)\n      ])\n    }\n\n    // Gene History Base\n    function query(geneId) {\n      return GeneHistoryResource.query({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function last(geneId) {\n      return GeneHistoryResource.last({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n\n    // Gene History Base Refresh\n    function queryFresh(geneId) {\n      return GeneHistoryResource.queryFresh({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function lastFresh(geneId) {\n      return GeneHistoryResource.lastFresh({ geneId: geneId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('VariantGroupsResource', VariantGroupsResource)\n    .factory('VariantGroups', VariantGroupsService);\n\n  // @ngInject\n  function VariantGroupsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      console.log(['VariantGroupsResource: removing', response.config.url, 'from $http cache.'].join(\" \"));\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/variant_groups/:variantGroupId',\n      {\n        variantGroupId: '@variantGroupId'\n      },\n      {\n        // Base VariantGroup Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        update: {\n          method: 'PATCH',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        delete: {\n          method: 'DELETE',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        apply: {\n          method: 'PATCH'\n        },\n\n        // VariantGroup Collections Resources\n        queryVariants: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/variants',\n          isArray: true,\n          cache: cache\n        },\n\n        // VariantGroup Comments Resources\n        queryComments: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/comments',\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n\n        submitComment: {\n          method: 'POST',\n          url: '/api/variant_groups/:variantGroupId/comments',\n          params: {\n            variantGroupId: '@variantGroupId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/variant_groups/:variantGroupId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/variant_groups/:variantGroupId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheInterceptor\n          }\n        }\n      }\n    )\n  }\n\n  // @ngInject\n  function VariantGroupsService(VariantGroupsResource, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n    // Base VariantGroup and VariantGroup Collection\n    var item = {};\n    var collection = [];\n\n    // VariantGroup Collections\n    var variants = [];\n    var variantGroups = [];\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        variants: variants,\n        comments: comments\n      },\n\n      // VariantGroup Base\n      query: query,\n      get: get,\n      update: update,\n      delete: deleteItem,\n      apply: apply,\n\n      // VariantGroup Collections\n      queryVariants: queryVariants,\n\n      // VariantGroup Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n\n    };\n\n    function initBase(variantGroupId) {\n      return $q.all([\n        get(variantGroupId),\n        queryVariants(variantGroupId)\n      ])\n    }\n\n    function initComments(variantGroupId) {\n      return $q.all([\n        queryComments(variantGroupId)\n      ])\n    }\n    // VariantGroup Base\n    function query() {\n      return VariantGroupsResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(variantGroupId) {\n      return VariantGroupsResource.get({variantGroupId: variantGroupId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          angular.copy(response.variants, variants);\n          return response.$promise;\n        });\n    }\n    function update(reqObj) {\n      return VariantGroupsResource.update(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function deleteItem(variantGroupId) {\n      return VariantGroupsResource.delete({variantGroupId: variantGroupId}).$promise\n        .then(function(response) {\n          item = null;\n          return response.$promise;\n        });\n    }\n    function apply(reqObj) {\n      return VariantGroupsResource.apply(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/variant_groups/' + response.id);\n          get(reqObj.variantGroupId);\n          return $q.when(response);\n        },\n        function(error) { // fail\n          return $q.reject(error);\n        })\n    }\n\n    // VariantGroup Collections\n    function queryVariants(variantGroupId) {\n      console.warn('returning copy of variantGroups.variants');\n      return $q.when(variants);\n      //return VariantGroupsResource.queryVariants({variantGroupId: variantGroupId}).$promise\n      //  .then(function(response) {\n      //    angular.copy(response, variants);\n      //    return response.$promise;\n      //  });\n    }\n\n    // VariantGroup Comments\n    function queryComments(variantGroupId) {\n      return VariantGroupsResource.queryComments({variantGroupId: variantGroupId}).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(variantGroupId, commentId) {\n      return VariantGroupsResource.getComment({variantGroupId: variantGroupId, commentId: commentId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return VariantGroupsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + reqObj.variantGroupId + '/comments');\n          queryComments(reqObj.variantGroupId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return VariantGroupsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function deleteComment(variantGroupId, commentId) {\n      return VariantGroupsResource.deleteComment({variantGroupId: variantGroupId, commentId: commentId}).$promise\n        .then(function(response) {\n          comment = null;\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('VariantGroupRevisionsResource', VariantGroupRevisionsResource)\n    .factory('VariantGroupRevisions', VariantGroupRevisionsService);\n\n  function VariantGroupRevisionsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheResponseInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/variant_groups/:variantGroupId/suggested_changes/:revisionId',\n      {\n        variantGroupId: '@variantGroupId',\n        revisionId: '@revisionId'\n      },\n      {\n        // Base VariantGroup Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        submitRevision: {\n          method: 'POST',\n          cache: false\n        },\n        acceptRevision: {\n          method: 'POST',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/accept',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        rejectRevision: {\n          method: 'POST',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/reject',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId'\n          },\n          cache: cache\n        },\n\n        // VariantGroup Revisions Comments Resources\n        submitComment: {\n          method: 'POST',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n        queryComments: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/variant_groups/:variantGroupId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantGroupId: '@variantGroupId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        }\n      }\n    )\n  }\n\n  function VariantGroupRevisionsService(VariantGroupRevisionsResource, VariantGroups, $cacheFactory, $q) {\n    var cache = $cacheFactory.get('$http');\n\n    // Base VariantGroup Revision and VariantGroup Revisions Collection\n    var item = {};\n    var collection = [];\n\n    // VariantGroup Revisions Comments\n    var comment = {};\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initRevisions: initRevisions,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        comment: comment,\n        comments: comments\n      },\n\n      // VariantGroup Revisions Base\n      query: query,\n      get: get,\n      submitRevision: submitRevision,\n      acceptRevision: acceptRevision,\n      rejectRevision: rejectRevision,\n\n      // VariantGroup Revisions Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n\n    };\n\n    function initBase(variantGroupId, revisionId) {\n      return $q.all([\n        query(variantGroupId, revisionId)\n      ])\n    }\n\n    function initRevisions(variantGroupId) {\n      return $q.all([\n        query(variantGroupId)\n      ])\n    }\n\n    function initComments(variantGroupId, revisionId) {\n      return $q.all([\n        query(variantGroupId, revisionId)\n      ])\n    }\n\n    // VariantGroup Revisions Base\n    function query(variantGroupId) {\n      return VariantGroupRevisionsResource.query({ variantGroupId: variantGroupId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(variantGroupId, revisionId) {\n      return VariantGroupRevisionsResource.get({ variantGroupId: variantGroupId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n\n    function submitRevision(reqObj) {\n      return VariantGroupRevisionsResource.submitRevision(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/variant_groups/' + reqObj.id + '/suggested_changes');\n          return $q.when(response);\n        },\n        function(error) { //fail\n          return $q.reject(error);\n        });\n    }\n\n    function acceptRevision(variantGroupId, revisionId) {\n      return VariantGroupRevisionsResource.acceptRevision({ variantGroupId: variantGroupId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/variant_groups/' + variantGroupId + '/suggested_changes');\n          cache.remove('/api/variant_groups/' + variantGroupId + '/suggested_changes/' + revisionId);\n          cache.remove('/api/variant_groups/' + variantGroupId );\n          query(variantGroupId);\n          get(variantGroupId, revisionId);\n          VariantGroups.get(variantGroupId);\n          return $q.when(response)\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n    function rejectRevision(variantGroupId, revisionId) {\n      return VariantGroupRevisionsResource.rejectRevision({ variantGroupId: variantGroupId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/variant_groups/' + response.id + '/suggested_changes');\n          query(variantGroupId);\n          cache.remove('/api/variant_groups/' + response.id + '/suggested_changes/' + revisionId);\n          get(variantGroupId, revisionId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    // VariantGroup Revisions Comments\n    function queryComments(variantGroupId, revisionId) {\n      return VariantGroupRevisionsResource.queryComments({ variantGroupId: variantGroupId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(variantGroupId, revisionId, commentId) {\n      return VariantGroupRevisionsResource.getComment({ variantGroupId: variantGroupId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return VariantGroupRevisionsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + reqObj.variantGroupId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          queryComments(reqObj.variantGroupId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return VariantGroupRevisionsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + reqObj.variantGroupId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          return response.$promise;\n        });\n    }\n    function deleteComment(variantGroupId, revisionId, commentId) {\n      return VariantGroupRevisionsResource.deleteComment({ variantGroupId: variantGroupId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          cache.remove('/api/variant_groups/' + reqObj.variantGroupId + '/suggested_changes/' + reqObj.revisionId + '/comments');\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('VariantGroupHistoryResource', VariantGroupHistoryResource)\n    .factory('VariantGroupHistory', VariantGroupHistoryService);\n\n  function VariantGroupHistoryResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n    return $resource('/api/variants/:variantId/revisions',\n      {\n        variantId: '@variantId'\n      },\n      {\n        // Base Variant History Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        last: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n\n        // Base Variant History Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        lastFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    )\n  }\n\n  function VariantGroupHistoryService(VariantGroupHistoryResource, $q) {\n    // Variant History Base\n    var item = {};\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        item: item,\n        collection: collection,\n      },\n\n      // Variant History Base\n      query: query,\n      last: last,\n\n      // Variant History Base Refresh\n      queryFresh: queryFresh,\n      lastFresh: lastFresh\n    };\n\n    function initBase(variantId) {\n      return $q.all([\n        query(variantId)\n      ])\n    }\n\n    // Variant History Base\n    function query(variantId) {\n      return VariantGroupHistoryResource.query({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function last(variantId) {\n      return VariantGroupHistoryResource.last({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n\n    // Variant History Base Refresh\n    function queryFresh(variantId) {\n      return VariantGroupHistoryResource.queryFresh({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function lastFresh(variantId) {\n      return VariantGroupHistoryResource.lastFresh({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('VariantsResource', VariantsResource)\n    .factory('Variants', VariantsService);\n\n  // @ngInject\n  function VariantsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      console.log(['VariantsResource: removing', response.config.url, 'from $http cache.'].join(\" \"));\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/variants/:variantId',\n      {\n        variantId: '@variantId'\n      },\n      {\n        // Base Variant Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        update: {\n          method: 'PATCH',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        delete: {\n          method: 'DELETE',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        apply: {\n          method: 'PATCH',\n          cache: false\n        },\n\n        // Variant Collections\n        queryEvidence: {\n          method: 'GET',\n          url: '/api/variants/:variantId/evidence_items',\n          isArray: true,\n          cache: cache\n        },\n\n        // Variant Comments Resources\n        queryComments: {\n          method: 'GET',\n          url: '/api/variants/:variantId/comments',\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/variants/:variantId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        submitComment: {\n          method: 'POST',\n          url: '/api/variants/:variantId/comments',\n          params: {\n            variantId: '@variantId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/variants/:variantId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/variants/:variantId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheInterceptor\n          }\n        }\n      }\n    )\n  }\n\n  // @ngInject\n  function VariantsService(VariantsResource, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // Base Variant and Variant Collection\n    var item = {};\n    var collection = [];\n\n    // Variant Collections\n    var evidence = [];\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        evidence: evidence,\n        comments: comments\n      },\n\n      // Variant Base\n      query: query,\n      get: get,\n      update: update,\n      delete: deleteItem,\n      apply: apply,\n\n      // Variant Collections\n      queryEvidence: queryEvidence,\n\n      // Variant Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n    };\n\n    function initBase(variantId) {\n      return $q.all([\n        get(variantId),\n        queryEvidence(variantId)\n      ])\n    }\n\n    function initComments(variantId) {\n      return $q.all([\n        queryComments(variantId)\n      ])\n    }\n    // Variant Base\n    function query() {\n      return VariantsResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(variantId) {\n      return VariantsResource.get({variantId: variantId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function update(reqObj) {\n      return VariantsResource.update(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function deleteItem(variantId) {\n      return VariantsResource.delete({variantId: variantId}).$promise\n        .then(function(response) {\n          item = null;\n          return response.$promise;\n        });\n    }\n    function apply(reqObj) {\n      return VariantsResource.apply(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/variants/' + response.id);\n          get(reqObj.variantId);\n          return $q.when(response);\n        },\n        function(error) { // fail\n          return $q.reject(error);\n        })\n    }\n\n    // Variant Collections\n    function queryEvidence(variantId) {\n      return VariantsResource.queryEvidence({variantId: variantId}).$promise\n        .then(function(response) {\n          angular.copy(response, evidence);\n          return response.$promise;\n        });\n    }\n\n    // Variant Comments\n    function queryComments(variantId) {\n      return VariantsResource.queryComments({variantId: variantId}).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(variantId, commentId) {\n      return VariantsResource.getComment({variantId: variantId, commentId: commentId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return VariantsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/comments');\n          queryComments(reqObj.variantId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return VariantsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/comments/' + reqObj.id);\n          cache.remove('/api/variants/' + reqObj.variantId + '/comments');\n          queryComments(reqObj.variantId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(variantId, commentId) {\n      return VariantsResource.deleteComment({variantId: variantId, commentId: commentId}).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + variantId + '/comments/' + commentId);\n          cache.remove('/api/variants/' + variantId + '/comments');\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('VariantRevisionsResource', VariantRevisionsResource)\n    .factory('VariantRevisions', VariantRevisionsService);\n\n  function VariantRevisionsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheResponseInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/variants/:variantId/suggested_changes/:revisionId',\n      {\n        variantId: '@variantId',\n        revisionId: '@revisionId'\n      },\n      {\n        // Base Variant Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        submitRevision: {\n          method: 'POST',\n          cache: false\n        },\n        acceptRevision: {\n          method: 'POST',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/accept',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        rejectRevision: {\n          method: 'POST',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/reject',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId'\n          },\n          cache: cache\n        },\n\n        // Variant Revisions Comments Resources\n        submitComment: {\n          method: 'POST',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n        queryComments: {\n          method: 'GET',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/variants/:variantId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            variantId: '@variantId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        }\n      }\n    )\n  }\n\n  function VariantRevisionsService(VariantRevisionsResource, Variants, $cacheFactory, $q) {\n    // fetch variants cache, need to delete variant record when revision is submitted\n    var cache = $cacheFactory.get('$http');\n\n    // Base Variant Revision and Variant Revisions Collection\n    var item = {};\n    var collection = [];\n\n    // Variant Revisions Comments\n    var comment = {};\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initRevisions: initRevisions,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        comment: comment,\n        comments: comments\n      },\n\n      // Variant Revisions Base\n      query: query,\n      get: get,\n      submitRevision: submitRevision,\n      acceptRevision: acceptRevision,\n      rejectRevision: rejectRevision,\n\n      // Variant Revisions Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n    };\n\n    function initBase(variantId, revisionId) {\n      return $q.all([\n        query(variantId, revisionId)\n      ])\n    }\n\n    function initRevisions(variantId) {\n      return $q.all([\n        query(variantId)\n      ])\n    }\n\n    function initComments(variantId, revisionId) {\n      return $q.all([\n        query(variantId, revisionId)\n      ])\n    }\n\n    // Variant Revisions Base\n    function query(variantId) {\n      return VariantRevisionsResource.query({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(variantId, revisionId) {\n      return VariantRevisionsResource.get({ variantId: variantId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n\n    function submitRevision(reqObj) {\n      return VariantRevisionsResource.submitRevision(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/variants/' + reqObj.id + '/suggested_changes');\n          return $q.when(response);\n        },\n        function(error) { //fail\n          return $q.reject(error);\n        });\n    }\n\n    function acceptRevision(variantId, revisionId) {\n      return VariantRevisionsResource.acceptRevision({ variantId: variantId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/variants/' + variantId + '/suggested_changes');\n          query(variantId);\n          cache.remove('/api/variants/' + variantId + '/suggested_changes/' + revisionId);\n          get(variantId, revisionId);\n          cache.remove('/api/variants/' + variantId );\n          Variants.get(variantId);\n          return $q.when(response)\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    function rejectRevision(variantId, revisionId) {\n      return VariantRevisionsResource.rejectRevision({ variantId: variantId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/variants/' + response.id + '/suggested_changes');\n          query(variantId);\n          cache.remove('/api/variants/' + response.id + '/suggested_changes/' + revisionId);\n          get(variantId, revisionId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    // Variant Revisions Comments\n    function queryComments(variantId, revisionId) {\n      return VariantRevisionsResource.queryComments({ variantId: variantId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(variantId, revisionId, commentId) {\n      return VariantRevisionsResource.getComment({ variantId: variantId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return VariantRevisionsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/suggested_changes/' + reqObj.commentId + '/comments');\n          queryComments(reqObj.variantId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return VariantRevisionsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/suggested_changes/' + reqObj.commentId + '/comments');\n          queryComments(reqObj.variantId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(variantId, revisionId, commentId) {\n      return VariantRevisionsResource.deleteComment({ variantId: variantId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          cache.remove('/api/variants/' + reqObj.variantId + '/suggested_changes/' + reqObj.commentId + '/comments');\n          queryComments(reqObj.variantId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('VariantHistoryResource', VariantHistoryResource)\n    .factory('VariantHistory', VariantHistoryService);\n\n  function VariantHistoryResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n    return $resource('/api/variants/:variantId/revisions',\n      {\n        variantId: '@variantId'\n      },\n      {\n        // Base Variant History Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        last: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n\n        // Base Variant History Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        lastFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    )\n  }\n\n  function VariantHistoryService(VariantHistoryResource, $q) {\n    // Variant History Base\n    var item = {};\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        item: item,\n        collection: collection,\n      },\n\n      // Variant History Base\n      query: query,\n      last: last,\n\n      // Variant History Base Refresh\n      queryFresh: queryFresh,\n      lastFresh: lastFresh\n    };\n\n    function initBase(variantId) {\n      return $q.all([\n        query(variantId)\n      ])\n    }\n\n    // Variant History Base\n    function query(variantId) {\n      return VariantHistoryResource.query({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function last(variantId) {\n      return VariantHistoryResource.last({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n\n    // Variant History Base Refresh\n    function queryFresh(variantId) {\n      return VariantHistoryResource.queryFresh({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function lastFresh(variantId) {\n      return VariantHistoryResource.lastFresh({ variantId: variantId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('EvidenceResource', EvidenceResource)\n    .factory('Evidence', EvidenceService);\n\n  // @ngInject\n  function EvidenceResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      console.log(['EvidenceResource: removing', response.config.url, 'from $http cache.'].join(\" \"));\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/evidence_items/:evidenceId',\n      {\n        evidenceId: '@evidenceId'\n      },\n      {\n        // Base Evidence Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: { // get a single evidence\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        update: {\n          method: 'PATCH',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        delete: {\n          method: 'DELETE',\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        add: {\n          method: 'POST',\n          cache: false\n        },\n        apply: {\n          method: 'PATCH',\n          cache: false\n        },\n\n        // Evidence Comments Resources\n        queryComments: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/comments',\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n\n        submitComment: {\n          method: 'POST',\n          url: '/api/evidence_items/:evidenceId/comments',\n          params: {\n            evidenceId: '@evidenceId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/evidence_items/:evidenceId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheInterceptor\n          }\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/evidence_items/:evidenceId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheInterceptor\n          }\n        }\n\n      }\n    )\n  }\n\n  // @ngInject\n  function EvidenceService(EvidenceResource, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // Base Evidence and Evidence Collection\n    var item = {};\n    var collection = [];\n\n    // Evidence Collections\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        comments: comments\n      },\n\n      // Evidence Base\n      add: add,\n      query: query,\n      get: get,\n      update: update,\n      delete: deleteItem,\n      apply: apply,\n\n      // Evidence Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment\n    };\n\n    function initBase(evidenceId) {\n      return $q.all([\n        get(evidenceId)\n      ])\n    }\n\n    function initComments(evidenceId) {\n      return $q.all([\n        queryComments(evidenceId)\n      ])\n    }\n    // Evidence Base\n    function add(reqObj) {\n      return EvidenceResource.add(reqObj).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function query() {\n      return EvidenceResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(evidenceId) {\n      return EvidenceResource.get({evidenceId: evidenceId}).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function update(reqObj) {\n      return EvidenceResource.update(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n    function deleteItem(evidenceId) {\n      return EvidenceResource.delete({evidenceId: evidenceId}).$promise\n        .then(function(response) {\n          item = null;\n          return response.$promise;\n        });\n    }\n    function apply(reqObj) {\n      return EvidenceResource.apply(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/evidence_items/' + response.id);\n          get(reqObj.evidenceId);\n          return $q.when(response);\n        },\n        function(error) { // fail\n          return $q.reject(error);\n        })\n    }\n\n    // Evidence Comments\n    function queryComments(evidenceId) {\n      return EvidenceResource.queryComments({evidenceId: evidenceId}).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(evidenceId, commentId) {\n      return EvidenceResource.getComment({evidenceId: evidenceId, commentId: commentId}).$promise\n        .then(function(response) {\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return EvidenceResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/evidence_items/' + reqObj.evidenceId + '/comments');\n          queryComments(reqObj.evidenceId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return EvidenceResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          cache.remove('/api/evidence_items/' + reqObj.evidenceId + '/comments');\n          queryComments(reqObj.evidenceId);\n          return response.$promise;\n        });\n    }\n    function deleteComment(evidenceId, commentId) {\n      return EvidenceResource.deleteComment({evidenceId: evidenceId, commentId: commentId}).$promise\n        .then(function(response) {\n          cache.remove('/api/evidence_items/' + evidenceId + '/comments');\n          queryComments(evidenceId);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n\n  angular.module('civic.services')\n    .factory('EvidenceRevisionsResource', EvidenceRevisionsResource)\n    .factory('EvidenceRevisions', EvidenceRevisionsService);\n\n  function EvidenceRevisionsResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheResponseInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/evidence_items/:evidenceId/suggested_changes/:revisionId',\n      {\n        evidenceId: '@evidenceId',\n        revisionId: '@revisionId'\n      },\n      {\n        // Base Evidence Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        get: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        submitRevision: {\n          method: 'POST',\n          cache: false\n        },\n        acceptRevision: {\n          method: 'POST',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/accept',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        rejectRevision: {\n          method: 'POST',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/reject',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId'\n          },\n          cache: cache\n        },\n\n        // Base Evidence Revisions Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        getFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        },\n\n        // Evidence Revisions Comments Resources\n        submitComment: {\n          method: 'POST',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId'\n          },\n          cache: false\n        },\n        updateComment: {\n          method: 'PATCH',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n        queryComments: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: cache\n        },\n        getComment: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: cache\n        },\n        deleteComment: {\n          method: 'DELETE',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          interceptor: {\n            response: cacheResponseInterceptor\n          }\n        },\n\n        // Evidence Revisions Comments Resources Refresh\n        queryCommentsFresh: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId'\n          },\n          isArray: true,\n          cache: false\n        },\n        getCommentFresh: {\n          method: 'GET',\n          url: '/api/evidence_items/:evidenceId/suggested_changes/:revisionId/comments/:commentId',\n          params: {\n            evidenceId: '@evidenceId',\n            revisionId: '@revisionId',\n            commentId: '@commentId'\n          },\n          isArray: false,\n          cache: false\n        }\n      }\n    )\n  }\n\n  function EvidenceRevisionsService(EvidenceRevisionsResource, Evidence, $cacheFactory, $q) {\n    // fetch evidence cache, need to delete evidence record when revision is submitted\n    var cache = $cacheFactory.get('$http');\n\n    // Base Evidence Revision and Evidence Revisions Collection\n    var item = {};\n    var collection = [];\n\n    // Evidence Revisions Comments\n    var comment = {};\n    var comments = [];\n\n    return {\n      initBase: initBase,\n      initRevisions: initRevisions,\n      initComments: initComments,\n      data: {\n        item: item,\n        collection: collection,\n        comment: comment,\n        comments: comments\n      },\n\n      // Evidence Revisions Base\n      query: query,\n      get: get,\n      submitRevision: submitRevision,\n      acceptRevision: acceptRevision,\n      rejectRevision: rejectRevision,\n\n      // Evidence Revisions Base Refresh\n      queryFresh: queryFresh,\n      getFresh: getFresh,\n\n      // Evidence Revisions Comments\n      queryComments: queryComments,\n      getComment: getComment,\n      submitComment: submitComment,\n      updateComment: updateComment,\n      deleteComment: deleteComment,\n\n      // Evidence Revisions Comments Refresh\n      queryCommentsFresh: queryCommentsFresh,\n      getCommentFresh: getCommentFresh\n    };\n\n    function initBase(evidenceId, revisionId) {\n      return $q.all([\n        query(evidenceId, revisionId)\n      ])\n    }\n\n    function initRevisions(evidenceId) {\n      console.log('EvidenceRevisionsService.initRevisions called.');\n      return $q.all([\n        query(evidenceId)\n      ])\n    }\n\n    function initComments(evidenceId, revisionId) {\n      return $q.all([\n        query(evidenceId, revisionId)\n      ])\n    }\n\n    // Evidence Revisions Base\n    function query(evidenceId) {\n      return EvidenceRevisionsResource.query({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function get(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.get({ evidenceId: evidenceId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n\n    function submitRevision(reqObj) {\n      return EvidenceRevisionsResource.submitRevision(reqObj).$promise.then(\n        function(response) { // success\n          cache.remove('/api/evidence_items/' + reqObj.id + '/suggested_changes');\n          return $q.when(response);\n        },\n        function(error) { //fail\n          return $q.reject(error);\n        });\n    }\n\n    function acceptRevision(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.acceptRevision({ evidenceId: evidenceId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/evidence_items/' + evidenceId + '/suggested_changes');\n          query(evidenceId);\n          cache.remove('/api/evidence_items/' + evidenceId + '/suggested_changes/' + revisionId);\n          get(evidenceId, revisionId);\n          cache.remove('/api/evidence_items/' + evidenceId );\n          Evidence.get(evidenceId);\n          return $q.when(response)\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n    function rejectRevision(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.rejectRevision({ evidenceId: evidenceId, revisionId: revisionId }).$promise.then(\n        function(response) {\n          cache.remove('/api/evidence_items/' + response.id + '/suggested_changes');\n          queryFresh(evidenceId);\n          cache.remove('/api/evidence_items/' + response.id + '/suggested_changes/' + revisionId);\n          getFresh(evidenceId, revisionId);\n          return $q.when(response);\n        },\n        function(error) {\n          return $q.reject(error);\n        });\n    }\n\n    // Evidence Revisions Base Refresh\n    function queryFresh(evidenceId) { // works\n      return EvidenceRevisionsResource.queryFresh({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function getFresh(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.getFresh({ evidenceId: evidenceId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        });\n    }\n\n    // Evidence Revisions Comments\n    function queryComments(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.queryComments({ evidenceId: evidenceId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getComment(evidenceId, revisionId, commentId) {\n      return EvidenceRevisionsResource.getComment({ evidenceId: evidenceId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          return response.$promise;\n        });\n    }\n    function submitComment(reqObj) {\n      return EvidenceRevisionsResource.submitComment(reqObj).$promise\n        .then(function(response) {\n          queryCommentsFresh(reqObj.evidenceId, reqObj.revisionId);\n          return response.$promise;\n        });\n    }\n    function updateComment(reqObj) {\n      return EvidenceRevisionsResource.updateComment(reqObj).$promise\n        .then(function(response) {\n          angular.copy(response, comment);\n          getCommentFresh(reqObj);\n          return response.$promise;\n        });\n    }\n    function deleteComment(evidenceId, revisionId, commentId) {\n      return EvidenceRevisionsResource.deleteComment({ evidenceId: evidenceId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          comment = null;\n          return response.$promise;\n        });\n    }\n\n    // Evidence Revisions Comments Refresh\n    function queryCommentsFresh(evidenceId, revisionId) {\n      return EvidenceRevisionsResource.queryCommentsFresh({ evidenceId: evidenceId, revisionId: revisionId }).$promise\n        .then(function(response) {\n          angular.copy(response, comments);\n          return response.$promise;\n        });\n    }\n    function getCommentFresh(evidenceId, revisionId, commentId) {\n      return EvidenceRevisionsResource.getCommentFresh({ evidenceId: evidenceId, revisionId: revisionId, commentId: commentId }).$promise\n        .then(function(response) {\n          angular.copy(response   , comment);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.services')\n    .factory('EvidenceHistoryResource', EvidenceHistoryResource)\n    .factory('EvidenceHistory', EvidenceHistoryService);\n\n  function EvidenceHistoryResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    // adding this interceptor to a route will remove cached record\n    var cacheInterceptor = function(response) {\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n    return $resource('/api/evidence_items/:evidenceId/revisions',\n      {\n        evidenceId: '@evidenceId'\n      },\n      {\n        // Base Evidence Revisions Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        },\n        last: {\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n\n        // Base Evidence History Refresh\n        queryFresh: {\n          method: 'GET',\n          isArray: true,\n          cache: false\n        },\n        lastFresh: {\n          method: 'GET',\n          isArray: false,\n          cache: false\n        }\n      }\n    )\n  }\n\n  function EvidenceHistoryService(EvidenceHistoryResource, $q) {\n    // Evidence History Base\n    var item = {};\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        item: item,\n        collection: collection\n      },\n\n      // Evidence History Base\n      query: query,\n      last: last,\n\n      // Evidence History Base Refresh\n      queryFresh: queryFresh,\n      lastFresh: lastFresh\n    };\n\n    function initBase(evidenceId) {\n      return $q.all([\n        query(evidenceId)\n      ])\n    }\n\n    // Evidence History Base\n    function query(evidenceId) {\n      return EvidenceHistoryResource.query({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function last(evidenceId) {\n      return EvidenceHistoryResource.last({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n\n    // Evidence History Base Refresh\n    function queryFresh(evidenceId) {\n      return EvidenceHistoryResource.queryFresh({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n    function lastFresh(evidenceId) {\n      return EvidenceHistoryResource.lastFresh({ evidenceId: evidenceId }).$promise\n        .then(function(response) {\n          angular.copy(response, item);\n          return response.$promise;\n        })\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .constant('ConfigService', {\n      serverUrl: 'http://127.0.0.1:3000/',\n      mainMenuItems: [\n        {\n          label: 'Collaborate',\n          state: 'collaborate'\n        },\n        {\n          label: 'Help',\n          state: 'help'\n        },\n        {\n          label: 'FAQ',\n          state: 'faq'\n        }\n      ],\n      footerMenuItems: [\n        {\n          label: 'Glossary of Terms',\n          state: 'glossary'\n        },\n        {\n          label: 'API Documentation',\n          state: 'api'\n        },\n        {\n          label: 'Data Releases',\n          state: 'releases'\n        },\n        {\n          label: 'Contact',\n          state: 'contact'\n        }\n      ]\n    }\n  );\n})();\n\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('DatatablesResource', DatatablesResource)\n    .factory('Datatables', DatatablesService);\n\n  // ?count=10&page=2&sorting[entrez_gene]=asc&sorting[variant]=desc&filter[entrez_gene]=flt\n  // @ngInject\n  function DatatablesResource($resource) {\n    return $resource('/api/datatables/:mode',\n      {\n        mode: '@mode',\n        count: '@count',\n        page: '@page'\n      },\n      {\n        query: {\n          method: 'GET',\n          isArray: false,\n          transformResponse: function(data) {\n            var events = JSON.parse(data);\n            // convert arrays to comma-fied strings\n            events.result = _.map(events.result, function (event) {\n              _.forEach(_.keys(event), function(key) {\n                if(_.isArray(event[key])) {\n                  event[key] = event[key].join(', ');\n                }\n              });\n              return event;\n            });\n            return events;\n          },\n          cache: false\n        }\n      });\n  }\n\n  // @ngInject\n  function DatatablesService(DatatablesResource) {\n    return {\n      query: function(reqObj) {\n        return DatatablesResource.query(reqObj).$promise\n          .then(function(response) {\n            return response;\n          })\n      }\n    }\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('TypeAheadResults', TypeAheadResultsService);\n\n  // @ngInject\n  function TypeAheadResultsService($resource, $cacheFactory) {\n    var TypeAheadResults = $resource('/api/variants/typeahead_results',\n      {\n        query: '@query',\n        limit: 12\n      },\n      {\n        query: { // get matching variants\n          method: 'GET',\n          isArray: false,\n          cache: true\n        }\n      });\n\n    return TypeAheadResults;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('Glossary', GlossaryService);\n\n  // @ngInject\n  function GlossaryService($resource, $cacheFactory) {\n    var cache = $cacheFactory('glossaryCache');\n\n    var Glossary = $resource('/api/text/:term',\n      {},\n      {\n        query: { // get a list of all glossary items\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        },\n        get: { // get a single glossary item\n          method: 'GET',\n          isArray: false,\n          cache: cache\n        }\n      });\n\n    return Glossary;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('MyGeneInfoResource', MyGeneInfoResource)\n    .factory('MyGeneInfo', MyGeneInfoService);\n\n  // @ngInject\n  function MyGeneInfoResource($resource, $cacheFactory, _) {\n\n    var cache = $cacheFactory('MyGeneInfo'); // default cache doesn't work for some reason\n\n    return $resource('/api/genes/mygene_info_proxy/:geneId',\n      {\n        geneId: '@geneId'\n      },\n      {\n        get: {\n          // isArray: false,\n          cache: cache,\n          transformResponse: function(data) {\n            if(typeof data == 'string') {\n              data = JSON.parse(data);\n            }\n            var srcMap = {\n              kegg: 'http://www.genome.jp/kegg-bin/show_pathway?',\n              reactome: 'http://www.reactome.org/cgi-bin/control_panel_st_id?ST_ID=',\n              pharmgkb: 'https://www.pharmgkb.org/pathway/',\n              humancyc: 'http://humancyc.org/HUMAN/NEW-IMAGE?type=PATHWAY&object=',\n              smpdb: 'http://www.smpdb.ca/view/',\n              pid: 'http://pid.nci.nih.gov/search/pathway_landing.shtml?what=graphic&jpg=on&pathway_id=',\n              wikipathways: 'http://wikipathways.org/index.php/Pathway:',\n              netpath: null,\n              biocarta: null,\n              inoh: null,\n              signalink: null,\n              ehmn: null\n            };\n            var pathways = data.pathway || [];\n            var pathwaysFinal = [];\n            var link;\n            for(var src in pathways){\n              if(!angular.isArray(pathways[src])){\n                pathways[src] = [pathways[src]];\n              }\n              for(var p in pathways[src]){\n                link = srcMap[src]+pathways[src][p].id;\n                if(srcMap[src] === null){\n                  link = null;\n                }\n                pathwaysFinal.push({\n                  name: pathways[src][p].name,\n                  link: link,\n                  src: src\n                });\n              }\n            }\n            data.pathway = pathwaysFinal;\n            if(!_.isArray(data.alias) && data.alias){\n              data.alias = [data.alias];\n            }\n            if(!_.isArray(data.interpro) && data.interpro){\n              data.interpro = [data.interpro];\n            }\n            return data;\n          }\n        }\n\n      });\n  }\n\n  // @ngInject\n  function MyGeneInfoService(MyGeneInfoResource) {\n    return {\n      get: function(entrez_id) {\n        return MyGeneInfoResource.get({geneId: entrez_id}).$promise\n          .then(function(response) {\n            return response;\n        });\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .service('TitleService', TitleService);\n\n  // @ngInject\n  // Titles are constructed by parsing the state's data.titleExp string within a scope constructed\n  // of the relevant CIViC entities (gene, variant, evidenceItem, variantGroup)\n  function TitleService($rootScope, Genes, Variants, Evidence, VariantGroups, _, $q, $parse) {\n    $rootScope.$on('$stateChangeSuccess',function(event, toState, toParams) {\n      var title = '';\n\n      var titleScope = {\n        gene: {},\n        variant: {},\n        evidence: {},\n        variantGroup: {}\n      };\n\n      // TODO: get needed entity resources by querying $state.$current.globals\n      // note: requires that all resources necessary for parsing a state's titleExp must be resolved by ui-router state config\n\n      // construct promises for relevant entities\n      if(_.has(toParams, 'geneId') && titleScope.gene.entrez_id !== toParams.geneId) {\n        var genePromise = Genes.get(toParams.geneId);\n      }\n\n      if(_.has(toParams, 'variantId') && titleScope.variant.id !== toParams.variantId) {\n        var variantPromise = Variants.get(toParams.variantId);\n      }\n\n      if(_.has(toParams, 'variantGroupId') && titleScope.variantGroup.id !== toParams.variantGroupId) {\n        var variantGroupsPromise = VariantGroups.get(toParams.variantGroupId);\n      }\n\n      if(_.has(toParams, 'evidenceId') && titleScope.evidence.id !== toParams.evidenceId) {\n        var evidencePromise = Evidence.get(toParams.evidenceId);\n      }\n\n      // resolve promises, apply $parse with constructed title scope\n      $q.all({ gene: genePromise, variant: variantPromise, evidence: evidencePromise, variantGroup: variantGroupsPromise }).then(function(resolutions) {\n        titleScope.gene = resolutions.gene;\n        titleScope.variant = resolutions.variant;\n        titleScope.evidence = resolutions.evidence;\n        titleScope.variantGroup = resolutions.variantGroup;\n        title = $parse(toState.data.titleExp)(titleScope);\n        $rootScope.$broadcast('title:update', { newTitle: title });\n      });\n    });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.services')\n    .factory('_', function ($window) {\n      return $window._;\n    });\n})();\n(function (ng, _) {\n  'use strict';\n\n  var\n    lodashModule = ng.module('angular-lodash', []),\n    utilsModule = ng.module('angular-lodash/utils', []),\n    filtersModule = ng.module('angular-lodash/filters', []);\n\n  // begin custom _\n\n  function propGetterFactory(prop) {\n    return function(obj) {return obj[prop];};\n  }\n\n  _._ = _;\n\n  // Shiv \"min\", \"max\" ,\"sortedIndex\" to accept property predicate.\n  _.each(['min', 'max', 'sortedIndex'], function(fnName) {\n    _[fnName] = _.wrap(_[fnName], function(fn) {\n      var args = _.toArray(arguments).slice(1);\n\n      if(_.isString(args[2])) {\n        // for \"sortedIndex\", transmuting str to property getter\n        args[2] = propGetterFactory(args[2]);\n      }\n      else if(_.isString(args[1])) {\n        // for \"min\" or \"max\", transmuting str to property getter\n        args[1] = propGetterFactory(args[1]);\n      }\n\n      return fn.apply(_, args);\n    });\n  });\n\n  // Shiv \"filter\", \"reject\" to angular's built-in,\n  // and reserve lodash's feature(works on obj).\n  ng.injector(['ng']).invoke(['$filter', function($filter) {\n    _.filter = _.select = _.wrap($filter('filter'), function(filter, obj, exp) {\n      if(!(_.isArray(obj))) {\n        obj = _.toArray(obj);\n      }\n\n      return filter(obj, exp);\n    });\n\n    _.reject = function(obj, exp) {\n      // use angular built-in negated predicate\n      if(_.isString(exp)) {\n        return _.filter(obj, '!' + exp);\n      }\n\n      var diff = _.bind(_.difference, _, obj);\n\n      return diff(_.filter(obj, exp));\n    };\n  }]);\n\n  // end custom _\n\n\n  // begin register angular-lodash/utils\n\n  _.each(_.methods(_), function(methodName) {\n    function register($rootScope) {$rootScope[methodName] = _.bind(_[methodName], _);}\n\n    _.each([\n      lodashModule,\n      utilsModule,\n      ng.module('angular-lodash/utils/' + methodName, [])\n    ], function(module) {\n      module.run(['$rootScope', register]);\n    });\n  });\n\n  // end register angular-lodash/utils\n\n\n  // begin register angular-lodash/filters\n\n  var\n    adapList = [\n      ['map', 'collect'],\n      ['reduce', 'inject', 'foldl'],\n      ['reduceRight', 'foldr'],\n      ['find', 'detect'],\n      ['filter', 'select'],\n      'where',\n      'findWhere',\n      'reject',\n      'invoke',\n      'pluck',\n      'max',\n      'min',\n      'sortBy',\n      'groupBy',\n      'countBy',\n      'shuffle',\n      'toArray',\n      'size',\n      ['first', 'head', 'take'],\n      'initial',\n      'last',\n      ['rest', 'tail', 'drop'],\n      'compact',\n      'flatten',\n      'without',\n      'union',\n      'intersection',\n      'difference',\n      ['uniq', 'unique'],\n      'zip',\n      'object',\n      'indexOf',\n      'lastIndexOf',\n      'sortedIndex',\n      'keys',\n      'values',\n      'pairs',\n      'invert',\n      ['functions', 'methods'],\n      'pick',\n      'omit',\n      'tap',\n      'identity',\n      'uniqueId',\n      'escape',\n      'result',\n      'template'\n    ];\n\n  _.each(adapList, function(filterNames) {\n    if(!(_.isArray(filterNames))) {\n      filterNames = [filterNames];\n    }\n\n    var\n      filter = _.bind(_[filterNames[0]], _),\n      filterFactory = function() {return filter;};\n\n    _.each(filterNames, function(filterName) {\n      _.each([\n        lodashModule,\n        filtersModule,\n        ng.module('angular-lodash/filters/' + filterName, [])\n      ], function(module) {\n        module.filter(filterName, filterFactory);\n      });\n    });\n  });\n\n  // end register angular-lodash/filters\n\n}(angular, window._));\n\n(function() {\n  angular.module('civic.services')\n    .factory('ReleasesResource', ReleasesResource)\n    .factory('Releases', ReleasesService);\n\n  // @ngInject\n  function ReleasesResource($resource, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var cacheInterceptor = function(response) {\n      console.log(['ReleasesResource: removing', response.config.url, 'from $http cache.'].join(\" \"));\n      cache.remove(response.config.url);\n      return response.$promise;\n    };\n\n    return $resource('/api/releases',\n      {\n        // Base Release Resources\n        query: {\n          method: 'GET',\n          isArray: true,\n          cache: cache\n        }\n      }\n    )\n  }\n\n  // @ngInject\n  function ReleasesService(ReleasesResource, $q, $cacheFactory) {\n    var cache = $cacheFactory.get('$http');\n\n    var collection = [];\n\n    return {\n      initBase: initBase,\n      data: {\n        collection: collection\n      },\n\n      // Release Base\n      query: query\n    };\n\n    function initBase() {\n      return $q.all([\n        query()\n      ])\n    }\n\n    // Release Base\n    function query() {\n      return ReleasesResource.query().$promise\n        .then(function(response) {\n          angular.copy(response, collection);\n          return response.$promise;\n        });\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('HomeCtrl', HomeCtrl);\n\n  // @ngInject\n  function HomeCtrl($rootScope, $scope, $log) {\n    // $log.info('HomeCtrl instantiated');\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('HelpCtrl', HelpCtrl);\n\n  // @ngInject\n  function HelpCtrl($scope) {\n    $scope.loadedMsg = 'Loaded Help!';\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('ContactCtrl', ContactCtrl);\n\n  // @ngInject\n  function ContactCtrl($scope) {\n    $scope.loadedMsg = 'Loaded Contact!';\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('GlossaryCtrl', GlossaryCtrl);\n\n  // @ngInject\n  function GlossaryCtrl($scope, Glossary) {\n    $scope.glossary = {};\n    Glossary.query().$promise\n      .then(function(response) {\n        $scope.glossary.terms = response;\n      });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular\n    .module('civic.pages')\n    .controller('CollaborateCtrl', CollaborateCtrl);\n\n// @ngInject\n  function CollaborateCtrl ($scope) {\n    $scope.loadedMsg = 'Loaded Collaborate!';\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.pages')\n    .controller('ReleasesController', ReleasesController);\n\n  // @ngInject\n  function ReleasesController($window, Releases, _) {\n    console.log('ReleasesController loaded.');\n    var vm = this;\n    // TODO move releases init to ui-router state resolve\n    Releases.initBase().then(function(releases){\n      vm.releases = _.map(releases[0], function(release) {\n        release.fileNames = _.map(release.files, function(filename) {\n          return _.last(filename.split('/'));\n        });\n        release.fileUrls = _.map(release.files, function(filename) {\n          return $window.location.origin + filename;\n        });\n        return release;\n      });\n\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('title', titleDirective);\n\n  // @ngInject\n  function titleDirective($rootScope, $timeout, TitleService) {\n    var directive = {\n      restrict: 'E',\n      link: function() {\n        var listener = function(event, data) {\n          // console.log('title title:update listener called. ****************');\n          $timeout(function() {\n            $rootScope.title = (typeof data.newTitle !== 'undefined') ? 'CIViC: ' + data.newTitle : 'CIViC - Clinincal Interpretation of Variants in Cancer';\n          });\n        };\n        $rootScope.$on('title:update', listener); // updates titles app-wide (e.g. 'subheader' directive)\n      }\n    };\n\n    return directive;\n  }\n})();\n\n(function () {\n  'use strict';\n  angular.module('civic.common')\n    .directive('subheader', subheader)\n    .controller('SubheaderCtrl', SubheaderCtrl);\n\n  // @ngInject\n  function subheader(Security) {\n    var directive = {\n      restrict: 'E',\n      scope: true,\n      templateUrl: 'components/directives/subheader.tpl.html',\n      controller: SubheaderCtrl,\n      link: /* @ngInject */ function($scope) {\n        $scope.isAuthenticated = Security.isAuthenticated;\n        $scope.isAdmin = Security.isAuthenticated;\n      }\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function SubheaderCtrl($scope, $rootScope, Security) {\n    $scope.isAuthenticated = Security.isAuthenticated;\n    $scope.isAdmin = Security.isAuthenticated;\n    \n    $rootScope.$on('title:update', function(event, data) {\n      $scope.view.stateTitle = data.newTitle;\n    });\n  }\n})();\n\nangular.module('civic.common')\n  .directive('sessionInfo', sessionInfo);\n\n/**\n * @ngInject\n */\nfunction sessionInfo(ConfigService) {\n  'use strict';\n  return {\n    restrict: 'EA',\n    template: '<h2>CIViC Server URL: {{ conf.serverUrl }}</h2>',\n    link: function(scope) {\n      scope.conf = ConfigService;\n    }\n  };\n}\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('quickSearch', quickSearch)\n    .controller('quickSearchCtrl', quickSearchCtrl);\n\n  // @ngInject\n  function quickSearchCtrl($scope, TypeAheadResults, $state, _) {\n    $scope.getVariants = function (val) {\n      return TypeAheadResults.query({ query: val }).$promise\n        .then(function (response) {\n          var labelLimit = 75;\n          return _.map(response.result, function (event) {\n            var label = event.entrez_gene + ' / ' + event.variant;\n\n            if (_.includes(event.terms, 'gene_aliases')) {\n              var aliasLabel = event.gene_aliases.length > 1 ? 'Aliases' : 'Alias';\n              label = label + ' -- ' + aliasLabel + ': ' + event.gene_aliases.join(', ');\n            }\n\n            if (_.includes(event.terms, 'drug_names')) {\n              var drugLabel = event.drug_names.length > 1 ? 'Drugs' : 'Drug';\n              label = label + ' -- ' + drugLabel + ': ' + event.drug_names.join(', ');\n            }\n\n            if (_.includes(event.terms, 'disease_names')) {\n              var diseaseLabel = event.disease_names.length > 1 ? 'Diseases' : 'Disease';\n              label = label + ' -- ' + diseaseLabel + ': ' + event.disease_names.join(', ');\n            }\n\n            if (label.length > labelLimit) { label = _.trunc(label, labelLimit); }\n\n            return {\n              /*jshint camelcase: false */\n              gene: event.entrez_name,\n              geneId: event.gene_id,\n              label: label,\n              variant: event.variant,\n              variantId: event.variant_id\n            };\n          });\n        });\n    };\n\n    $scope.onSelect = function($item, $model) {\n      $state.go('events.genes.summary.variants.summary', {geneId: $item.geneId, variantId: $item.variantId});\n      $scope.asyncSelected.model = ''; // clear typeahead\n    };\n\n  }\n  // @ngInject\n  function quickSearch() {\n    var directive = {\n      templateUrl: 'components/directives/quickSearch.tpl.html',\n      restrict: 'E',\n      scope: true,\n      controller: quickSearchCtrl\n    };\n\n    return directive;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('mainMenu', mainMenu);\n\n  // @ngInject\n  function mainMenu() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'components/directives/mainMenu.tpl.html',\n      replace: true,\n      scope: true,\n      controller: mainMenuController\n    };\n\n    return directive;\n  }\n\n  // @ngInject\n  function mainMenuController($scope, ConfigService) {\n    $scope.menuItems = ConfigService.mainMenuItems;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('footerMenu', footerMenu);\n\n// @ngInject\n  function footerMenu() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'components/directives/footerMenu.tpl.html',\n      replace: true,\n      scope: true,\n      controller: FooterMenuController\n    };\n\n    return directive;\n  }\n\n// @ngInject\n  function FooterMenuController($scope, ConfigService) {\n    $scope.menuItems = ConfigService.footerMenuItems;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('headerSearch', headerSearch);\n\n  function headerSearch() {\n    return {\n      restrict: 'E',\n      templateUrl: 'components/directives/headerSearch.tpl.html',\n      controller: headerSearch\n    };\n\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('civicLogo', civicLogo);\n\n  // @ngInject\n  function civicLogo() {\n    var directive = {\n      restrict: 'E',\n      templateUrl: 'components/directives/civicLogo.tpl.html',\n      controller: civicLogoController\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function civicLogoController($scope, $rootScope) {\n    $scope.navMode = $rootScope.navMode;\n    $scope.pageTitle = $rootScope.pageTitle;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('cancelButton', cancelButton);\n\n  // @ngInject\n  function cancelButton() {\n    return {\n      restrict: 'E',\n      scope: {},\n      templateUrl: 'components/directives/cancelButton.tpl.html',\n      controller: cancelButtonController\n    }\n  }\n\n  // @ngInject\n  function cancelButtonController($scope, $state, $previousState) {\n    $scope.cancel = function() {\n      $previousState.get() ? $previousState.go() : $state.go('browse');\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.security.login.toolbar', [])\n    .directive('loginToolbar', loginToolbar);\n\n  // @ngInject\n  function loginToolbar() {\n\n    var directive = {\n      templateUrl: 'components/directives/loginToolbar.tpl.html',\n      restrict: 'E',\n      replace: true,\n      scope: true,\n      controller: /* @ngInject */ function($scope, $rootScope, $location, Security, ConfigService) {\n        $scope.isAdmin= Security.isAdmin;\n        $scope.isAuthenticated = Security.isAuthenticated;\n        $scope.login = Security.showLogin;\n        $scope.logout = Security.logout;\n\n        $scope.adminUrl = ConfigService.serverUrl + 'admin';\n\n        // $scope.alert = alert('clicked');\n\n        $scope.$watch(function() {\n          return Security.currentUser;\n        }, function(currentUser) {\n          $scope.currentUser = currentUser;\n        });\n\n        $scope.status = {\n          isopen: false\n        };\n\n        $scope.toggleDropdown = function($event) {\n          $event.preventDefault();\n          $event.stopPropagation();\n          $scope.status.isopen = !$scope.status.isopen;\n        };\n\n        if(!$scope.currentUrl) { $scope.currentUrl = $location.url() }\n        $rootScope.$on('$stateChangeSuccess', function() {\n          $scope.currentUrl = $location.url();\n        });\n      }\n    };\n    return directive;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.common')\n    .directive('userImage', userImageDirective)\n    .controller('UserImageController', UserImageController);\n\n  // @ngInject\n  function userImageDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        height: '@',\n        width: '@',\n        user: '='\n      },\n      templateUrl: 'components/directives/userImage.tpl.html',\n      controller: 'UserImageController'\n    }\n  }\n\n  // @ngInject\n  function UserImageController($scope) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.height = $scope.height;\n    ctrl.width = $scope.width;\n    ctrl.user = $scope.user;\n\n    ctrl.hasAvatar = _.has(ctrl.user, 'avatar_url');\n    console.log('has email: ' + ctrl.hasEmail);\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.browse')\n    .config(BrowseViewConfig);\n\n  // @ngInject\n  function BrowseViewConfig($stateProvider) {\n    $stateProvider\n      .state('browse', {\n        url: '/browse',\n        controller: 'BrowseController',\n        templateUrl: 'app/views/browse/browse.tpl.html',\n        data: {\n          titleExp: '\"Browse CIViC\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.browse')\n    .controller('BrowseController', BrowseController);\n\n// @ngInject\n  function BrowseController($scope, uiGridConstants, $http, $state, Datatables, _, $log) {\n    var defaults = {\n      mode: 'variants',\n      count: 25\n    };\n\n    var ctrl = $scope.ctrl = {};\n    var maxRows = ctrl.maxRows = defaults.count;\n\n    // declare ui paging/sorting/filtering vars\n    ctrl.mode = '';\n    ctrl.totalItems = Number();\n    ctrl.page = 1;\n    ctrl.count= Number();\n\n    ctrl.filters = [];\n    ctrl.sorting = [];\n\n    ctrl.isFiltered = ctrl.filters.length > 0;\n\n    $scope.$watch('ctrl.totalItems', function() {\n      ctrl.totalPages = Math.ceil(ctrl.totalItems / defaults.count);\n    });\n\n    ctrl.gridOptions = {\n      enablePaginationControls: false,\n\n      useExternalFiltering: true,\n      useExternalSorting: true,\n\n      paginationPageSizes: [maxRows],\n      paginationPageSize: maxRows,\n      minRowsToShow: maxRows + 1,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.NEVER,\n\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      modifierKeysToMultiSelect: false,\n      noUnselect: true,\n      rowTemplate: 'app/views/browse/browseGridRow.tpl.html'\n    };\n\n    // set up column defs and data transforms for each mode\n    var modeColumnDefs = {\n      'variants': [\n        {\n          name: 'variant',\n          width: '30%',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'entrez_gene',\n          width: '15%',\n          sort: {direction: uiGridConstants.ASC},\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'diseases',\n          displayName: 'Diseases',\n          width: '45%',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/browse/browseGridTooltipCell.tpl.html'\n        },\n        {\n          name: 'evidence_item_count',\n          width: '10%',\n          displayName: 'Evidence',\n          enableFiltering: false,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        }\n      ],\n      'genes': [\n        {\n          name: 'name',\n          width: '15%',\n          sort: {direction: uiGridConstants.ASC},\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'gene_aliases',\n          width: '30%',\n          displayName: 'Gene Aliases',\n          enableFiltering: true,\n          allowCellFocus: false,\n          cellTemplate: 'app/views/browse/browseGridTooltipCell.tpl.html',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'diseases',\n          width: '30%',\n          displayName: 'Diseases',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/browse/browseGridTooltipCell.tpl.html'\n        },\n        {\n          name: 'variant_count',\n          displayName: 'Variants',\n          width: '10%',\n          enableFiltering: false,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'evidence_item_count',\n          width: '10%',\n          displayName: 'Evidence',\n          enableFiltering: false,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        }\n      ]\n    };\n\n    ctrl.gridOptions.onRegisterApi = function(gridApi) {\n      ctrl.gridApi = gridApi;\n\n      // called from pagination directive when page changes\n      ctrl.pageChanged = function() {\n        $log.info('page changed: ' + ctrl.page);\n        updateData();\n      };\n\n      // reset paging and do some other stuff on filter changes\n      gridApi.core.on.filterChanged($scope, function() {\n        $log.info('filter changed.');\n        // updateData with new filters\n        var filteredCols = _.filter(this.grid.columns, function(col) {\n          return _.has(col.filter, 'term') && !_.isEmpty(col.filter.term) && _.isString(col.filter.term);\n        });\n        if (filteredCols.length > 0) {\n          ctrl.filters = _.map(filteredCols, function(col) {\n            return {\n              'field': col.field,\n              'term': col.filter.term\n            };\n          });\n        } else {\n          ctrl.filters = [];\n        }\n        ctrl.page = 1;\n        updateData();\n      });\n\n      gridApi.core.on.sortChanged($scope, function(grid, sortColumns) {\n        $log.info('sort changed.');\n        if (sortColumns.length > 0) {\n          ctrl.sorting = _.map(sortColumns, function(col) {\n            return {\n              'field': col.field,\n              'direction': col.sort.direction\n            };\n          });\n        } else {\n          ctrl.sorting = [];\n        }\n        updateData();\n      });\n\n      // called when user clicks on a row\n      gridApi.selection.on.rowSelectionChanged($scope, function(row){\n        // $log.info(['geneID:', row.entity.id, 'variantId:', row.entity.variant_id].join(' '));\n        $log.info(['ctrl.mode:', ctrl.mode, 'geneId:', row.entity.gene_id, 'variantId:', row.entity.variant_id].join(' '));\n        if(ctrl.mode == 'variants') {\n          $state.go('events.genes.summary.variants.summary', {\n            geneId: row.entity.gene_id,\n            variantId: row.entity.variant_id\n          });\n        } else {\n          $state.go('events.genes.summary', {\n            geneId: row.entity.id\n          });\n        }\n      });\n    };\n\n    function updateData() {\n      fetchData(ctrl.mode, ctrl.count, ctrl.page, ctrl.sorting, ctrl.filters)\n        .then(function(data){\n          ctrl.gridOptions.data = data.result;\n          ctrl.gridOptions.columnDefs = modeColumnDefs[ctrl.mode];\n          ctrl.totalItems = data.total;\n        });\n    }\n\n    ctrl.switchMode = function(mode) {\n      ctrl.mode = mode;\n      ctrl.filters = [];\n      ctrl.sorting = [];\n      ctrl.page = 1;\n      updateData();\n    };\n\n    function fetchData(mode, count, page, sorting, filters) {\n      var request;\n\n      request= {\n        mode: mode,\n        count: count,\n        page: page\n      };\n\n      if (filters.length > 0) {\n        _.each(filters, function(filter) {\n          request['filter[' + filter.field + ']'] = filter.term;\n        });\n      }\n\n      if (sorting.length > 0) {\n        _.each(sorting, function(sort) {\n          request['sorting[' + sort.field + ']'] = sort.direction;\n        });\n      }\n      return Datatables.query(request);\n    }\n\n    ctrl.switchMode(defaults.mode);\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes', ['ui.router']);\n  angular.module('civic.events.variants', ['ui.router']);\n  angular.module('civic.events.variantGroups', ['ui.router']);\n  angular.module('civic.events.evidence', ['ui.router']);\n  angular.module('civic.events.common', []);\n  angular.module('civic.events')\n    .config(EventsViewConfig)\n    .controller('EventsViewController', EventsViewController);\n\n  // @ngInject\n  function EventsViewConfig($stateProvider) {\n    $stateProvider\n      .state('events', {\n        abstract: true,\n        url: '/events',\n        template: '<ui-view id=\"events-view\"></ui-view>',\n        controller: 'EventsViewController',\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      });\n\n  }\n\n  // @ngInject\n  function EventsViewController($log) {\n    //console.log('EventsViewController instantiated.');\n  }\n\n})();\n\n(function() {\n  angular.module('civic.events.common')\n    .controller('EntityViewController', EntityViewController)\n    .directive('entityView', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          viewModel: '=',\n          viewOptions: '='\n        },\n        transclude: true,\n        controller: 'EntityViewController',\n        templateUrl: 'app/views/events/common/entityView.tpl.html'\n      }\n    });\n\n  //@ngInject\n  function EntityViewController($scope) {\n    // entityViewModel and entityViewOptions are defined in [entity]ViewControllers, and passed to\n    // this directive in [entity]View templates. This controller can then be required by child common components\n    // to obtain references to view models and view options.\n    this.entityViewModel = $scope.viewModel;\n    this.entityViewOptions= $scope.viewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n\n  /**\n   * Permits declarative (and dynamic) definitions of tab links with full routes.\n   *\n   * requires 'ui.router' and 'ui.bootstrap'\n   * (uses tabset and tab directives in ui.bootstrap and route changes in ui.router)\n   *\n   * You can define (for styling) the attributes type=\"pills\" and vertical=\"true | false\" and justified=\"true | false\"\n   *\n   * Watches the $stateChangeXX events so it can update the parent tab(s) when using $state.go or ui-sref anchors.\n   *\n   * See ui-router-tabs.spec.js for tests.\n   *\n   * Author: Robert Pocklington (rpocklin@gmail.com)\n   * License: MIT\n   *\n   */\n\n  angular.module('civic.events.common')\n    .directive('entityTabs', entityTabsDirective)\n    .controller('EntityTabsController', EntityTabsController);\n\n// @ngInject\n  function entityTabsDirective() {\n    return /* @ngInject */ {\n      restrict: 'E',\n      scope: {\n        showCorner: '=',\n        justified: '=',\n        vertical: '='\n      },\n      require: '^^entityView',\n      link: entityTabsLink,\n      controller: 'EntityTabsController',\n      templateUrl: 'app/views/events/common/entityTabs.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function entityTabsLink(scope, element, attributes, entityView) {\n    var vm = scope.vm = {}; // todo convert the rest of this controller to vm\n    var entityViewModel = scope.entityViewModel = entityView.entityViewModel;\n    var entityViewOptions = scope.entityViewOptions = entityView.entityViewOptions;\n\n    vm.type = '';\n    vm.name = '';\n\n    vm.type = _.map(entityViewModel.data.item.type.replace('_', ' ').split(\" \"), function(word) {\n      return word.toUpperCase();\n    }).join(\" \");\n\n    scope.$watch('entityViewModel.data.item.name', function(name) {\n      vm.name = name;\n    });\n\n    // scope.showCorner = (vm.type === 'variant' || vm.type === 'variant_group');\n    scope.viewBackground = 'view-' + entityViewOptions.styles.view.backgroundColor;\n    scope.tabs = entityViewOptions.tabData;\n\n    if (!scope.tabs) {\n      throw new Error('entityTabs: \\'data\\' attribute not defined, please check documentation for how to use this directive.');\n    }\n\n    if (!angular.isArray(scope.tabs)) {\n      throw new Error('entityTabs: \\'data\\' attribute must be an array of tab data with at least one tab defined.');\n    }\n\n    var unbindStateChangeSuccess = scope.$on(\n      '$stateChangeSuccess',\n      function () {\n        scope.update_tabs();\n      }\n    );\n    scope.$on('$destroy', unbindStateChangeSuccess);\n  }\n\n// @ngInject\n  function EntityTabsController($scope, $state) {\n    // TODO not sure why this watch is necessary for tabs to be properly set to active on 1st load\n    var unwatch = $scope.$watchCollection('entityViewModel', function(vm) {\n      var currentStateEqualTo = function (tab) {\n        var isEqual = $state.is(tab.route, tab.params, tab.options);\n        return isEqual;\n      };\n\n      $scope.go = function (tab) {\n\n        if (!currentStateEqualTo(tab) && !tab.disabled) {\n          var promise = $state.go(tab.route, tab.params, tab.options);\n\n          /* until the $stateChangeCancel event is released in ui-router, will use this to update\n           tabs if the $stateChangeEvent is cancelled before it finishes loading the state, see\n           https://github.com/rpocklin/ui-router-tabs/issues/19 and\n           https://github.com/angular-ui/ui-router/pull/1090 for further information and\n           https://github.com/angular-ui/ui-router/pull/1844\n\n           $stateChangeCancel is better since it will handle ui-sref and external $state.go(..) calls */\n          promise.catch(function () {\n            $scope.update_tabs();\n          });\n        }\n      };\n\n      /* whether to highlight given route as part of the current state */\n      $scope.active = function (tab) {\n        var route = tab.route;\n        // TODO: this is a kludge to fix misbehaving sub-tabs that we have in talk views, almost certainly not the most elegant solution.\n        if (_.contains(tab.route, 'talk')) {\n          // drop the last route element so all talk ancestor $state.includes() evaluates to true\n          route = _.chain(tab.route.split('.')).dropRight().value().join('.');\n        }\n        var isAncestorOfCurrentRoute = $state.includes(route, tab.params, tab.options);\n        return isAncestorOfCurrentRoute;\n      };\n\n      $scope.update_tabs = function () {\n\n        // sets which tab is active (used for highlighting)\n        angular.forEach($scope.tabs, function (tab) {\n          tab.params = tab.params || {};\n          tab.options = tab.options || {};\n          tab.active = $scope.active(tab);\n        });\n      };\n\n      // this always selects the first tab currently - fixed in ui-bootstrap master but not yet released\n      // see https://github.com/angular-ui/bootstrap/commit/91b5fb62eedbb600d6a6abe32376846f327a903d\n      $scope.update_tabs();\n      unwatch();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .controller('EditableFieldController', EditableFieldController)\n    .directive('editableField', editableField);\n\n  // @ngInject\n  function editableField() {\n\n    return {\n      restrict: 'A',\n      transclude: true,\n      scope: {\n        entityViewModel: '=',\n        entityViewOptions: '='\n      },\n      controller: 'EditableFieldController',\n      link: editableFieldLink,\n      templateUrl: 'app/views/events/common/editableField.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function editableFieldLink(scope, element, attrs) {\n//    console.log('editableFieldLink fn called.');\n  }\n\n  // @ngInject\n  function EditableFieldController($scope, $state) {\n    var ctrl = $scope.ctrl = {};\n    ctrl.baseState = '';\n    ctrl.stateParams = {};\n\n    ctrl.baseState  = $scope.entityViewOptions.state.baseState;\n    ctrl.gstateParams = $scope.entityViewOptions.state.params;\n    ctrl.entityViewModel = $scope.entityViewModel;\n\n    ctrl.active = $state.includes(ctrl.baseState + '.edit.*');\n    $scope.$on('$stateChangeSuccess', function() {\n      ctrl.active = $state.includes(ctrl.baseState + '.edit.*');\n    });\n\n    ctrl.mouseOver = function() {\n      ctrl.hover = true;\n    };\n\n    ctrl.mouseLeave = function() {\n      ctrl.hover = false;\n    };\n\n    ctrl.click = function() {\n      $state.go(ctrl.baseState + '.edit.basic', ctrl.stateParams);\n    }\n\n  }\n\n\n})();\n\n(function() {\n  angular.module('civic.events.common')\n    .controller('EntityTalkViewController', EntityTalkViewController)\n    .directive('entityTalkView', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          viewModel: '=',\n          revisionsModel: '=',\n          viewOptions: '='\n        },\n        transclude: true,\n        controller: 'EntityTalkViewController',\n        templateUrl: 'app/views/events/common/entityTalkView.tpl.html'\n      }\n    });\n\n  //@ngInject\n  function EntityTalkViewController($scope) {\n    // entityViewModel and entityViewOptions are defined in [entity]ViewControllers, and passed to\n    // this directive in [entity]View templates. This controller can then be required by child common components\n    // to obtain references to view models and view options.\n    this.viewModel = $scope.viewModel;\n    this.revisionsModel = $scope.revisionsModel;\n    this.viewOptions = $scope.viewOptions;\n  }\n})();\n\n(function() {\n  'use strict';\n\n\n  /**\n   * Permits declarative (and dynamic) definitions of tab links with full routes.\n   *\n   * requires 'ui.router' and 'ui.bootstrap'\n   * (uses tabset and tab directives in ui.bootstrap and route changes in ui.router)\n   *\n   * You can define (for styling) the attributes type=\"pills\" and vertical=\"true | false\" and justified=\"true | false\"\n   *\n   * Watches the $stateChangeXX events so it can update the parent tab(s) when using $state.go or ui-sref anchors.\n   *\n   * See ui-router-tabs.spec.js for tests.\n   *\n   * Author: Robert Pocklington (rpocklin@gmail.com)\n   * License: MIT\n   *\n   */\n\n  angular.module('civic.events.common')\n    .directive('entityTalkTabs', entityTalkTabsDirective)\n    .controller('EntityTalkTabsController', EntityTalkTabsController);\n\n// @ngInject\n  function entityTalkTabsDirective() {\n    return /* @ngInject */ {\n      restrict: 'E',\n      scope: {\n        justified: '=',\n        vertical: '='\n      },\n      require: '^^entityTalkView',\n      link: entityTalkTabsLink,\n      controller: 'EntityTalkTabsController',\n      templateUrl: 'app/views/events/common/entityTalkTabs.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function entityTalkTabsLink(scope, element, attributes, entityTalkView) {\n    var viewModel = scope.viewModel = entityTalkView.viewModel;\n    var viewOptions = scope.viewOptions = entityTalkView.viewOptions;\n\n    scope.type = viewModel.data.item.type;\n    scope.name = viewModel.data.item.name;\n    scope.showCorner = (scope.type === 'variant' || scope.type === 'variant group');\n    scope.tabRowBackground = viewOptions.styles.tabs.tabRowBackground;\n    scope.viewBackground = 'view-' + viewOptions.styles.view.backgroundColor;\n    scope.tabs = viewOptions.tabData;\n\n    if (!scope.tabs) {\n      throw new Error('entityTalkTabs: \\'data\\' attribute not defined, please check documentation for how to use this directive.');\n    }\n\n    if (!angular.isArray(scope.tabs)) {\n      throw new Error('entityTalkTabs: \\'data\\' attribute must be an array of tab data with at least one tab defined.');\n    }\n\n    var unbindStateChangeSuccess = scope.$on(\n      '$stateChangeSuccess',\n      function () {\n        scope.update_tabs();\n      }\n    );\n    scope.$on('$destroy', unbindStateChangeSuccess);\n  }\n\n// @ngInject\n  function EntityTalkTabsController($scope, $state) {\n    var unwatch = $scope.$watchCollection('viewModel', function(vm) {\n      var currentStateEqualTo = function (tab) {\n\n        var isEqual = $state.is(tab.route, tab.params, tab.options);\n        return isEqual;\n      };\n\n      $scope.go = function (tab) {\n\n        if (!currentStateEqualTo(tab) && !tab.disabled) {\n          var promise = $state.go(tab.route, tab.params, tab.options);\n\n          /* until the $stateChangeCancel event is released in ui-router, will use this to update\n           tabs if the $stateChangeEvent is cancelled before it finishes loading the state, see\n           https://github.com/rpocklin/ui-router-tabs/issues/19 and\n           https://github.com/angular-ui/ui-router/pull/1090 for further information and\n           https://github.com/angular-ui/ui-router/pull/1844\n\n           $stateChangeCancel is better since it will handle ui-sref and external $state.go(..) calls */\n          promise.catch(function () {\n            $scope.update_tabs();\n          });\n        }\n      };\n\n      /* whether to highlight given route as part of the current state */\n      $scope.active = function (tab) {\n        //var route = tab.route;\n        //// TODO: this is a kludge to fix misbehaving sub-tabs that we have in talk views, almost certainly not the most elegant solution.\n        //if (_.contains(tab.route, 'talk')) {\n        //  // drop the last route element so all talk ancestor $state.includes() evaluates to true\n        //  route = _.chain(tab.route.split('.')).dropRight().value().join('.');\n        //}\n        //var isAncestorOfCurrentRoute = $state.includes(route, tab.params, tab.options);\n        //return isAncestorOfCurrentRoute;\n        var isAncestorOfCurrentRoute = $state.includes(tab.route, tab.params, tab.options);\n        return isAncestorOfCurrentRoute;\n      };\n\n      $scope.update_tabs = function () {\n\n        // sets which tab is active (used for highlighting)\n        angular.forEach($scope.tabs, function (tab) {\n          tab.params = tab.params || {};\n          tab.options = tab.options || {};\n          tab.active = $scope.active(tab);\n        });\n      };\n\n      // this always selects the first tab currently - fixed in ui-bootstrap master but not yet released\n      // see https://github.com/angular-ui/bootstrap/commit/91b5fb62eedbb600d6a6abe32376846f327a903d\n      $scope.update_tabs();\n      unwatch();\n    });\n  }\n})();\n\n(function() {\n  angular.module('civic.events.common')\n    .directive('entityLogEntry', entityLogEntryDirective)\n    .controller('EntityLogEntryController', EntityLogEntryController);\n\n  // @ngInject\n  function entityLogEntryDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        entryData: '='\n      },\n      controller: 'EntityLogEntryController',\n      link: entityLogEntryLink,\n      templateUrl: 'app/views/events/common/entityLogEntry.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function entityLogEntryLink(scope, element, attributes) {\n\n  }\n\n  // @ngInject\n  function EntityLogEntryController($scope) {\n    var ctrl = $scope.ctrl = {};\n    ctrl.entry = $scope.entryData;\n    ctrl.user = ctrl.entry.user;\n\n    if (typeof ctrl.user === 'string') {\n      ctrl.username = ctrl.user;\n    } else {\n      ctrl.username = ctrl.user.username;\n    }\n  }\n})();\n\n(function() {\n  angular.module('civic.events.common')\n    .controller('EntityTalkRevisionsViewController', EntityTalkRevisionsViewController)\n    .directive('entityTalkRevisionsView', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          viewModel: '=',\n          viewOptions: '='\n        },\n        transclude: true,\n        controller: 'EntityTalkRevisionsViewController',\n        templateUrl: 'app/views/events/common/entityTalkRevisionsView.tpl.html'\n      }\n    });\n\n  //@ngInject\n  function EntityTalkRevisionsViewController($scope) {\n    // entityTalkRevisionsViewModel and entityTalkRevisionsViewOptions are defined in [entity]ViewControllers, and passed to\n    // this directive in [entity]View templates. This controller can then be required by child common components\n    // to obtain references to view models and view options.\n    this.entityTalkRevisionsViewModel = $scope.viewModel;\n    this.entityTalkRevisionsViewOptions= $scope.viewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events')\n    .directive('revisionsGrid', revisionsGrid)\n    .controller('RevisionsGridController', RevisionsGridController);\n\n  // @ngInject\n  function revisionsGrid() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        changes: '=',\n        baseState: '@'\n      },\n      templateUrl: 'app/views/events/common/revisionsGrid.tpl.html',\n      controller: 'RevisionsGridController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function RevisionsGridController($scope, $state, $stateParams, $location, uiGridConstants, _) {\n    /*jshint camelcase: false */\n    var ctrl = $scope.ctrl = {};\n    $scope.$state = $state;\n    $scope.$stateParams = $stateParams;\n\n    ctrl.revisionsGridOptions = {\n      enablePaginationControls: true,\n      paginationPageSizes: [5],\n      paginationPageSize: 5,\n      minRowsToShow: 6,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      modifierKeysToMultiSelect: false,\n      noUnselect: true,\n      columnDefs: [\n        { name: 'id',\n          displayName: 'ID',\n          enableFiltering: false,\n          allowCellFocus: false,\n          width: '5%'\n        },\n        { name: 'user.username',\n          displayName: 'Submitted by',\n          enableFiltering: true,\n          allowCellFocus: false,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        { name: 'status',\n          displayName: 'Status',\n          allowCellFocus: false,\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        { name: 'created_at',\n          displayName: 'Created',\n          allowCellFocus: false,\n          enableFiltering: true,\n          sort: { direction: uiGridConstants.DESC },\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/common/revisionsGridCreatedCell.tpl.html'\n        }\n      ]\n    };\n\n    // wait until grid instantiated, then assign data and row-click listener\n    ctrl.revisionsGridOptions.onRegisterApi = function(gridApi){\n      ctrl.gridApi = gridApi;\n      ctrl.revisionsGridOptions.data = $scope.changes;\n\n      $scope.$watchCollection('changes', function(changes) {\n        ctrl.revisionsGridOptions.data = $scope.changes;\n      });\n\n      gridApi.selection.on.rowSelectionChanged($scope, function(row){\n        var params = _.merge($scope.$stateParams, { revisionId: row.entity.id });\n        var newState = $scope.baseState + '.list.summary';\n        $scope.$state.go(newState, params);\n      });\n    };\n  }\n\n})();\n\n(function() {\n  angular.module('civic.events.common')\n   .directive('entityComment', entityCommentDirective)\n    .controller('EntityCommentController', EntityCommentController);\n\n  // @ngInject\n  function entityCommentDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        commentData: '='\n      },\n      controller: 'EntityCommentController',\n      templateUrl: 'app/views/events/common/entityComment.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function EntityCommentController($scope, Security) {\n    var ctrl = $scope.ctrl = {};\n    ctrl.security = {\n      isAuthenticated: Security.isAuthenticated(),\n      isAdmin: Security.isAdmin()\n    };\n\n    ctrl.comment = $scope.commentData;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.common')\n    .directive('entityCommentForm', entityCommenntFormDirective)\n    .controller('EntityCommentFormController', EntityCommentFormController);\n\n  // @ngInject\n  function entityCommenntFormDirective() {\n    return {\n      restrict: 'E',\n      scope: {\n        type: '@',\n        entityModel: '='\n      },\n      controller: 'EntityCommentFormController',\n      templateUrl: 'app/views/events/common/entityCommentForm.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function EntityCommentFormController($scope, $stateParams, Security) {\n    var vm = $scope.vm = {};\n    vm.isAuthenticated = Security.isAuthenticated();\n    vm.currentUser = Security.currentUser;\n    vm.isAdmin = Security.isAdmin();\n\n    vm.newComment = {\n      title: '',\n      text: ''\n    };\n\n    vm.newCommentFields = [\n      //{\n      //  key: 'title',\n      //  type: 'input',\n      //  templateOptions: {\n      //    label: 'Title',\n      //    value: vm.newComment.title\n      //  }\n      //},\n      {\n        key: 'text',\n        type: 'textarea',\n        templateOptions: {\n          label: 'Comment',\n          rows: 5,\n          value: vm.newComment.text\n        }\n      }\n    ];\n\n    vm.submit = function(comment, resetModel) {\n      comment = _.merge(comment, $stateParams);\n      $scope.entityModel.submitComment(comment).then(function () {\n        console.log('comment submitted.');\n        resetModel();\n      });\n    };\n\n\n  }\n})();\n\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .config(GenesConfig)\n    .factory('GenesViewOptions', GenesViewOptions)\n    .controller('GenesController', GenesController);\n\n  // @ngInject\n  function GenesConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes', {\n        abstract: true,\n        url: '/genes/:geneId',\n        templateUrl: 'app/views/events/genes/GenesView.tpl.html',\n        resolve: /* @ngInject */ {\n          Genes: 'Genes',\n          initGene: function(Genes, $stateParams) {\n            return Genes.initBase($stateParams.geneId);\n          }\n        },\n        controller: 'GenesController',\n        controllerAs: 'vm',\n        deepStateRedirect: [ 'geneId' ],\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      })\n      .state('events.genes.summary', {\n        url: '/summary',\n        template: '<gene-summary show-menu=\"true\"></gene-summary>',\n        resolve: {\n          Genes: 'Genes',\n          refreshGene: function(Genes, $stateParams) {\n            return Genes.get($stateParams.geneId);\n          }\n        },\n        deepStateRedirect: [ 'geneId' ],\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function GenesViewOptions($state, $stateParams, Genes) {\n    var tabData = [];\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'events.genes';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: 'Gene Summary',\n          route: 'events.genes.summary',\n          params: { geneId: Genes.data.item.id }\n        },\n        {\n          heading: 'Gene Talk',\n          route: 'events.genes.talk.log',\n          params: { geneId: Genes.data.item.id }\n        }\n      ], this.tabData);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground2'\n        },\n        summary: {\n          backgroundColor: 'pageBackground2'\n        },\n        myGeneInfo: {\n          backgroundColor: 'pageBackground2'\n        },\n        variantMenu: {\n          backgroundColor: 'pageBackground2'\n        },\n        edit: {\n          summaryBackgroundColor: 'pageBackground2'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function GenesController(Genes, GenesViewOptions) {\n    GenesViewOptions.init();\n    // these will be passed to the entity-view directive controller, to be required by child entity component so that they\n    // can get references to the view model and view options\n    this.GenesViewModel = Genes;\n    this.GenesViewOptions = GenesViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneSummaryController', GeneSummaryController)\n    .directive('geneSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          showMenu: '='\n        },\n        controller: 'GeneSummaryController',\n        templateUrl: 'app/views/events/genes/summary/geneSummary.tpl.html'\n      }\n    });\n\n  function GeneSummaryController($scope, Genes, GenesViewOptions) {\n    $scope.gene = Genes.data.item;\n    $scope.variantGroups = Genes.data.variantGroups;\n    $scope.variants = Genes.data.variants;\n    $scope.myGeneInfo = Genes.data.myGeneInfo;\n    $scope.GenesViewOptions = GenesViewOptions;\n    $scope.backgroundColor = GenesViewOptions.styles.view.backgroundColor;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneDescriptionController', GeneDescriptionController)\n    .directive('geneDescription', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          geneData: '='\n        },\n        controller: 'GeneDescriptionController',\n        link: geneDescriptionLink,\n        templateUrl: 'app/views/events/genes/summary/geneDescription.tpl.html'\n      }\n    });\n\n  // @ngInject\n  function geneDescriptionLink(scope, element, attrs) {\n\n  }\n\n  // @ngInject\n  function GeneDescriptionController($scope) {\n\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('MyGeneInfoController', MyGeneInfoController)\n    .controller('MyGeneInfoDialogController', MyGeneInfoDialogController)\n    .directive('myGeneInfo', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          geneInfo: '='\n        },\n        controller: 'MyGeneInfoController',\n        templateUrl: 'app/views/events/genes/summary/myGeneInfo.tpl.html'\n      }\n    });\n\n  // @ngInject\n  function MyGeneInfoController($scope, ngDialog, _) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.popupOptions = {\n      template: 'app/views/events/genes/summary/myGeneInfoDialog.tpl.html',\n      controller: 'MyGeneInfoDialogController',\n      scope: $scope\n    };\n\n    ctrl.openDialog = function() {\n      if(_.has(ctrl.dialog, 'id')) {\n        ctrl.closeDialog().then(function(dlg) {\n          ctrl.dialog = ngDialog.open(ctrl.popupOptions);\n        });\n      } else {\n        ctrl.dialog = ngDialog.open(ctrl.popupOptions);\n      }\n      return ctrl.dialog;\n    };\n\n    ctrl.closeDialog = function() {\n      ctrl.dialog.close();\n      return ctrl.dialog.closePromise.then(function() { _.omit(ctrl, 'dialog'); } );\n    };\n  }\n\n  // @ngInject\n  function MyGeneInfoDialogController($scope, uiGridConstants) {\n    // MyGeneInfoController's $scope is attached to dialog parent, as specified in popupOptions.scope\n    var ctrl = $scope.$parent.ctrl;\n\n    var gridOptions = ctrl.gridOptions = {};\n\n    gridOptions.proteinDomains = {\n      data: $scope.geneInfo.interpro,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      minRowsToShow: 7,\n      columnDefs: [\n        { name: 'desc',\n          displayName: 'Protein Domains',\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          width: '50%'\n        },\n        { name: 'id',\n          displayName: 'ID',\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          width: '15%'\n        },\n        { name: 'short_desc',\n          displayName: 'Identifier',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          enableFiltering: true\n        }\n      ]\n    };\n\n    gridOptions.pathways = {\n      data: $scope.geneInfo.pathway,\n      enableFiltering: true,\n      enableColumnxsMenus: false,\n      enableSorting: true,\n      minRowsToShow: 7,\n      filter: {\n        condition: uiGridConstants.filter.CONTAINS\n      },\n      columnDefs: [\n        { name: 'name',\n          displayName: 'Pathways',\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          width: '50%'\n        },\n        { name: 'src',\n          displayName: 'Source',\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          width: '15%'\n        },\n        { name: 'link',\n          displayName: 'Link',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          enableFiltering: true\n        }\n      ]\n    };\n\n\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('VariantMenuController', VariantMenuController)\n    .directive('variantMenu', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          options: '='\n        },\n        controller: 'VariantMenuController',\n        templateUrl: 'app/views/events/genes/summary/variantMenu.tpl.html'\n      }\n    });\n\n  //@ngInject\n  function VariantMenuController($scope, Genes) {\n    $scope.gene = Genes.data.item;\n    $scope.variants = Genes.data.variants;\n    $scope.variantGroups = Genes.data.variantGroups;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .config(geneEditConfig)\n    .factory('GeneEditViewOptions', GeneEditViewOptions)\n    .controller('GeneEditController', GeneEditController);\n\n  // @ngInject\n  function geneEditConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.edit', {\n        abstract: true,\n        url: '/edit',\n        templateUrl: 'app/views/events/genes/edit/GeneEditView.tpl.html',\n        controller: 'GeneEditController',\n        controllerAs: 'vm',\n        resolve: {\n          GeneRevisions: 'GeneRevisions',\n          initGeneEdit: function(Genes, GeneRevisions, GeneHistory, $stateParams, $q) {\n            var geneId = $stateParams.geneId;\n            return $q.all([\n              GeneRevisions.initRevisions(geneId),\n              GeneHistory.initBase(geneId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'geneId' ],\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.edit.basic', {\n        url: '/basic',\n        template: '<gene-edit-basic></gene-edit-basic>',\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function GeneEditViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.edit';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground2',\n          editBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function GeneEditController(Genes, GeneRevisions, GeneEditViewOptions) {\n    console.log('GeneEditController called.');\n    GeneEditViewOptions.init();\n    this.GeneEditViewModel = Genes; // we're re-using the Genes model here but could in the future have a GeneEdit model if warranted\n    this.GeneRevisionsModel = GeneRevisions;\n    this.GeneEditViewOptions = GeneEditViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .directive('geneEditBasic', geneEditBasicDirective)\n    .controller('GeneEditBasicController', GeneEditBasicController);\n\n  // @ngInject\n  function geneEditBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'GeneEditBasicController',\n      templateUrl: 'app/views/events/genes/edit/geneEditBasic.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function GeneEditBasicController($scope,\n                                   Security,\n                                   GeneRevisions,\n                                   Genes,\n                                   GeneHistory,\n                                   GenesViewOptions,\n                                   formConfig) {\n    var geneModel, vm;\n\n    vm = $scope.vm = {};\n    geneModel = vm.geneModel = Genes;\n\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.gene = Genes.data.item;\n    vm.geneRevisions = GeneRevisions;\n    vm.geneHistory = GeneHistory;\n    vm.geneEdit = angular.copy(vm.gene);\n    vm.geneEdit.comment = { title: 'GENE ' + vm.gene.name + ' Revision Description', text:'' };\n    vm.myGeneInfo = geneModel.data.myGeneInfo;\n    vm.variants = geneModel.data.variants;\n    vm.variantGroups = geneModel.data.variantGroups;\n\n    vm.styles = GenesViewOptions.styles;\n\n    vm.user = {};\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n    vm.newRevisionId = Number();\n\n    vm.geneFields = [\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          disabled: true,\n          value: vm.gene.name,\n          helpText: ''\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 8,\n          label: 'Description',\n          value: 'vm.gene.description',\n          focus: true,\n          minLength: 32,\n          helpText: ['<p>User-defined summary of the clinical relevance of this Gene.</p>',\n                  '<p>Should include:</p>',\n                  '<ul>',\n                  '<li>relevance to appropriate cancer(s)</li>',\n                  '<li>treatment(s) related specifically to variants affecting this Gene</li>',\n                  '</ul>',\n                  '<p>May include relevant mechanistic information such as:</p>',\n                  '<ul>',\n                  '<li>pathway interactions</li>',\n                  '<li>functional alterations caused by variants in with this Gene (i.e., activating, loss-of-function, etc)</li>',\n                  '<li>normal functions key to its oncogenic properties.</li>',\n                  '</ul>'\n                ].join(\" \")\n        }\n      },\n      {\n        template: '<hr/>'\n      },\n      //{\n      //  model: vm.geneEdit.comment,\n      //  key: 'title',\n      //  type: 'horizontalInputHelp',\n      //  templateOptions: {\n      //    label: 'Comment Title',\n      //    value: 'title',\n      //    helpText: 'Short title describing the changes you made to the Clinical Description.'\n      //  }\n      //},\n      {\n        model: vm.geneEdit.comment,\n        key: 'text',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 5,\n          label: 'Revision Description',\n          value: 'text',\n          helpText: 'Please provide a brief description and support, if necessary, for your suggested revision. It will appear as the first comment in this revision\\'s comment thread.'\n        }\n      }\n    ];\n\n    vm.submit = function(geneEdit, options) {\n      geneEdit.geneId = geneEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      GeneRevisions.submitRevision(geneEdit)\n        .then(function(response) {\n          console.log('revision submit success!');\n          vm.newRevisionId = response.id;\n          vm.formMessages['submitSuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(error) {\n          console.error('revision submit error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function(){\n          console.log('revision submit done!');\n        });\n    };\n\n    vm.apply = function(geneEdit, options) {\n      geneEdit.geneId = geneEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      Genes.apply(geneEdit)\n        .then(function(response) {\n          console.log('revision appy success!');\n          vm.formMessages['applySuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(response) {\n          console.error('revision application error!');\n          vm.formErrors[response.status] = true;\n        })\n        .finally(function(){\n          console.log('revision apply done!');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .config(geneTalkConfig)\n    .factory('GenesTalkViewOptions', GenesTalkViewOptions)\n    .controller('GeneTalkController', GeneTalkController);\n\n  // @ngInject\n  function geneTalkConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.talk', {\n        abstract: true,\n        url: '/talk',\n        templateUrl: 'app/views/events/genes/talk/GeneTalkView.tpl.html',\n        controller: 'GeneTalkController',\n        controllerAs: 'vm',\n        resolve: {\n          GeneRevisions: 'GeneRevisions',\n          GeneHistory: 'GeneHistory',\n          initGeneTalk: function(Genes, GeneRevisions, GeneHistory, $stateParams, $cacheFactory, $q) {\n            var geneId = $stateParams.geneId;\n            return $q.all([\n              Genes.initComments(geneId),\n              GeneRevisions.initRevisions(geneId),\n              GeneHistory.initBase(geneId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'geneId' ],\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.talk.log', {\n        url: '/log',\n        template: '<gene-talk-log></gene-talk-log>',\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Log\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.talk.comments', {\n        url: '/comments',\n        template: '<gene-talk-comments></gene-talk-comments>',\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Comments\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function GenesTalkViewOptions($state, $stateParams, Genes) {\n    var baseUrl = '';\n    var baseState = '';\n    var tabData = [];\n    var styles = {};\n\n    var gene = Genes.data.item;\n\n    function init() {\n      baseState = 'events.genes.talk';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy([\n        {\n          heading: gene.name + ' Log',\n          route: baseState + '.log',\n          params: { geneId: gene.id }\n        },\n        {\n          heading: gene.name  + ' Comments',\n          route: baseState + '.comments',\n          params: { geneId: gene.id }\n        },\n        {\n          heading: gene.name + ' Revisions',\n          route: baseState + '.revisions.list',\n          params: { geneId: gene.id }\n        }\n      ], tabData);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function GeneTalkController(Genes, GeneRevisions, GenesTalkViewOptions) {\n    console.log('GenesTalkController called.');\n    GenesTalkViewOptions.init();\n    this.GenesTalkViewModel = Genes; // we're re-using the Genes model here but could in the future have a GenesTalk model if warranted\n    this.GeneRevisionsModel = GeneRevisions;\n    this.GenesTalkViewOptions = GenesTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneTalkLogController', GeneTalkLogController)\n    .directive('geneTalkLog', geneTalkLogDirective);\n\n  // @ngInject\n  function geneTalkLogDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      link: geneTalkLogLink,\n      controller: 'GeneTalkLogController',\n      templateUrl: 'app/views/events/genes/talk/geneTalkLog.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function geneTalkLogLink(scope, element, attrs) {\n\n  }\n\n  // @ngInject\n  function GeneTalkLogController($scope, _,\n                                 Genes,\n                                 GeneRevisions,\n                                 GeneHistory) {\n    var ctrl = $scope.ctrl = {}; // create ctrl here, link function will attach entityTalkView after DOM rendered.\n    var comments, revisions, history;\n    $scope.comments = Genes.data.comments;\n    $scope.revisions = GeneRevisions.data.collection;\n    $scope.history = GeneHistory.data.collection;\n    $scope.$watchCollection('[comments, revisions, history]', function(collections) {\n      comments = _.merge({}, collections[0]);\n      revisions = _.merge({}, collections[1]);\n      history = _.merge({}, collections[2]);\n\n      comments = _.map(comments, function(comment) {\n        comment.type = 'comment';\n        return comment;\n      });\n\n      revisions = _.map(revisions, function(revision) {\n        revision.type = 'revision';\n        return revision;\n      });\n\n      history = _.map(history, function(change) {\n        change.type='history'\n        return change;\n      });\n\n\n      // concatenate event arrays, sort by date descending\n      ctrl.logItems = comments.concat(revisions, history);\n      ctrl.logItems = _.chain(ctrl.logItems)\n        .map(function(item) {\n          // revisions can have an .user attribute that's just a string\n          item.username = typeof item.user === 'object' ? item.user.username : item.user;\n          // some items have both created_at and updated_at, we'll favor updated_at\n          item.timestamp = _.has(item, 'updated_at') ? item.updated_at : item.created_at;\n          return item;\n        })\n        .sortBy(function(item) {\n          return new Date(item.timestamp);\n        })\n        .reverse()\n        .value();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneTalkCommentsController', GeneTalkCommentsController)\n    .directive('geneTalkComments', geneTalkCommentsDirective);\n\n  // @ngInject\n  function geneTalkCommentsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'GeneTalkCommentsController',\n      templateUrl: 'app/views/events/genes/talk/geneTalkComments.tpl.html'\n    }\n  }\n\n\n  // @ngInject\n  function GeneTalkCommentsController($scope, Genes) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.geneTalkModel = Genes;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .config(geneTalkRevisionsConfig)\n    .factory('GeneTalkRevisionsViewOptions', GeneTalkRevisionsViewOptions)\n    .controller('GeneTalkRevisionsController', GeneTalkRevisionsController);\n\n  // @ngInject\n  function geneTalkRevisionsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.talk.revisions', {\n        abstract: true,\n        url: '/revisions',\n        templateUrl: 'app/views/events/genes/talk/revisions/GeneTalkRevisionsView.tpl.html',\n        controller: 'GeneTalkRevisionsController',\n        controllerAs: 'vm',\n        resolve: {\n          GeneRevisions: 'GeneRevisions',\n          GeneHistory: 'GeneHistory',\n          initGeneTalkRevisions: function(Genes, GeneRevisions, GeneHistory, $stateParams, $q) {\n            var geneId = $stateParams.geneId;\n            return $q.all([\n              GeneRevisions.initRevisions(geneId),\n              GeneHistory.initBase(geneId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'geneId', 'revisionId' ],\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.talk.revisions.list', {\n        url: '/list/:revisionId',\n        template: '<gene-talk-revisions></gene-talk-revisions>',\n        resolve: {\n          initRevisionList: function(Genes, GeneRevisions, GeneHistory, $stateParams) {\n            return GeneRevisions.query($stateParams.geneId);\n          }\n        },\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Revisions\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.talk.revisions.list.summary', {\n        url: '/summary',\n        template: '<gene-talk-revision-summary></gene-talk-revision-summary>',\n        resolve: {\n          initRevision: function(GeneRevisions, $stateParams, $q) {\n            return $q.all([\n              GeneRevisions.get($stateParams.geneId, $stateParams.revisionId),\n              GeneRevisions.queryComments($stateParams.geneId, $stateParams.revisionId)\n            ]);\n          }\n        },\n        data: {\n          titleExp: '\"Gene \" + gene.name + \" Revision Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function GeneTalkRevisionsViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.talk.revisions';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function GeneTalkRevisionsController(Genes, GeneRevisions, GeneTalkRevisionsRevisionsViewOptions) {\n    console.log('GeneTalkRevisionsRevisionsController called.');\n    GeneTalkRevisionsRevisionsViewOptions.init();\n    this.GeneRevisionsModel = GeneRevisions;\n    this.GeneTalkRevisionsViewOptions = GeneTalkRevisionsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .controller('GeneTalkRevisionsController', GeneTalkRevisionsController)\n    .directive('geneTalkRevisions', geneTalkRevisionsDirective);\n\n  // @ngInject\n  function geneTalkRevisionsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'GeneTalkRevisionsController',\n      templateUrl: 'app/views/events/genes/talk/revisions/geneTalkRevisions.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function GeneTalkRevisionsController($scope, GeneRevisions, GenesTalkViewOptions) {\n    $scope.geneRevisions = GeneRevisions;\n    $scope.viewOptions = GenesTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.genes')\n    .directive('geneTalkRevisionSummary', geneTalkRevisionSummary)\n    .controller('GeneTalkRevisionSummaryController', GeneTalkRevisionSummaryController);\n\n  // @ngInject\n  function geneTalkRevisionSummary() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/views/events/genes/talk/revisions/geneTalkRevisionSummary.tpl.html',\n      controller: 'GeneTalkRevisionSummaryController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function GeneTalkRevisionSummaryController($scope, $stateParams, GeneRevisions, Security, formConfig) {\n    var vm = $scope.vm = {};\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n    vm.geneTalkModel = GeneRevisions;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    $scope.acceptRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      GeneRevisions.acceptRevision($stateParams.geneId, $stateParams.revisionId)\n        .then(function(response) {\n          vm.formMessages['acceptSuccess'] = true;\n        })\n        .catch(function(error) {\n          console.error('revision accept error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function () {\n          console.log('accept revision successful.');\n        });\n    };\n\n    $scope.rejectRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      GeneRevisions.rejectRevision($stateParams.geneId, $stateParams.revisionId)\n        .then(function(response) {\n          vm.formMessages['rejectSuccess'] = true;\n        })\n        .catch(function(error) {\n          console.error('revision reject error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function () {\n          console.log('reject revision successful.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .config(VariantsConfig)\n    .factory('VariantsViewOptions', VariantsViewOptions)\n    .controller('VariantsController', VariantsController);\n\n  // @ngInject\n  function VariantsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants', {\n        abstract: true,\n        url: '/variants/:variantId',\n        templateUrl: 'app/views/events/variants/VariantsView.tpl.html',\n        resolve: /* @ngInject */ {\n          Variants: 'Variants',\n          initVariant: function(Variants, $stateParams) {\n            return Variants.initBase($stateParams.variantId);\n          }\n\n        },\n        controller: 'VariantsController',\n        controllerAs: 'vm',\n        deepStateRedirect: { params: ['variantId'] }\n      })\n      .state('events.genes.summary.variants.summary', {\n        url: '/summary',\n        template: '<variant-summary show-evidence-grid=\"true\"></variant-summary>',\n        resolve: {\n          refreshVariant: function(Variants, $stateParams) {\n            return Variants.get($stateParams.variantId);\n          }\n        },\n        // deepStateRedirect: { params: ['variantId'] },\n        data: {\n          navMode: 'sub',\n          titleExp: '\"Variant \" + variant.name'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantsViewOptions($state, $stateParams, Variants) {\n    var tabData = [];\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'events.genes.summary.variants';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: 'Variant Summary',\n          route: 'events.genes.summary.variants.summary',\n          params: $stateParams\n        },\n        {\n          heading: 'Variant Talk',\n          route: 'events.genes.summary.variants.talk.log',\n          params: $stateParams\n        }\n      ], this.tabData);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground'\n        },\n        edit: {\n          summaryBackgroundColor: 'pageBackground2'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantsController(Variants, VariantsViewOptions) {\n    VariantsViewOptions.init();\n    // these will be passed to the entity-view directive controller, to be required by child entity component so that they\n    // can get references to the view model and view options\n    this.VariantsViewModel = Variants;\n    this.VariantsViewOptions = VariantsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .controller('VariantSummaryController', VariantSummaryController)\n    .directive('variantSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          showEvidenceGrid: '='\n        },\n        controller: 'VariantSummaryController',\n        templateUrl: 'app/views/events/variants/summary/variantSummary.tpl.html'\n      }\n    });\n\n  //@ngInject\n  function VariantSummaryController($scope, Variants, VariantsViewOptions) {\n    $scope.variant = Variants.data.item;\n    $scope.evidence = Variants.data.evidence;\n    $scope.VariantsViewOptions = VariantsViewOptions;\n    $scope.backgroundColor = VariantsViewOptions.styles.view.backgroundColor;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events')\n    .directive('evidenceGrid', evidenceGrid)\n    .controller('EvidenceGridController', EvidenceGridController);\n\n  // @ngInject\n  function evidenceGrid() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        evidence: '='\n      },\n      templateUrl: 'app/views/events/variants/summary/evidenceGrid.tpl.html',\n      controller: 'EvidenceGridController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function EvidenceGridController($scope, $stateParams, $state, uiGridConstants, _) {\n    /*jshint camelcase: false */\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.evidenceGridOptions = {\n      enablePaginationControls: true,\n      paginationPageSizes: [4],\n      paginationPageSize: 4,\n      minRowsToShow: 5,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      modifierKeysToMultiSelect: false,\n      noUnselect: true,\n      rowTemplate: 'app/views/events/variants/summary/evidenceGridRow.tpl.html',\n      columnDefs: [\n        { name: 'id',\n          displayName: 'EID',\n          enableFiltering: false,\n          allowCellFocus: false,\n          width: '5%'\n        },\n        { name: 'description',\n          displayName: 'Supporting Evidence',\n          enableFiltering: true,\n          allowCellFocus: false,\n          width: '45%',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/variants/summary/evidenceGridEvidenceCell.tpl.html'\n        },\n        { name: 'disease',\n          displayName: 'Disease',\n          allowCellFocus: false,\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/variants/summary/evidenceGridDiseaseCell.tpl.html'\n        },\n        { name: 'drugs',\n          displayName: 'Drug',\n          allowCellFocus: false,\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          },\n          cellTemplate: 'app/views/events/variants/summary/evidenceGridDrugCell.tpl.html'\n        },\n        { name: 'evidence_level',\n          displayName: 'Level',\n          allowCellFocus: false,\n          enableFiltering: true,\n          sort: { direction: uiGridConstants.ASC },\n          width: '8%',\n          cellTemplate: 'app/views/events/variants/summary/evidenceGridLevelCell.tpl.html'\n        },\n        { name: 'rating',\n          displayName: 'Rating',\n          allowCellFocus: false,\n          enableFiltering: false,\n          sort: { direction: uiGridConstants.DESC },\n          width: '15%',\n          cellTemplate: 'app/views/events/variants/summary/evidenceGridRatingCell.tpl.html'\n          //cellTemplate: '<div>{{row.entity[col.field]}}</div>'\n        }\n      ]\n    };\n\n    ctrl.evidenceGridOptions.onRegisterApi = function(gridApi){\n      // TODO: this watch seems unnecessary, but if it's not present then the grid only loads on a fresh page, fails when loaded by a state change\n      // Something to do with directive priorities, maybe?\n      $scope.$watchCollection('evidence', function(evidence) {\n        ctrl.gridApi = gridApi;\n        ctrl.evidenceGridOptions.minRowsToShow = evidence.length + 1;\n        evidence = _.map(evidence, function(item){\n          if (_.isArray(item.drugs)) {\n            item.drugs = _.chain(item.drugs).pluck('name').value().join(\", \");\n            return item;\n          } else {\n            return item;\n          }\n        });\n        ctrl.evidenceGridOptions.data = evidence;\n\n        gridApi.selection.on.rowSelectionChanged($scope, function(row){\n          var params = _.merge($stateParams, { evidenceId: row.entity.id });\n          $state.go('events.genes.summary.variants.summary.evidence.summary', params);\n        });\n\n      });\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .config(variantEditConfig)\n    .factory('VariantEditViewOptions', VariantEditViewOptions)\n    .controller('VariantEditController', VariantEditController);\n\n  // @ngInject\n  function variantEditConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.edit', {\n        abstract: true,\n        url: '/edit',\n        templateUrl: 'app/views/events/variants/edit/VariantEditView.tpl.html',\n        controller: 'VariantEditController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantRevisions: 'VariantRevisions',\n          initVariantEdit: function(Variants, VariantRevisions, VariantHistory, $stateParams, $q) {\n            var variantId = $stateParams.variantId;\n            return $q.all([\n              VariantRevisions.initRevisions(variantId),\n              VariantHistory.initBase(variantId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantId' ],\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.edit.basic', {\n        url: '/basic',\n        template: '<variant-edit-basic></variant-edit-basic>',\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantEditViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      this.state.baseState = 'events.genes.summary.variants.edit';\n      this.state.baseUrl = $state.href(this.state.baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground2',\n          editBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantEditController(Variants, VariantRevisions, VariantEditViewOptions) {\n    console.log('VariantEditController called.');\n    VariantEditViewOptions.init();\n    this.VariantEditViewModel = Variants; // we're re-using the Variants model here but could in the future have a VariantEdit model if warranted\n    this.VariantRevisionsModel = VariantRevisions;\n    this.VariantEditViewOptions = VariantEditViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .directive('variantEditBasic', variantEditBasicDirective)\n    .controller('VariantEditBasicController', VariantEditBasicController);\n\n  // @ngInject\n  function variantEditBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantEditBasicController',\n      templateUrl: 'app/views/events/variants/edit/variantEditBasic.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function VariantEditBasicController($scope,\n                                      $stateParams,\n                                      Security,\n                                      VariantRevisions,\n                                      Variants,\n                                      VariantHistory,\n                                      VariantsViewOptions,\n                                      formConfig) {\n    var variantModel, vm;\n\n    vm = $scope.vm = {};\n    variantModel = vm.variantModel = Variants;\n\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.variant = Variants.data.item;\n    vm.variantRevisions = VariantRevisions;\n    vm.variantHistory = VariantHistory;\n    vm.variantEdit = angular.copy(vm.variant);\n    vm.variantEdit.comment = { title: 'VARIANT ' + vm.variant.name + ' Suggested Revision', text:'' };\n    vm.myVariantInfo = variantModel.data.myVariantInfo;\n    vm.variants = variantModel.data.variants;\n    vm.variantGroups = variantModel.data.variantGroups;\n\n    vm.styles = VariantsViewOptions.styles;\n\n    vm.user = {};\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n    vm.newRevisionId = Number();\n    vm.stateParams = $stateParams;\n\n    vm.variantFields = [\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          value: vm.variant.name,\n          helpText: ''\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 8,\n          label: 'Description',\n          value: 'vm.variant.description',\n          minLength: 32,\n          helpText: 'User-defined summary of the clinical relevance of this Variant.'\n        }\n      },\n      {\n        template: '<hr/>'\n      },\n      {\n        model: vm.variantEdit.comment,\n        key: 'text',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 5,\n          label: 'Revision Description',\n          value: 'text',\n          helpText: 'Please provide a brief description and support, if necessary, for your suggested revision. It will appear as the first comment in this revision\\'s comment thread.'\n        }\n      }\n    ];\n\n    vm.submit = function(variantEdit, options) {\n      variantEdit.variantId = variantEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantRevisions.submitRevision(variantEdit)\n        .then(function(response) {\n          console.log('revision submit success!');\n          vm.newRevisionId = response.id;\n          vm.formMessages['submitSuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(error) {\n          console.error('revision submit error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function(){\n          console.log('revision submit done!');\n        });\n    };\n\n    vm.apply = function(variantEdit, options) {\n      variantEdit.variantId = variantEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      Variants.apply(variantEdit)\n        .then(function(response) {\n          console.log('revision appy success!');\n          vm.formMessages['applySuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(response) {\n          console.error('revision application error!');\n          vm.formErrors[response.status] = true;\n        })\n        .finally(function(){\n          console.log('revision apply done!');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .config(variantTalkConfig)\n    .factory('VariantsTalkViewOptions', VariantsTalkViewOptions)\n    .controller('VariantTalkController', VariantTalkController);\n\n  // @ngInject\n  function variantTalkConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.talk', {\n        abstract: true,\n        url: '/talk',\n        templateUrl: 'app/views/events/variants/talk/VariantTalkView.tpl.html',\n        controller: 'VariantTalkController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantRevisions: 'VariantRevisions',\n          VariantHistory: 'VariantHistory',\n          initVariantTalk: function(Variants, VariantRevisions, VariantHistory, $stateParams, $cacheFactory, $q) {\n            var variantId = $stateParams.variantId;\n            return $q.all([\n              Variants.initComments(variantId),\n              VariantRevisions.initRevisions(variantId),\n              VariantHistory.initBase(variantId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantId' ],\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.talk.log', {\n        url: '/log',\n        template: '<variant-talk-log></variant-talk-log>',\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Log\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.talk.comments', {\n        url: '/comments',\n        template: '<variant-talk-comments></variant-talk-comments>',\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Comments\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantsTalkViewOptions($state, $stateParams, Variants) {\n    var baseUrl = '';\n    var baseState = '';\n    var tabData = [];\n    var styles = {};\n\n    var variant = Variants.data.item;\n\n    function init() {\n      this.state.baseState = 'events.genes.summary.variants.talk';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: variant.name + ' Log',\n          route: this.state.baseState + '.log',\n          params: $stateParams\n        },\n        {\n          heading: variant.name  + ' Comments',\n          route: this.state.baseState + '.comments',\n          params: $stateParams\n        },\n        {\n          heading: variant.name + ' Revisions',\n          route: this.state.baseState + '.revisions.list',\n          params: $stateParams\n        }\n      ], tabData);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackgroundGradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantTalkController(Variants, VariantRevisions, VariantsTalkViewOptions) {\n    console.log('VariantsTalkController called.');\n    VariantsTalkViewOptions.init();\n    this.VariantsTalkViewModel = Variants; // we're re-using the Variants model here but could in the future have a VariantsTalk model if warranted\n    this.VariantRevisionsModel = VariantRevisions;\n    this.VariantsTalkViewOptions = VariantsTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .controller('VariantTalkLogController', VariantTalkLogController)\n    .directive('variantTalkLog', variantTalkLogDirective);\n\n  // @ngInject\n  function variantTalkLogDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      link: variantTalkLogLink,\n      controller: 'VariantTalkLogController',\n      templateUrl: 'app/views/events/variants/talk/variantTalkLog.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function variantTalkLogLink(scope, element, attrs) {\n\n  }\n\n  // @ngInject\n  function VariantTalkLogController($scope, _,\n                                 Variants,\n                                 VariantRevisions,\n                                 VariantHistory) {\n    var ctrl = $scope.ctrl = {}; // create ctrl here, link function will attach entityTalkView after DOM rendered.\n    var comments, revisions, history;\n    $scope.comments = Variants.data.comments;\n    $scope.revisions = VariantRevisions.data.collection;\n    $scope.history = VariantHistory.data.collection;\n    $scope.$watchCollection('[comments, revisions, history]', function(collections) {\n      comments = _.merge({}, collections[0]);\n      revisions = _.merge({}, collections[1]);\n      history = _.merge({}, collections[2]);\n\n      comments = _.map(comments, function(comment) {\n        comment.type = 'comment';\n        return comment;\n      });\n\n      revisions = _.map(revisions, function(revision) {\n        revision.type = 'revision';\n        return revision;\n      });\n\n      history = _.map(history, function(change) {\n        change.type='history'\n        return change;\n      });\n\n\n      // concatenate event arrays, sort by date descending\n      ctrl.logItems = comments.concat(revisions, history);\n      ctrl.logItems = _.chain(ctrl.logItems)\n        .map(function(item) {\n          // revisions can have an .user attribute that's just a string\n          item.username = typeof item.user === 'object' ? item.user.username : item.user;\n          // some items have both created_at and updated_at, we'll favor updated_at\n          item.timestamp = _.has(item, 'updated_at') ? item.updated_at : item.created_at;\n          return item;\n        })\n        .sortBy(function(item) {\n          return new Date(item.timestamp);\n        })\n        .reverse()\n        .value();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .controller('VariantTalkCommentsController', VariantTalkCommentsController)\n    .directive('variantTalkComments', variantTalkCommentsDirective);\n\n  // @ngInject\n  function variantTalkCommentsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantTalkCommentsController',\n      templateUrl: 'app/views/events/variants/talk/variantTalkComments.tpl.html'\n    }\n  }\n\n\n  // @ngInject\n  function VariantTalkCommentsController($scope, Variants) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.variantTalkModel = Variants;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .config(variantTalkRevisionsConfig)\n    .factory('VariantTalkRevisionsViewOptions', VariantTalkRevisionsViewOptions)\n    .controller('VariantTalkRevisionsController', VariantTalkRevisionsController);\n\n  // @ngInject\n  function variantTalkRevisionsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.talk.revisions', {\n        abstract: true,\n        url: '/revisions',\n        templateUrl: 'app/views/events/variants/talk/revisions/VariantTalkRevisionsView.tpl.html',\n        controller: 'VariantTalkRevisionsController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantRevisions: 'VariantRevisions',\n          VariantHistory: 'VariantHistory',\n          initVariantTalkRevisions: function(Variants, VariantRevisions, VariantHistory, $stateParams, $q) {\n            var variantId = $stateParams.variantId;\n            return $q.all([\n              VariantRevisions.initRevisions(variantId),\n              VariantHistory.initBase(variantId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantId', 'revisionId' ],\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.talk.revisions.list', {\n        url: '/list/:revisionId',\n        template: '<variant-talk-revisions></variant-talk-revisions>',\n        resolve: {\n          initRevisionList: function(Variants, VariantRevisions, VariantHistory, $stateParams) {\n            return VariantRevisions.query($stateParams.variantId);\n          }\n        },\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Revisions\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.talk.revisions.list.summary', {\n        url: '/summary',\n        template: '<variant-talk-revision-summary></variant-talk-revision-summary>',\n        resolve: {\n          initRevision: function(VariantRevisions, $stateParams, $q) {\n            return $q.all([\n              VariantRevisions.get($stateParams.variantId, $stateParams.revisionId),\n              VariantRevisions.queryComments($stateParams.variantId, $stateParams.revisionId)\n            ]);\n          }\n        },\n        data: {\n          titleExp: '\"Variant \" + variant.name + \" Revision Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.summary.variants.talk.revisions';\n      baseUrl = $state.href(baseState, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsController(VariantRevisions, VariantTalkRevisionsRevisionsViewOptions) {\n    console.log('VariantTalkRevisionsRevisionsController called.');\n    VariantTalkRevisionsRevisionsViewOptions.init();\n    this.VariantRevisionsModel = VariantRevisions;\n    this.VariantTalkRevisionsViewOptions = VariantTalkRevisionsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .controller('VariantTalkRevisionsController', VariantTalkRevisionsController)\n    .directive('variantTalkRevisions', variantTalkRevisionsDirective);\n\n  // @ngInject\n  function variantTalkRevisionsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantTalkRevisionsController',\n      templateUrl: 'app/views/events/variants/talk/revisions/variantTalkRevisions.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsController($scope, VariantRevisions, VariantsTalkViewOptions) {\n    $scope.variantRevisions = VariantRevisions;\n    $scope.viewOptions = VariantsTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .directive('variantTalkRevisionSummary', variantTalkRevisionSummary)\n    .controller('VariantTalkRevisionSummaryController', VariantTalkRevisionSummaryController);\n\n  // @ngInject\n  function variantTalkRevisionSummary() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/views/events/variants/talk/revisions/variantTalkRevisionSummary.tpl.html',\n      controller: 'VariantTalkRevisionSummaryController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function VariantTalkRevisionSummaryController($scope, $stateParams, VariantRevisions, Security, formConfig) {\n    var vm = $scope.vm = {};\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n    vm.variantTalkModel = VariantRevisions;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    $scope.acceptRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantRevisions.acceptRevision($stateParams.variantId, $stateParams.revisionId)\n        .then(function(response) {\n          vm.formMessages['acceptSuccess'] = true;\n        })\n        .catch(function(error) {\n          console.error('revision accept error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('accept revision successful.');\n        });\n    };\n\n    $scope.rejectRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantRevisions.rejectRevision($stateParams.variantId, $stateParams.revisionId)\n        .then(function(response) {\n          vm.formMessages['rejectSuccess'] = true;\n        })\n        .catch(function(error) {\n          console.error('revision reject error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('reject revision successful.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .config(EvidenceConfig)\n    .factory('EvidenceViewOptions', EvidenceViewOptions)\n    .controller('EvidenceController', EvidenceController);\n\n  // @ngInject\n  function EvidenceConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.summary.evidence', {\n        abstract: true,\n        url: '/evidence/:evidenceId',\n        templateUrl: 'app/views/events/evidence/EvidenceView.tpl.html',\n        resolve: /* @ngInject */ {\n          Evidence: 'Evidence',\n          initEvidence: function(Evidence, $stateParams) {\n            return Evidence.initBase($stateParams.evidenceId);\n          }\n\n        },\n        controller: 'EvidenceController',\n        controllerAs: 'vm',\n        deepStateRedirect: { params: ['evidenceId'] }\n      })\n      .state('events.genes.summary.variants.summary.evidence.summary', {\n        url: '/summary',\n        template: '<evidence-summary show-evidence-grid=\"true\"></evidence-summary>',\n        //resolve: {\n        //  refreshEvidence: function(Evidence, $stateParams) {\n        //    return Evidence.getFresh($stateParams.geneId);\n        //  }\n        //},\n        // deepStateRedirect: { params: ['evidenceId'] },\n        data: {\n          navMode: 'sub',\n          titleExp: '\"Evidence \" + evidence.name'\n        }\n      });\n  }\n\n  // @ngInject\n  function EvidenceViewOptions($state, $stateParams, Evidence) {\n    var tabData = [];\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'events.genes.summary.variants.summary.evidence';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: 'Evidence Summary',\n          route: 'events.genes.summary.variants.summary.evidence.summary',\n          params: $stateParams\n        },\n        {\n          heading: 'Evidence Talk',\n          route: 'events.genes.summary.variants.summary.evidence.talk.log',\n          params: $stateParams\n        }\n      ], this.tabData);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground2'\n        },\n        edit: {\n          summaryBackgroundColor: 'pageBackground2'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function EvidenceController(Evidence, EvidenceViewOptions) {\n    EvidenceViewOptions.init();\n    // these will be passed to the entity-view directive controller, to be required by child entity component so that they\n    // can get references to the view model and view options\n    this.EvidenceViewModel = Evidence;\n    this.EvidenceViewOptions = EvidenceViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .controller('EvidenceSummaryController', EvidenceSummaryController)\n    .directive('evidenceSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {},\n        controller: 'EvidenceSummaryController',\n        templateUrl: 'app/views/events/evidence/summary/evidenceSummary.tpl.html'\n      }\n    });\n\n  //@ngInject\n  function EvidenceSummaryController($scope, Evidence, EvidenceViewOptions) {\n    $scope.evidence = Evidence.data.item;\n    $scope.$watch('evidence.drugs', function(drugs) {\n      $scope.evidence.drugsStr = _.chain($scope.evidence.drugs).pluck('name').value().join(\", \");\n    });\n    $scope.EvidenceViewOptions = EvidenceViewOptions;\n    $scope.backgroundColor = EvidenceViewOptions.styles.view.backgroundColor;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .config(evidenceEditConfig)\n    .factory('EvidenceEditViewOptions', EvidenceEditViewOptions)\n    .controller('EvidenceEditController', EvidenceEditController);\n\n  // @ngInject\n  function evidenceEditConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.summary.evidence.edit', {\n        abstract: true,\n        url: '/edit',\n        templateUrl: 'app/views/events/evidence/edit/EvidenceEditView.tpl.html',\n        controller: 'EvidenceEditController',\n        controllerAs: 'vm',\n        resolve: {\n          EvidenceRevisions: 'EvidenceRevisions',\n          initEvidenceEdit: function(Evidence, EvidenceRevisions, EvidenceHistory, $stateParams, $q) {\n            var evidenceId = $stateParams.evidenceId;\n            return $q.all([\n              EvidenceRevisions.initRevisions(evidenceId),\n              EvidenceHistory.initBase(evidenceId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'evidenceId' ],\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.edit.basic', {\n        url: '/basic',\n        template: '<evidence-edit-basic></evidence-edit-basic>',\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function EvidenceEditViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.summary.evidence.edit';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground2',\n          editBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function EvidenceEditController(Evidence, EvidenceRevisions, EvidenceEditViewOptions) {\n    console.log('EvidenceEditController called.');\n    EvidenceEditViewOptions.init();\n    this.EvidenceEditViewModel = Evidence; // we're re-using the Evidence model here but could in the future have a EvidenceEdit model if warranted\n    this.EvidenceRevisionsModel = EvidenceRevisions;\n    this.EvidenceEditViewOptions = EvidenceEditViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .directive('evidenceEditBasic', evidenceEditBasicDirective)\n    .controller('EvidenceEditBasicController', EvidenceEditBasicController);\n\n  // @ngInject\n  function evidenceEditBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'EvidenceEditBasicController',\n      templateUrl: 'app/views/events/evidence/edit/evidenceEditBasic.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function EvidenceEditBasicController($scope,\n                                       $stateParams,\n                                       Security,\n                                       EvidenceRevisions,\n                                       Evidence,\n                                       EvidenceHistory,\n                                       EvidenceViewOptions,\n                                       formConfig) {\n    var evidenceModel, vm;\n\n    vm = $scope.vm = {};\n    evidenceModel = vm.evidenceModel = Evidence;\n\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.evidence = Evidence.data.item;\n    vm.evidenceRevisions = EvidenceRevisions;\n    vm.evidenceHistory = EvidenceHistory;\n    vm.evidenceEdit = angular.copy(vm.evidence);\n    vm.evidenceEdit.comment = { title: 'Evidence EID' + vm.evidence.id + ' Revision Description', text:'' };\n    vm.evidenceEdit.drugNames = _.filter(_.pluck(vm.evidence.drugs, 'name'), function(name){ return name != 'N/A'; });\n    vm.styles = EvidenceViewOptions.styles;\n\n    vm.user = {};\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n    vm.newRevisionId = Number();\n    vm.stateParams = $stateParams;\n\n    vm.formSelects = {\n      evidence_levels: [\n        { value: 'A', label: 'A - Validated'},\n        { value: 'B', label: 'B - Clinical'},\n        { value: 'C', label: 'C - Preclinical'},\n        { value: 'D', label: 'D - Inferential'},\n        { value: 'E', label: 'E - n of 1'}\n      ],\n      evidence_ratings: [\n        { value: 1, label: '1 - Poor' },\n        { value: 2, label: '2 - Adequate' },\n        { value: 3, label: '3 - Average' },\n        { value: 4, label: '4 - Good' },\n        { value: 5, label: '5 - Excellent'}\n      ],\n      clinical_significance: [\n        { value: 'Positive', label: 'Positive' },\n        { value: 'Better Outcome', label: 'Better Outcome' },\n        { value: 'Sensitivity', label: 'Sensitivity' },\n        { value: 'Resistance or Non-Response', label: 'Resistance or Non-Response' },\n        { value: 'Poor Outcome', label: 'Poor Outcome' },\n        { value: 'Negative', label: 'Negative' },\n        { value: 'N/A', label: 'N/A' }\n      ],\n      evidence_types: [\n        { value: 'Predictive', label: 'Predictive' },\n        { value: 'Diagnostic', label: 'Diagnostic' },\n        { value: 'Prognostic', label: 'Prognostic' }\n      ],\n      evidence_directions: [\n        { value: 'Supports', label: 'Supports'},\n        { value: 'Does Not Support', label: 'Does Not Support' }\n      ],\n      variant_origins: [\n        { value: 'Somatic', label: 'Somatic'},\n        { value: 'Germline', label: 'Germline' }\n      ]\n    };\n\n    vm.evidenceFields = [\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          disabled: true,\n          value: 'vm.evidenceEdit.name',\n          helpText: 'Evidence Item Name is auto-generated.'\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 3,\n          label: 'Description',\n          value: 'vm.evidenceEdit.description',\n          minLength: 32,\n          helpText: 'Description of evidence from published medical literature detailing the association of or lack of association of a variant with diagnostic, prognostic or predictive value in relation to a specific disease (and treatment for predictive evidence). Data constituting protected health information (PHI) should not be entered. Please familiarize yourself with your jurisdiction\\'s definition of PHI before contributing.'\n        }\n      },\n      {\n        key: 'disease',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Disease',\n          value: 'vm.evidenceEdit.disease',\n          minLength: 32,\n          helpText: 'Enter the disease or subtype that is associated with this evidence statement. This should be a disease in the disease-ontology that carries a DOID (e.g., 1909 for melanoma). If the disease to be entered is not in the disease ontology, enter it as free text. '\n        }\n      },\n      {\n        key: 'doid',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'DOID',\n          value: 'vm.evidenceEdit.doid',\n          minLength: 8,\n          length: 8,\n          helpText: 'Disease Ontology ID of the specific disease or disease subtype associated with the evidence statement (e.g., 1909 for melanoma).'\n        }\n      },\n      {\n        key: 'pubmed_id',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Pubmed Id',\n          value: 'vm.evidenceEdit.pubmed_id',\n          minLength: 8,\n          length: 8,\n          helpText: 'PubMed ID for the publication associated with the evidence statement (e.g. 23463675)'\n        }\n      },\n      {\n        key: 'drugNames',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Drug Names',\n          inputOptions: {\n            type: 'input'\n          },\n          helpText: 'Manage drugs'\n        }\n      },\n      {\n        key: 'rating',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Rating',\n          options: vm.formSelects.evidence_ratings,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: [\n                   '<p>Please rate your evidence according to the following scale, basing your subjective evaluation on the following guidelines:</p>',\n                   '<ul>',\n                   '<li><strong>One Star:</strong> Claim is not supported well by experimental evidence. Results are not reproducible, or have very small sample size. No follow-up is done to validate novel claims. </li>',\n                   '<li><strong>Two Stars:</strong> Evidence is not well supported by experimental data, and little follow-up data is available. Publication is from a journal with low academic impact. Experiments may lack proper controls, have small sample size, or are not statistically convincing.</li>',\n                   '<li><strong>Three Stars:</strong> Evidence is convincing, but not supported by a breadth of experiments. May be smaller scale projects, or novel results without many follow-up experiments. Discrepancies from expected results are explained and not concerning.</li>',\n                   '<li><strong>Four Stars:</strong> Strong, well supported evidence. Experiments are well controlled, and results are convincing. Any discrepancies from expected results are well-explained and not concerning.</li>',\n                   '<li><strong>Five Stars:</strong> Strong, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates. Evidence confirmed using separate methods.</li>'].join(\" \")\n        }\n      },\n      {\n        key: 'evidence_level',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Evidence Level',\n          value: 'vm.evidenceEdit.rating',\n          options: vm.formSelects.evidence_levels,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Description of the study performed to produce the evidence statement'\n        }\n      },\n      {\n        key: 'evidence_type',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Evidence Type',\n          value: 'vm.evidenceEdit.evidence_type',\n          options: vm.formSelects.evidence_types,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Type of clinical outcome associated with the evidence statement.'\n        }\n      },\n      {\n        key: 'evidence_direction',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Evidence Type',\n          value: 'vm.evidenceEdit.evidence_direction',\n          options: vm.formSelects.evidence_directions,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'A indicator of whether the evidence statement supports or refutes the clinical significance of an event.'\n        }\n      },\n      {\n        key: 'clinical_significance',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Clinical Significance',\n          value: 'vm.evidenceEdit.clinical_significance',\n          options: vm.formSelects.clinical_significance,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Positive or negative association of the Variant with predictive, prognostic, or diagnostic evidence types. If the variant was not associated with a positive or negative outcome, Not Applicable should be selected.'\n        }\n      },\n      {\n        key: 'variant_origin',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Variant Origin',\n          value: 'vm.evidenceEdit.variant_origin',\n          options: vm.formSelects.variant_origins,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Origin of variant.'\n        }\n      },\n      { template: '<hr/>'},\n      //{\n      //  type: 'horizontalInputHelp',\n      //  key: 'title',\n      //  model: vm.evidenceEdit.comment,\n      //  templateOptions: {\n      //    label: 'Comment Title',\n      //    value: 'title',\n      //    helpText: 'Initial Revision Comment Title'\n      //  }\n      //},\n      {\n        key: 'text',\n        type: 'horizontalTextareaHelp',\n        model: vm.evidenceEdit.comment,\n        templateOptions: {\n          rows: 5,\n          label: 'Revision Description',\n          value: 'text',\n          helpText: 'Please provide a brief description and support, if necessary, for your suggested revision. It will appear as the first comment in this revision\\'s comment thread.'\n        }\n      }\n    ];\n\n\n\n    vm.submit = function(evidenceEdit, options) {\n      evidenceEdit.evidenceId = evidenceEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      // prep evidence edit obj for submission to server\n      evidenceEdit.drugs= evidenceEdit.drugNames;\n\n      EvidenceRevisions.submitRevision(evidenceEdit)\n        .then(function(response) {\n          console.log('revision submit success!');\n          vm.newRevisionId = response.id;\n          vm.formMessages['submitSuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(error) {\n          console.error('revision submit error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function(){\n          console.log('revision submit done!');\n        });\n    };\n\n    vm.apply = function(evidenceEdit, options) {\n      evidenceEdit.evidenceId = evidenceEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      Evidence.apply(evidenceEdit)\n        .then(function(response) {\n          console.log('revision appy success!');\n          vm.formMessages['applySuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(response) {\n          console.error('revision application error!');\n          vm.formErrors[response.status] = true;\n        })\n        .finally(function(){\n          console.log('revision apply done!');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .config(evidenceTalkConfig)\n    .factory('EvidenceTalkViewOptions', EvidenceTalkViewOptions)\n    .controller('EvidenceTalkController', EvidenceTalkController);\n\n  // @ngInject\n  function evidenceTalkConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.summary.evidence.talk', {\n        abstract: true,\n        url: '/talk',\n        templateUrl: 'app/views/events/evidence/talk/EvidenceTalkView.tpl.html',\n        controller: 'EvidenceTalkController',\n        controllerAs: 'vm',\n        resolve: {\n          EvidenceRevisions: 'EvidenceRevisions',\n          EvidenceHistory: 'EvidenceHistory',\n          initEvidenceTalk: function(Evidence, EvidenceRevisions, EvidenceHistory, $stateParams, $cacheFactory, $q) {\n            var evidenceId = $stateParams.evidenceId;\n            return $q.all([\n              Evidence.initComments(evidenceId),\n              EvidenceRevisions.initRevisions(evidenceId),\n              EvidenceHistory.initBase(evidenceId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'evidenceId' ],\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.talk.log', {\n        url: '/log',\n        template: '<evidence-talk-log></evidence-talk-log>',\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Log\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.talk.comments', {\n        url: '/comments',\n        template: '<evidence-talk-comments></evidence-talk-comments>',\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Comments\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function EvidenceTalkViewOptions($state, $stateParams, Evidence) {\n    var baseUrl = '';\n    var baseState = '';\n    var tabData = [];\n    var styles = {};\n\n    var evidence = Evidence.data.item;\n\n    function init() {\n      baseState = 'events.genes.summary.variants.summary.evidence.talk';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy([\n        {\n          heading: evidence.name + ' Log',\n          route: baseState + '.log',\n          params: { evidenceId: evidence.id }\n        },\n        {\n          heading: evidence.name  + ' Comments',\n          route: baseState + '.comments',\n          params: { evidenceId: evidence.id }\n        },\n        {\n          heading: evidence.name + ' Revisions',\n          route: baseState + '.revisions.list',\n          params: { evidenceId: evidence.id }\n        }\n      ], tabData);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function EvidenceTalkController(Evidence, EvidenceRevisions, EvidenceTalkViewOptions) {\n    console.log('EvidenceTalkController called.');\n    EvidenceTalkViewOptions.init();\n    this.EvidenceTalkViewModel = Evidence; // we're re-using the Evidence model here but could in the future have a EvidenceTalk model if warranted\n    this.EvidenceRevisionsModel = EvidenceRevisions;\n    this.EvidenceTalkViewOptions = EvidenceTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .controller('EvidenceTalkLogController', EvidenceTalkLogController)\n    .directive('evidenceTalkLog', evidenceTalkLogDirective);\n\n  // @ngInject\n  function evidenceTalkLogDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      link: evidenceTalkLogLink,\n      controller: 'EvidenceTalkLogController',\n      templateUrl: 'app/views/events/evidence/talk/evidenceTalkLog.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function evidenceTalkLogLink(scope, element, attrs) {\n\n  }\n\n  // @ngInject\n  function EvidenceTalkLogController($scope, _,\n                                 Evidence,\n                                 EvidenceRevisions,\n                                 EvidenceHistory) {\n    var ctrl = $scope.ctrl = {}; // create ctrl here, link function will attach entityTalkView after DOM rendered.\n    var comments, revisions, history;\n    $scope.comments = Evidence.data.comments;\n    $scope.revisions = EvidenceRevisions.data.collection;\n    $scope.history = EvidenceHistory.data.collection;\n    $scope.$watchCollection('[comments, revisions, history]', function(collections) {\n      comments = _.merge({}, collections[0]);\n      revisions = _.merge({}, collections[1]);\n      history = _.merge({}, collections[2]);\n\n      comments = _.map(comments, function(comment) {\n        comment.type = 'comment';\n        return comment;\n      });\n\n      revisions = _.map(revisions, function(revision) {\n        revision.type = 'revision';\n        return revision;\n      });\n\n      history = _.map(history, function(change) {\n        change.type='history'\n        return change;\n      });\n\n\n      // concatenate event arrays, sort by date descending\n      ctrl.logItems = comments.concat(revisions, history);\n      ctrl.logItems = _.chain(ctrl.logItems)\n        .map(function(item) {\n          // revisions can have an .user attribute that's just a string\n          item.username = typeof item.user === 'object' ? item.user.username : item.user;\n          // some items have both created_at and updated_at, we'll favor updated_at\n          item.timestamp = _.has(item, 'updated_at') ? item.updated_at : item.created_at;\n          return item;\n        })\n        .sortBy(function(item) {\n          return new Date(item.timestamp);\n        })\n        .reverse()\n        .value();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .controller('EvidenceTalkCommentsController', EvidenceTalkCommentsController)\n    .directive('evidenceTalkComments', evidenceTalkCommentsDirective);\n\n  // @ngInject\n  function evidenceTalkCommentsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'EvidenceTalkCommentsController',\n      templateUrl: 'app/views/events/evidence/talk/evidenceTalkComments.tpl.html'\n    }\n  }\n\n\n  // @ngInject\n  function EvidenceTalkCommentsController($scope, Evidence) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.evidenceTalkModel = Evidence;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .config(evidenceTalkRevisionsConfig)\n    .factory('EvidenceTalkRevisionsViewOptions', EvidenceTalkRevisionsViewOptions)\n    .controller('EvidenceTalkRevisionsController', EvidenceTalkRevisionsController);\n\n  // @ngInject\n  function evidenceTalkRevisionsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variants.summary.evidence.talk.revisions', {\n        abstract: true,\n        url: '/revisions',\n        templateUrl: 'app/views/events/evidence/talk/revisions/EvidenceTalkRevisionsView.tpl.html',\n        controller: 'EvidenceTalkRevisionsController',\n        controllerAs: 'vm',\n        resolve: {\n          EvidenceRevisions: 'EvidenceRevisions',\n          EvidenceHistory: 'EvidenceHistory',\n          initEvidenceTalkRevisions: function(Evidence, EvidenceRevisions, EvidenceHistory, $stateParams, $q) {\n            var evidenceId = $stateParams.evidenceId;\n            return $q.all([\n              EvidenceRevisions.initRevisions(evidenceId),\n              EvidenceHistory.initBase(evidenceId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'evidenceId', 'revisionId' ],\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.talk.revisions.list', {\n        url: '/list/:revisionId',\n        template: '<evidence-talk-revisions></evidence-talk-revisions>',\n        resolve: {\n          initRevisionList: function(Evidence, EvidenceRevisions, EvidenceHistory, $stateParams) {\n            return EvidenceRevisions.query($stateParams.evidenceId);\n          }\n        },\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Revisions\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variants.summary.evidence.talk.revisions.list.summary', {\n        url: '/summary',\n        template: '<evidence-talk-revision-summary></evidence-talk-revision-summary>',\n        resolve: {\n          initRevision: function(EvidenceRevisions, $stateParams, $q) {\n            return $q.all([\n              EvidenceRevisions.get($stateParams.evidenceId, $stateParams.revisionId),\n              EvidenceRevisions.queryComments($stateParams.evidenceId, $stateParams.revisionId)\n            ]);\n          }\n        },\n        data: {\n          titleExp: '\"Evidence \" + evidence.name + \" Revision Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function EvidenceTalkRevisionsViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.summary.variants.summary.evidence.talk.revisions';\n      baseUrl = $state.href(baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function EvidenceTalkRevisionsController(Evidence, EvidenceRevisions, EvidenceTalkRevisionsViewOptions) {\n    console.log('EvidenceTalkRevisionsController called.');\n    EvidenceTalkRevisionsViewOptions.init();\n    this.EvidenceRevisionsModel = EvidenceRevisions;\n    this.EvidenceTalkRevisionsViewOptions = EvidenceTalkRevisionsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .controller('EvidenceTalkRevisionsController', EvidenceTalkRevisionsController)\n    .directive('evidenceTalkRevisions', EvidenceTalkRevisionsDirective);\n\n  // @ngInject\n  function EvidenceTalkRevisionsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'EvidenceTalkRevisionsController',\n      templateUrl: 'app/views/events/evidence/talk/revisions/evidenceTalkRevisions.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function EvidenceTalkRevisionsController($scope, EvidenceRevisions, EvidenceTalkViewOptions) {\n    $scope.evidenceRevisions = EvidenceRevisions;\n    $scope.viewOptions = EvidenceTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.evidence')\n    .directive('evidenceTalkRevisionSummary', evidenceTalkRevisionSummary)\n    .controller('EvidenceTalkRevisionSummaryController', EvidenceTalkRevisionSummaryController);\n\n  // @ngInject\n  function evidenceTalkRevisionSummary() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/views/events/evidence/talk/revisions/evidenceTalkRevisionSummary.tpl.html',\n      controller: 'EvidenceTalkRevisionSummaryController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function EvidenceTalkRevisionSummaryController($scope, $stateParams, EvidenceRevisions, Security, formConfig) {\n    var vm = $scope.vm = {};\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n    vm.evidenceTalkModel = EvidenceRevisions;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    $scope.acceptRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      EvidenceRevisions.acceptRevision($stateParams.evidenceId, $stateParams.revisionId)\n        .then(function(response) {\n          vm.formMessages['acceptSuccess'] = true;\n        })\n        .catch(function(error) {\n          console.error('revision accept error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('accept revision successful.');\n        });\n    };\n\n    $scope.rejectRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      EvidenceRevisions.rejectRevision($stateParams.evidenceId, $stateParams.revisionId)\n        .then(function(response) {\n          vm.formMessages['rejectSuccess'] = true;\n        })\n        .catch(function(error) {\n          console.error('revision reject error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('reject revision successful.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .config(VariantGroupsConfig)\n    .factory('VariantGroupsViewOptions', VariantGroupsViewOptions)\n    .controller('VariantGroupsController', VariantGroupsController);\n\n  // @ngInject\n  function VariantGroupsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variantGroups', {\n        abstract: true,\n        url: '/variantGroups/:variantGroupId',\n        templateUrl: 'app/views/events/variantGroups/VariantGroupsView.tpl.html',\n        resolve: /* @ngInject */ {\n          VariantGroups: 'VariantGroups',\n          initVariantGroups: function(VariantGroups, $stateParams) {\n            return VariantGroups.initBase($stateParams.variantGroupId);\n          }\n        },\n        controller: 'VariantGroupsController',\n        controllerAs: 'vm',\n        deepStateRedirect: [ 'variantGroupId' ],\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      })\n      .state('events.genes.summary.variantGroups.summary', {\n        url: '/summary',\n        template: '<variant-group-summary show-variant-grid=\"true\"></variant-group-summary>',\n        resolve: {\n          VariantGroups: 'VariantGroups',\n          refreshVariantGroups: function(VariantGroups, $stateParams) {\n            return VariantGroups.get($stateParams.variantGroupId);\n          }\n        },\n        deepStateRedirect: [ 'variantGroupId' ],\n        data: {\n          titleExp: '\"VariantGroups \" + variantGroup.name + \" Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantGroupsViewOptions($state, $stateParams, VariantGroups) {\n    var tabData = [];\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'events.genes.summary.variantGroups';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: 'Variant Groups Summary',\n          route: 'events.genes.summary.variantGroups.summary',\n          params: { variantGroupId: VariantGroups.data.item.id }\n        },\n        {\n          heading: 'Variant Groups Talk',\n          route: 'events.genes.summary.variantGroups.talk.log',\n          params: { variantGroupId: VariantGroups.data.item.id }\n        }\n      ], this.tabData);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground'\n        },\n        summary: {\n          backgroundColor: 'pageBackground2'\n        },\n        myVariantGroupsInfo: {\n          backgroundColor: 'pageBackground2'\n        },\n        variantMenu: {\n          backgroundColor: 'pageBackground2'\n        },\n        edit: {\n          summaryBackgroundColor: 'pageBackground2'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantGroupsController(VariantGroups, VariantGroupsViewOptions) {\n    VariantGroupsViewOptions.init();\n    // these will be passed to the entity-view directive controller, to be required by child entity component so that they\n    // can get references to the view model and view options\n    this.VariantGroupsViewModel = VariantGroups;\n    this.VariantGroupsViewOptions = VariantGroupsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .controller('VariantGroupSummaryController', VariantGroupSummaryController)\n    .directive('variantGroupSummary', function() {\n      return {\n        restrict: 'E',\n        scope: {\n          showVariantGrid: '='\n        },\n        controller: 'VariantGroupSummaryController',\n        templateUrl: 'app/views/events/variantGroups/summary/variantGroupSummary.tpl.html'\n      }\n    });\n\n  function VariantGroupSummaryController($scope, VariantGroups, VariantGroupsViewOptions) {\n    $scope.variantGroup = VariantGroups.data.item;\n    $scope.variants = VariantGroups.data.variants;\n    $scope.VariantGroupsViewOptions = VariantGroupsViewOptions;\n    $scope.backgroundColor = VariantGroupsViewOptions.styles.view.backgroundColor;\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events')\n    .directive('variantGrid', variantGrid)\n    .controller('VariantGridController', VariantGridController);\n\n  // @ngInject\n  function variantGrid() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        variants: '='\n      },\n      templateUrl: 'app/views/events/variantGroups/summary/variantGrid.tpl.html',\n      controller: 'VariantGridController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function VariantGridController($scope, $stateParams, $state, uiGridConstants, _) {\n    /*jshint camelcase: false */\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.variantGridOptions = {\n      enablePaginationControls: true,\n      paginationPageSizes: [8],\n      paginationPageSize: 8,\n      minRowsToShow: 9,\n\n      enableHorizontalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableVerticalScrollbar: uiGridConstants.scrollbars.NEVER,\n      enableFiltering: true,\n      enableColumnMenus: false,\n      enableSorting: true,\n      enableRowSelection: true,\n      enableRowHeaderSelection: false,\n      multiSelect: false,\n      modifierKeysToMultiSelect: false,\n      noUnselect: true,\n      columnDefs: [\n        //{ name: 'id',\n        //  displayName: 'ID',\n        //  enableFiltering: false,\n        //  allowCellFocus: false,\n        //  width: '5%'\n        //},\n        { name: 'entrez_id',\n          displayName: 'Entrez ID',\n          enableFiltering: false,\n          allowCellFocus: false,\n          width: '9%'\n        },\n        { name: 'name',\n          displayName: 'Name',\n          enableFiltering: true,\n          allowCellFocus: false,\n          width: '20%',\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        },\n        {\n          name: 'description',\n          displayName: 'Description',\n          allowCellFocus: false,\n          enableFiltering: true,\n          filter: {\n            condition: uiGridConstants.filter.CONTAINS\n          }\n        }\n      ]\n    };\n\n    ctrl.variantGridOptions.onRegisterApi = function(gridApi){\n      ctrl.gridApi = gridApi;\n      // TODO: this watch seems unnecessary, but if it's not present then the grid only loads on a fresh page, fails when loaded by a state change\n      // Something to do with directive priorities, maybe?\n      $scope.$watch('variants', function(variants){\n        ctrl.variants = variants;\n        ctrl.variantGridOptions.minRowsToShow = variants.length + 1;\n        ctrl.variantGridOptions.data = variants;\n      });\n\n      gridApi.selection.on.rowSelectionChanged($scope, function(row){\n        var params = _.merge($stateParams, { variantId: row.entity.id })\n        $state.go('events.genes.summary.variants.summary', params);\n      });\n\n    };\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .config(variantGroupEditConfig)\n    .factory('VariantGroupEditViewOptions', VariantGroupEditViewOptions)\n    .controller('VariantGroupEditController', VariantGroupEditController);\n\n  // @ngInject\n  function variantGroupEditConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variantGroups.edit', {\n        abstract: true,\n        url: '/edit',\n        templateUrl: 'app/views/events/variantGroups/edit/VariantGroupEditView.tpl.html',\n        controller: 'VariantGroupEditController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantGroupRevisions: 'VariantGroupRevisions',\n          initVariantGroupEdit: function(VariantGroups, VariantGroupRevisions, VariantGroupHistory, $stateParams, $q) {\n            var variantGroupId = $stateParams.variantGroupId;\n            return $q.all([\n              VariantGroupRevisions.initRevisions(variantGroupId),\n              VariantGroupHistory.initBase(variantGroupId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantGroupId' ],\n        data: {\n          titleExp: '\"VariantGroup \" + variant.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.edit.basic', {\n        url: '/basic',\n        template: '<variant-group-edit-basic></variant-group-edit-basic>',\n        data: {\n          titleExp: '\"VariantGroup Group \" + variant.name + \" Edit\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantGroupEditViewOptions($state, $stateParams) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      this.state.baseState = 'events.genes.summary.variantGroups.edit';\n      this.state.baseUrl = $state.href(this.state.baseUrl, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          editBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantGroupEditController(VariantGroups, VariantGroupRevisions, VariantGroupEditViewOptions) {\n    console.log('VariantGroupEditController called.');\n    VariantGroupEditViewOptions.init();\n    this.VariantGroupEditViewModel = VariantGroups;\n    this.VariantGroupRevisionsModel = VariantGroupRevisions;\n    this.VariantGroupEditViewOptions = VariantGroupEditViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variants')\n    .directive('variantGroupEditBasic', variantGroupEditBasicDirective)\n    .controller('VariantGroupEditBasicController', VariantGroupEditBasicController);\n\n  // @ngInject\n  function variantGroupEditBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantGroupEditBasicController',\n      templateUrl: 'app/views/events/variantGroups/edit/variantGroupEditBasic.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function VariantGroupEditBasicController($scope,\n                                           $stateParams,\n                                           Security,\n                                           VariantGroupRevisions,\n                                           VariantGroups,\n                                           VariantGroupHistory,\n                                           VariantGroupsViewOptions,\n                                           formConfig) {\n    var variantGroupModel, vm;\n\n    vm = $scope.vm = {};\n    variantGroupModel = vm.variantGroupModel = VariantGroups;\n\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.variantGroup = VariantGroups.data.item;\n    vm.variantGroupRevisions = VariantGroupRevisions;\n    vm.variantGroupHistory = VariantGroupHistory;\n    vm.variantGroupEdit = angular.copy(vm.variantGroup);\n    vm.variantGroupEdit.comment = { title: 'VARIANT GROUP ' + vm.variantGroup.name + ' Revision Description', text:'' };\n    // vm.variantGroupEdit.variants = variantGroupModel.data.variants;\n    // vm.variantGroupEdit.variantIds = _.pluck(variantGroupModel.data.variants, 'id');\n    vm.variantGroupEdit.variantNames = _.pluck(variantGroupModel.data.variants, 'name');\n\n    vm.styles = VariantGroupsViewOptions.styles;\n\n    vm.user = {};\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n    vm.newRevisionId = Number();\n    vm.stateParams = $stateParams;\n\n    vm.variantGroupFields = [\n      {\n        key: 'name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Name',\n          disabled: true,\n          value: vm.variantGroup.name\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 8,\n          label: 'Description',\n          value: 'vm.variantGroup.description',\n          focus: true,\n          minLength: 32\n        }\n      },\n      {\n        key: 'variantNames',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Variants',\n          inputOptions: {\n            type: 'input'\n          },\n          helpText: 'Manage variants'\n        }\n      },\n      {\n        template: '<hr/>'\n      },\n      {\n        model: vm.variantGroupEdit.comment,\n        key: 'text',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 5,\n          label: 'Revision Description',\n          value: 'text',\n          helpText: 'Please provide a brief description and support, if necessary, for your suggested revision. It will appear as the first comment in this revision\\'s comment thread.'\n        }\n      }\n    ];\n\n    vm.submit = function(variantGroupEdit, options) {\n      variantGroupEdit.variantGroupId = variantGroupEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      // prep variant edit obj for submission to server\n      variantGroupEdit.variants = variantGroupEdit.variantNames;\n\n      VariantGroupRevisions.submitRevision(variantGroupEdit)\n        .then(function(response) {\n          console.log('revision submit success!');\n          vm.newRevisionId = response.id;\n          vm.formMessages['submitSuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(error) {\n          console.error('revision submit error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function(){\n          console.log('revision submit done!');\n        });\n    };\n\n    vm.apply = function(variantGroupEdit, options) {\n      variantGroupEdit.variantGroupId = variantGroupEdit.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantGroups.apply(variantGroupEdit)\n        .then(function(response) {\n          console.log('revision apply success!');\n          vm.formMessages['applySuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(response) {\n          console.error('revision application error!');\n          vm.formErrors[response.status] = true;\n        })\n        .finally(function(){\n          console.log('revision apply done!');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .config(variantTalkConfig)\n    .factory('VariantGroupsTalkViewOptions', VariantGroupsTalkViewOptions)\n    .controller('VariantGroupsTalkController', VariantGroupsTalkController);\n\n  // @ngInject\n  function variantTalkConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variantGroups.talk', {\n        abstract: true,\n        url: '/talk',\n        templateUrl: 'app/views/events/variantGroups/talk/VariantGroupTalkView.tpl.html',\n        controller: 'VariantGroupsTalkController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantGroupRevisions: 'VariantGroupRevisions',\n          VariantGroupHistory: 'VariantGroupHistory',\n          initVariantGroupTalk: function(VariantGroups, VariantGroupRevisions, VariantGroupHistory, $stateParams, $cacheFactory, $q) {\n            var variantGroupId = $stateParams.variantGroupId;\n            return $q.all([\n              VariantGroups.initComments(variantGroupId),\n              VariantGroupRevisions.initRevisions(variantGroupId),\n              VariantGroupHistory.initBase(variantGroupId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantGroupId' ],\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.talk.log', {\n        url: '/log',\n        template: '<variant-group-talk-log></variant-group-talk-log>',\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Log\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.talk.comments', {\n        url: '/comments',\n        template: '<variant-group-talk-comments></variant-group-talk-comments>',\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Comments\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantGroupsTalkViewOptions($state, $stateParams, VariantGroups) {\n    var baseUrl = '';\n    var baseState = '';\n    var tabData = [];\n    var styles = {};\n\n    var variantGroup = VariantGroups.data.item;\n\n    function init() {\n      this.state.baseState = 'events.genes.summary.variantGroups.talk';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy([\n        {\n          heading: variantGroup.name + ' Log',\n          route: this.state.baseState + '.log',\n          params: $stateParams\n        },\n        {\n          heading: variantGroup.name  + ' Comments',\n          route: this.state.baseState + '.comments',\n          params: $stateParams\n        },\n        {\n          heading: variantGroup.name + ' Revisions',\n          route: this.state.baseState + '.revisions.list',\n          params: $stateParams\n        }\n      ], tabData);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackgroundGradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      tabData: tabData,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantGroupsTalkController(VariantGroups, VariantGroupRevisions, VariantGroupsTalkViewOptions) {\n    console.log('VariantGroupsTalkController called.');\n    VariantGroupsTalkViewOptions.init();\n    this.VariantGroupsTalkViewModel = VariantGroups; // we're re-using the VariantGroups model here but could in the future have a VariantGroupsTalk model if warranted\n    this.VariantGroupRevisionsModel = VariantGroupRevisions;\n    this.VariantGroupsTalkViewOptions = VariantGroupsTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .controller('VariantGroupTalkLogController', VariantGroupTalkLogController)\n    .directive('variantGroupTalkLog', variantGroupTalkLogDirective);\n\n  // @ngInject\n  function variantGroupTalkLogDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      link: variantGroupTalkLogLink,\n      controller: 'VariantGroupTalkLogController',\n      templateUrl: 'app/views/events/variantGroups/talk/variantGroupTalkLog.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function variantGroupTalkLogLink(scope, element, attrs) {\n\n  }\n\n  // @ngInject\n  function VariantGroupTalkLogController($scope, _,\n                                    VariantGroups,\n                                    VariantGroupRevisions,\n                                    VariantGroupHistory) {\n    var ctrl = $scope.ctrl = {}; // create ctrl here, link function will attach entityTalkView after DOM rendered.\n    var comments, revisions, history;\n    $scope.comments = VariantGroups.data.comments;\n    $scope.revisions = VariantGroupRevisions.data.collection;\n    $scope.history = VariantGroupHistory.data.collection;\n    $scope.$watchCollection('[comments, revisions, history]', function(collections) {\n      comments = _.merge({}, collections[0]);\n      revisions = _.merge({}, collections[1]);\n      history = _.merge({}, collections[2]);\n\n      comments = _.map(comments, function(comment) {\n        comment.type = 'comment';\n        return comment;\n      });\n\n      revisions = _.map(revisions, function(revision) {\n        revision.type = 'revision';\n        return revision;\n      });\n\n      history = _.map(history, function(change) {\n        change.type='history'\n        return change;\n      });\n\n\n      // concatenate event arrays, sort by date descending\n      ctrl.logItems = comments.concat(revisions, history);\n      ctrl.logItems = _.chain(ctrl.logItems)\n        .map(function(item) {\n          // revisions can have an .user attribute that's just a string\n          item.username = typeof item.user === 'object' ? item.user.username : item.user;\n          // some items have both created_at and updated_at, we'll favor updated_at\n          item.timestamp = _.has(item, 'updated_at') ? item.updated_at : item.created_at;\n          return item;\n        })\n        .sortBy(function(item) {\n          return new Date(item.timestamp);\n        })\n        .reverse()\n        .value();\n    });\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .controller('VariantGroupTalkCommentsController', VariantGroupTalkCommentsController)\n    .directive('variantGroupTalkComments', VariantGroupTalkCommentsDirective);\n\n  // @ngInject\n  function VariantGroupTalkCommentsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantGroupTalkCommentsController',\n      templateUrl: 'app/views/events/variantGroups/talk/variantGroupTalkComments.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function VariantGroupTalkCommentsController($scope, VariantGroups) {\n    var ctrl = $scope.ctrl = {};\n\n    ctrl.variantGroupTalkModel = VariantGroups;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .config(variantGroupTalkRevisionsConfig)\n    .factory('VariantTalkRevisionsViewOptions', VariantTalkRevisionsViewOptions)\n    .controller('VariantGroupTalkRevisionsController', VariantTalkRevisionsController);\n\n  // @ngInject\n  function variantGroupTalkRevisionsConfig($stateProvider) {\n    $stateProvider\n      .state('events.genes.summary.variantGroups.talk.revisions', {\n        abstract: true,\n        url: '/revisions',\n        templateUrl: 'app/views/events/variantGroups/talk/revisions/VariantGroupTalkRevisionsView.tpl.html',\n        controller: 'VariantGroupTalkRevisionsController',\n        controllerAs: 'vm',\n        resolve: {\n          VariantRevisions: 'VariantRevisions',\n          VariantHistory: 'VariantHistory',\n          initVariantGroupTalkRevisions: function(VariantGroups, VariantGroupRevisions, VariantGroupHistory, $stateParams, $q) {\n            var variantGroupId = $stateParams.variantGroupId;\n            return $q.all([\n              VariantGroups.initComments(variantGroupId),\n              VariantGroupRevisions.initRevisions(variantGroupId),\n              VariantGroupHistory.initBase(variantGroupId)\n            ]);\n          }\n        },\n        deepStateRedirect: [ 'variantGroupId', 'revisionId' ],\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Talk\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.talk.revisions.list', {\n        url: '/list/:revisionId',\n        template: '<variant-group-talk-revisions></variant-group-talk-revisions>',\n        resolve: {\n          initRevisionList: function(VariantGroups, VariantGroupRevisions, VariantGroupHistory, $stateParams) {\n            return VariantGroupRevisions.query($stateParams.variantGroupId);\n          }\n        },\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Revisions\"',\n          navMode: 'sub'\n        }\n      })\n      .state('events.genes.summary.variantGroups.talk.revisions.list.summary', {\n        url: '/summary',\n        template: '<variant-group-talk-revision-summary></variant-group-talk-revision-summary>',\n        resolve: {\n          initRevision: function(VariantGroupRevisions, $stateParams, $q) {\n            return $q.all([\n              VariantGroupRevisions.get($stateParams.variantGroupId, $stateParams.revisionId),\n              VariantGroupRevisions.queryComments($stateParams.variantGroupId, $stateParams.revisionId)\n            ]);\n          }\n        },\n        data: {\n          titleExp: '\"Variant Group \" + variantGroup.name + \" Revision Summary\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsViewOptions($state, $stateParams, Variants) {\n    var baseUrl = '';\n    var baseState = '';\n    var styles = {};\n\n    function init() {\n      baseState = 'events.genes.summary.variantGroups.talk.revisions';\n      baseUrl = $state.href(baseState, $stateParams);\n\n      angular.copy({\n        view: {\n          summaryBackgroundColor: 'pageBackground',\n          talkBackgroundColor: 'pageBackground'\n        },\n        tabs: {\n          tabRowBackground: 'pageBackground2Gradient'\n        }\n      }, styles);\n    }\n\n    return {\n      init: init,\n      state: {\n        baseParams: $stateParams,\n        baseState: baseState,\n        baseUrl: baseUrl\n      },\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function VariantTalkRevisionsController(VariantGroups, VariantGroupRevisions, VariantGroupTalkRevisionsViewOptions) {\n    console.log('VariantTalkRevisionsRevisionsController called.');\n    VariantTalkRevisionsRevisionsViewOptions.init();\n    this.VariantGroupRevisionsModel = VariantGroupRevisions;\n    this.VariantGroupTalkRevisionsViewOptions = VariantGroupTalkRevisionsViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .controller('VariantGroupTalkRevisionsController', VariantGroupTalkRevisionsController)\n    .directive('variantGroupTalkRevisions', variantGroupTalkRevisionsDirective);\n\n  // @ngInject\n  function variantGroupTalkRevisionsDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      controller: 'VariantGroupTalkRevisionsController',\n      templateUrl: 'app/views/events/variantGroups/talk/revisions/variantGroupTalkRevisions.tpl.html'\n    }\n  }\n\n  // @ngInject\n  function VariantGroupTalkRevisionsController($scope, VariantGroupRevisions, VariantGroupsTalkViewOptions) {\n    $scope.variantGroupRevisions = VariantGroupRevisions;\n    $scope.viewOptions = VariantGroupsTalkViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.events.variantGroups')\n    .directive('variantGroupTalkRevisionSummary', variantGroupTalkRevisionSummary)\n    .controller('VariantGroupTalkRevisionSummaryController', VariantGroupTalkRevisionSummaryController);\n\n  // @ngInject\n  function variantGroupTalkRevisionSummary() {\n    var directive = {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'app/views/events/variantGroups/talk/revisions/variantGroupTalkRevisionSummary.tpl.html',\n      controller: 'VariantGroupTalkRevisionSummaryController'\n    };\n    return directive;\n  }\n\n  // @ngInject\n  function VariantGroupTalkRevisionSummaryController($scope, $stateParams, VariantGroupRevisions, Security, formConfig) {\n    var vm = $scope.vm = {};\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n    vm.variantGroupTalkModel = VariantGroupRevisions;\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    $scope.acceptRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantGroupRevisions.acceptRevision($stateParams.variantGroupId, $stateParams.revisionId)\n        .then(function(response) {\n          vm.formMessages['acceptSuccess'] = true;\n        })\n        .catch(function(error) {\n          console.error('revision accept error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('accept revision successful.');\n        });\n    };\n\n    $scope.rejectRevision = function() {\n      vm.formErrors = {};\n      vm.formMessages = {};\n      VariantGroupRevisions.rejectRevision($stateParams.variantGroupId, $stateParams.revisionId)\n        .then(function(response) {\n          vm.formMessages['rejectSuccess'] = true;\n        })\n        .catch(function(error) {\n          console.error('revision reject error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function (){\n          console.log('reject revision successful.');\n        });\n    };\n  }\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.add.evidence', []);\n  angular.module('civic.add')\n    .config(AddViewConfig)\n    .controller('AddViewController', AddViewController);\n\n  // @ngInject\n  function AddViewConfig($stateProvider) {\n    $stateProvider\n      .state('add', {\n        abstract: true,\n        url: '/add',\n        template: '<ui-view id=\"add-view\"></ui-view>',\n        controller: 'AddViewController',\n        onExit: /* @ngInject */ function($deepStateRedirect) {\n          $deepStateRedirect.reset();\n        }\n      });\n\n  }\n\n  // @ngInject\n  function AddViewController($log) {\n    console.log('AddViewController instantiated.');\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.add.evidence')\n    .config(AddEvidenceConfig)\n    .factory('AddEvidenceViewOptions', AddEvidenceViewOptions)\n    .controller('AddEvidenceController', AddEvidenceController);\n\n  // @ngInject\n  function AddEvidenceConfig($stateProvider) {\n    $stateProvider\n      .state('add.evidence', {\n        abstract: true,\n        url: '/evidence',\n        templateUrl: 'app/views/add/evidence/AddEvidenceView.tpl.html',\n        resolve: {\n          Evidence: 'Evidence'\n        },\n        controller: 'AddEvidenceController',\n        controllerAs: 'vm'\n      })\n      .state('add.evidence.basic', {\n        url: '/basic',\n        template: '<add-evidence-basic></add-evidence-basic>',\n        data: {\n          titleExp: '\"Add Evidence\"',\n          navMode: 'sub'\n        }\n      });\n  }\n\n  // @ngInject\n  function AddEvidenceViewOptions($state, $stateParams, Evidence) {\n    var state = {\n      baseParams: {},\n      baseState: '',\n      baseUrl: ''\n    };\n    var styles = {};\n\n    function init() {\n      angular.copy($stateParams, this.state.baseParams);\n      this.state.baseState = 'add.evidence';\n      this.state.baseUrl = $state.href(this.state.baseState, $stateParams);\n\n      angular.copy({\n        view: {\n          backgroundColor: 'pageBackground'\n        }\n      }, this.styles);\n    }\n\n    return {\n      init: init,\n      state: state,\n      styles: styles\n    };\n  }\n\n  // @ngInject\n  function AddEvidenceController(Evidence, AddEvidenceViewOptions) {\n    console.log('--------- AddEvidenceController loaded.');\n    AddEvidenceViewOptions.init();\n    this.type = 'EVIDENCE ITEM';\n    // can get references to the view model and view options\n    this.AddEvidenceViewModel = Evidence;\n    this.AddEvidenceViewOptions = AddEvidenceViewOptions;\n  }\n\n})();\n\n(function() {\n  'use strict';\n  angular.module('civic.add.evidence')\n    .directive('addEvidenceBasic', addEvidenceBasicDirective)\n    .controller('AddEvidenceBasicController', AddEvidenceBasicController);\n\n  // @ngInject\n  function addEvidenceBasicDirective() {\n    return {\n      restrict: 'E',\n      scope: {},\n      templateUrl: 'app/views/add/evidence/addEvidenceBasic.tpl.html',\n      controller: 'AddEvidenceBasicController'\n    }\n  }\n\n  // @ngInject\n  function AddEvidenceBasicController($scope,\n                                      Security,\n                                      Evidence,\n                                      AddEvidenceViewOptions,\n                                      formConfig) {\n    var vm = $scope.vm = {};\n\n    vm.evidenceModel = Evidence;\n    vm.evidenceOptions = AddEvidenceViewOptions;\n\n    vm.isAdmin = Security.isAdmin();\n    vm.isAuthenticated = Security.isAuthenticated();\n\n    vm.newEvidence = {\n      entrez_id: '',\n      variant_name: '',\n      description: '',\n      disease: '',\n      doid: '',\n      pubmed_id: '',\n      //pubchem_id: '',\n      drugs: [],\n      rating: Number(),\n      evidence_level: '',\n      evidence_type: '',\n      evidence_direction: '',\n      clinical_significance: '',\n      variant_origin: ''\n    };\n\n    //vm.newEvidence = {\n    //  entrez_id: '673',\n    //  variant_name: 'V600E',\n    //  description: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut vehicula sed lorem et cursus. In hac habitasse platea dictumst. Sed rhoncus, enim iaculis malesuada scelerisque, quam tortor porttitor tortor, id blandit tellus libero et lectus. Vestibulum nec purus eget purus suscipit ultricies non in dui.',\n    //  disease: 'Breast Cancer',\n    //  doid: '3908',\n    //  pubmed_id: '20979473',\n    //  drugs: [],\n    //  rating: 4,\n    //  evidence_level: 'C',\n    //  evidence_type: 'Predictive',\n    //  evidence_direction: 'Supports',\n    //  clinical_significance: 'Positive',\n    //  variant_origin: 'Somatic'\n    //};\n\n    vm.newEvidence.comment = { title: 'New Evidence Description', text:'' };\n    vm.newEvidence.drugs  = [];\n\n    vm.formErrors = {};\n    vm.formMessages = {};\n    vm.errorMessages = formConfig.errorMessages;\n    vm.errorPrompts = formConfig.errorPrompts;\n\n    function evidenceLevelChange(value, field, scope) {\n      console.log('***** evidenceLevelChanged.');\n    }\n\n    vm.formSelects = {\n      evidence_levels: [\n        { value: 'A', label: 'A - Validated'},\n        { value: 'B', label: 'B - Clinical'},\n        { value: 'C', label: 'C - Preclinical'},\n        { value: 'D', label: 'D - Inferential'},\n        { value: 'E', label: 'E - n of 1'}\n      ],\n      evidence_ratings: [\n        { value: 1, label: '1 - Poor' },\n        { value: 2, label: '2 - Adequate' },\n        { value: 3, label: '3 - Average' },\n        { value: 4, label: '4 - Good' },\n        { value: 5, label: '5 - Excellent'}\n      ],\n      clinical_significance: [\n        { value: 'Positive', label: 'Positive' },\n        { value: 'Better Outcome', label: 'Better Outcome' },\n        { value: 'Sensitivity', label: 'Sensitivity' },\n        { value: 'Resistance or Non-Response', label: 'Resistance or Non-Response' },\n        { value: 'Poor Outcome', label: 'Poor Outcome' },\n        { value: 'Negative', label: 'Negative' },\n        { value: 'N/A', label: 'N/A' }\n      ],\n\n      evidence_directions: [\n        { value: 'Supports', label: 'Supports'},\n        { value: 'Does Not Support', label: 'Does Not Support' }\n      ],\n      variant_origins: [\n        { value: 'Somatic', label: 'Somatic'},\n        { value: 'Germline', label: 'Germline' }\n      ]\n    };\n\n    vm.evidenceFields = [\n      {\n        key: 'evidence_type',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Evidence Type',\n          value: 'vm.newEvidence.evidence_type',\n          options: [\n            { value: 'Predictive', label: 'Predictive' },\n            { value: 'Diagnostic', label: 'Diagnostic' },\n            { value: 'Prognostic', label: 'Prognostic' }\n          ],\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Type of clinical outcome associated with the evidence statement.',\n          onChange: evidenceLevelChange\n        }\n      },\n      {\n        key: 'entrez_id',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Gene Entrez ID',\n          value: 'vm.newEvidence.entrez_id',\n          minLength: 32,\n          helpText: 'Entrez Gene ID (e.g., 673 for BRAF)'\n        }\n      },\n      {\n        key: 'variant_name',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Variant Name',\n          value: 'vm.newEvidence.variant_name',\n          minLength: 32,\n          helpText: 'Description of the type of variant (e.g., V600E, BCR-ABL fusion, Loss-of-function, exon 12 mutations). Should be as specific as possible (i.e., specific amino acid changes).'\n        }\n      },\n      {\n        key: 'variant_origin',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Variant Origin',\n          value: 'vm.newEvidence.variant_origin',\n          options: vm.formSelects.variant_origins,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Origin of variant'\n        }\n      },\n      {\n        key: 'disease',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Disease',\n          value: 'vm.newEvidence.disease',\n          minLength: 32,\n          helpText: 'Enter the disease or subtype that is associated with this evidence statement. This should be a disease in the disease-ontology that carries a DOID (e.g., 1909 for melanoma). If the disease to be entered is not in the disease ontology, enter it as free text. '\n        }\n      },\n      {\n        key: 'doid',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'DOID',\n          value: 'vm.newEvidence.doid',\n          minLength: 8,\n          length: 8,\n          helpText: 'Disease Ontology ID of the specific disease or disease subtype associated with the evidence statement (e.g., 1909 for melanoma).'\n        }\n      },\n      {\n        key: 'description',\n        type: 'horizontalTextareaHelp',\n        templateOptions: {\n          rows: 5,\n          label: 'Description',\n          value: 'vm.newEvidence.description',\n          minLength: 32,\n          helpText: 'Description of evidence from published medical literature detailing the association of or lack of association of a variant with diagnostic, prognostic or predictive value in relation to a specific disease (and treatment for predictive evidence). Data constituting protected health information (PHI) should not be entered. Please familiarize yourself with your jurisdiction\\'s definition of PHI before contributing.'\n        }\n      },\n      {\n        key: 'pubmed_id',\n        type: 'horizontalInputHelp',\n        templateOptions: {\n          label: 'Pubmed Id',\n          value: 'vm.newEvidence.pubmed_id',\n          minLength: 8,\n          length: 8,\n          helpText: 'PubMed ID for the publication associated with the evidence statement (e.g. 23463675)'\n        }\n      },\n      {\n        key: 'drugs',\n        type: 'multiInput',\n        templateOptions: {\n          label: 'Drug Names',\n          inputOptions: {\n            type: 'input'\n          },\n          helpText: 'For predictive evidence, specify one or more a drug name. Drug(s) specified must possess a PubChem ID (e.g., 44462760 for Dabrafenib).'\n        }\n      },\n      //{\n      //  key: 'pubchem_id',\n      //  type: 'horizontalInputHelp',\n      //  templateOptions: {\n      //    label: 'Pubchem Id',\n      //    value: 'vm.newEvidence.pubchem_id',\n      //    helpText: 'For predictive evidence, the PubChem ID for relevant drug (e.g., 44462760 for Dabrafenib).'\n      //  }\n      //},\n      {\n        template: '<hr/>'\n      },\n      {\n        key: 'evidence_level',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Evidence Level',\n          value: 'vm.newEvidence.rating',\n          options: vm.formSelects.evidence_levels,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Description of the study performed to produce the evidence statement'\n        }\n      },\n      {\n        key: 'rating',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Rating',\n          options: vm.formSelects.evidence_ratings,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: [\n                   '<p>Please rate your evidence according to the following scale, basing your subjective evaluation on the following guidelines:</p>',\n                   '<ul>',\n                   '<li><strong>One Star:</strong> Claim is not supported well by experimental evidence. Results are not reproducible, or have very small sample size. No follow-up is done to validate novel claims. </li>',\n                   '<li><strong>Two Stars:</strong> Evidence is not well supported by experimental data, and little follow-up data is available. Publication is from a journal with low academic impact. Experiments may lack proper controls, have small sample size, or are not statistically convincing.</li>',\n                   '<li><strong>Three Stars:</strong> Evidence is convincing, but not supported by a breadth of experiments. May be smaller scale projects, or novel results without many follow-up experiments. Discrepancies from expected results are explained and not concerning.</li>',\n                   '<li><strong>Four Stars:</strong> Strong, well supported evidence. Experiments are well controlled, and results are convincing. Any discrepancies from expected results are well-explained and not concerning.</li>',\n                   '<li><strong>Five Stars:</strong> Strong, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates. Evidence confirmed using separate methods.</li>'].join(\" \")\n        }\n      },\n      {\n        key: 'evidence_direction',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Evidence Direction',\n          value: 'vm.newEvidence.evidence_direction',\n          options: vm.formSelects.evidence_directions,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'A indicator of whether the evidence statement supports or refutes the clinical significance of an event.'\n        }\n      },\n      {\n        key: 'clinical_significance',\n        type: 'horizontalSelectHelp',\n        templateOptions: {\n          label: 'Clinical Significance',\n          value: 'vm.newEvidence.clinical_significance',\n          options: vm.formSelects.clinical_significance,\n          valueProp: 'value',\n          labelProp: 'label',\n          helpText: 'Positive or negative association of the Variant with predictive, prognostic, or diagnostic evidence types. If the variant was not associated with a positive or negative outcome, Not Applicable should be selected.'\n        },\n        data: {\n          predictiveOpts: [ 'Sensitivity', 'Resistance or Non-Resistance'],\n          prognosticOpts: ['Better Outcome', 'Poor Outcome'],\n          diagnosticOpts: ['Positive', 'Negative']\n        }\n      },\n      {\n        template: '<hr/>'\n      },\n      {\n        key: 'text',\n        type: 'horizontalTextareaHelp',\n        model: vm.newEvidence.comment,\n        templateOptions: {\n          rows: 5,\n          label: 'New Evidence Description',\n          value: 'text',\n          helpText: 'Please provide a short paragraph that supports the inclusion of this evidence item into the CIViC database.'\n        }\n      }\n    ];\n\n    vm.submit = function(newEvidence, options) {\n      newEvidence.evidenceId = newEvidence.id;\n      vm.formErrors = {};\n      vm.formMessages = {};\n      Evidence.add(newEvidence)\n        .then(function(response) {\n          console.log('add evidence success!');\n          vm.formMessages['submitSuccess'] = true;\n          // options.resetModel();\n        })\n        .catch(function(error) {\n          console.error('add evidence error!');\n          vm.formErrors[error.status] = true;\n        })\n        .finally(function(){\n          console.log('add evidence done!');\n        });\n    };\n  }\n\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/apiDocumentation.tpl.html',\n    '<div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><h3>CIViC API Documentation</h3><p>CIViC provides a simple API that can be utilized over HTTP in the programming language of your choice or even at the command line.</p><p>The CIViC API attempts to be RESTful whenever appropriate which hopefully makes it intuitive to use. There are three main entities in the system that a user may interact with: Genes, Variants, and Evidence Items. These entities form a hierarchy that is reflected in the API endpoints. A Gene has one or more Variants, each of which may have one or more Evidence Items.</p><br><h4>Genes</h4><hr><pre>\\n' +\n    '<strong>GET</strong> /api/genes\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id\\n' +\n    '    </pre><p>The genes endpoint can be used to get either a list of all genes in the system, or more detailed information for a single gene using an Entrez id in the url string. As an example, here is (clickable) sample request for the gene \"ALK\" (Entrez id: 238)</p><pre>\\n' +\n    '<strong>GET</strong> <a href=\"/api/genes/238\" target=\"_blank\">/api/genes/238</a>\\n' +\n    '    </pre><p>The next two entities, Variants and Evidence Items, do not have unambiguous identifiers outside of CIViC (such as Entrez IDs) so API calls will use their internally assigned CIViC IDs. You can always use the API call one level up the hierarchy to retrieve a list of IDs for the entity you are interested in. For instance, the genes endpoint will return a list of Variant IDs for that Gene.</p><br><h4>Variants</h4><hr><pre>\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id/variants\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id/variants/:variant_id\\n' +\n    '    </pre><p>The variants endpoint can be used to retrieve a list of all variants for a single gene (using an Entrez ID), or a more detailed view of a specific variant (using the Entrez ID and variant ID).</p><pre>\\n' +\n    '<strong>GET</strong> <a href=\"/api/genes/238/variants/5\" target=\"_blank\">/api/genes/238/variants/5</a>\\n' +\n    '    </pre><br><h4>Evidence Items</h4><hr><pre>\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id/variants/:variant_id/evidence_items\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id/variants/:variant_id/evidence_items/:evidence_item_id\\n' +\n    '    </pre><p>The evidence items endpoint can be used to retrieve a list of all evidence items for a single variant (using an Entrez ID and variant ID), or a more detailed view of a specific evidence_item (using the Entrez ID, variant ID, and evidence item ID).</p><pre>\\n' +\n    '<strong>GET</strong> <a href=\"/api/genes/238/variants/5/evidence_items/9\" target=\"_blank\">/api/genes/238/variants/5/evidence_items/9</a>\\n' +\n    '    </pre><br><h4>Other Features</h4><hr><pre>\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id/comments\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id/revisions\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id/suggested_changes\\n' +\n    '<strong>GET</strong> /api/genes/:entrez_id/suggested_changes/:change_id/comments\\n' +\n    '    </pre><p>Each of the three main entities in the system (Genes, Variants, and Evidence Items) also support additional endpoints for comments, version history, and suggested changes. Suggested changes can also have comments themselves. These endpoints can be accessed by adding the appropriate resource name (comments, revisions, suggested_changes) to the end of the route for the entity that you are interested in. For example, to get a list of revisions for the gene \"ALK\":</p><pre>\\n' +\n    '<strong>GET</strong> <a href=\"/api/genes/238/revisions\" target=\"_blank\">/api/genes/238/revisions</a>\\n' +\n    '    </pre><p>We are working on additional API support and documentation. Soon, you will be able to do anything you do from the site (add comments, suggest new evidence items, etc) directly from the API.</p></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/authTest.tpl.html',\n    '<h1>Requires Auth</h1><p>{{ loadedMsg }}</p>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/collaborate.tpl.html',\n    '<div class=\"row\" style=\"padding-top: 16px;\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><div class=\"row\"><div class=\"col-xs-6\"><h3 class=\"col-title\">Why CIViC?</h3><p>CIViC is an open access, open source, community-driven web resource for Clinical Interpretation of Variants in Cancer. Our goal is to enable precision medicine by providing an educational forum for dissemination of knowledge and active discussion of the clinical significance of cancer genome alterations.</p><h3 class=\"col-title\">How you can contribute:</h3><p>There are several mechanisms by which you can make a contribution to this important problem:</p><ol><li><strong>Consume</strong><br>Make use of the community-created content in your own research. All CIViC data and source code are provided freely for almost any use.</li><li><strong>Comment</strong><br>Participate in an ongoing discussion in an effort to reach community consensus on the appropriate clinical action(s) for a genomic event.</li><li><strong>Correct</strong><br>Submit a correction to any details about a genomic event, evidence statement or interpretation.</li><li><strong>Create</strong><br>Propose a new genomic variant (single nucleotide substitution, structural variant, gene fusion, etc), add evidence statements that support clinical actions assocated with such variants, or help create a synthesized interpretation or summary of the corpus of evidence for a variant.</li></ol><p>Before commenting, correcting, or creating please visit the <a ui-sref=\"help\">help</a> and <a ui-sref=\"faq\">FAQ</a> pages to learn more about the CIViC data model and <a ui-sref=\"browse\">browse the existing content</a> for examples.</p></div><div class=\"col-xs-6\"><h3 class=\"col-title\">CIViC principles</h3><ul><li>We believe that the interpretations of clinical actionability required to enable precision medicine should be freely available and openly discussed across a diverse community.</li><li>An interdisciplinary approach is needed to combine the expertise of genome scientists and health care providers, whose efforts are often isolated.</li><li>Content should be created with transparency, kept current, be comprehensive, track provenance, and acknowledge the efforts of creators.</li><li>The interface should be both structured enough to allow computational data mining and agile enough to handle the product of openly-debated, human interpretation.</li><li>CIViC is committed to provide unencumbered and efficient access to community-driven curation and interpretation of cancer mutations. Curated knowledge will remain free and can be accessed anonymously without login unless the user wishes to contribute to content.</li><li>To encourage both academic and commercial engagement CIViC is released with minimal restrictions under a Creative Commons license (<a href=\"https://creativecommons.org/licenses/by/4.0/\">CC BY 4.0</a>). No fees or exclusive access will be introduced. While sharing improvements is strongly encouraged, the data can be adopted and used for nearly any purpose including the creation of commercial applications derived from the knowledge. We require only that attribution be given to the community that created the content.</li></ul></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/contact.tpl.html',\n    '<div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><div class=\"row\" style=\"padding-top: 16px;\"><div class=\"col-xs-6\"><dl><dt>Nicholas Spies - Lead Curator</dt><dd><a href=\"https://www.linkedin.com/pub/nicholas-spies/49/699/75a\">LinkedIn profile</a></dd><br><dt>Kilannin Krysiak, PhD - Lead Curator</dt><dd><a href=\"http://genome.wustl.edu/people/individual/kilannin-krysiak/\">Genome Institute profile</a></dd><br><dt>Benjamin Ainscough - Curator</dt><dd><a href=\"http://genome.wustl.edu/people/individual/benjamin-ainscough/\">Genome Institute profile</a></dd><br><dt>Adam Coffman - Lead Web/Software (Back End) Developer</dt><dd><a href=\"https://github.com/acoffman\">GitHub Profile</a></dd><br><dt>Josh McMichael - Lead User Experience (Front End) Developer</dt><dd><a href=\"http://genome.wustl.edu/people/individual/joshua-mcmichael/\">Genome Institute profile</a></dd><br><dt>Other Curators</dt><dd>Mayank Choudhary, Jason Kunisaki, Deng Pan</dd><br><dt>Other Developers</dt><dd><a href=\"https://github.com/JonChristensen\">Jon Christensen</a>, <a href=\"https://github.com/gkarthik\">Karthik Gangavarapu</a></dd></dl></div><div class=\"col-xs-6\"><dl><dt>Elaine Mardis, PhD - PI/Mentor, Funding</dt><dd><a href=\"http://genome.wustl.edu/people/individual/elaine-mardis/\">Genome Institute profile</a></dd><br><dt>Rick Wilson, PhD - PI/Mentor, Funding</dt><dd><a href=\"http://genome.wustl.edu/people/individual/richard-wilson/\">Genome Institute profile</a></dd><br><dt>Malachi Griffith, PhD - Creator, Curator, PI/Mentor</dt><dd><a href=\"http://genome.wustl.edu/people/individual/malachi-griffith/\">Genome Institute profile</a></dd><br><dt>Obi Griffith, PhD - Creator, Curator, PI/Mentor, Funding</dt><dd><a href=\"http://genome.wustl.edu/people/individual/obi-griffith/\">Genome Institute profile</a></dd><br><br><dt>News and updates:</dt><dd>Please subscribe by emailing the mailing list:<br><a href=\"mailto:civic-news-subscribe@genome.wustl.edu\">civic-news-subscribe@genome.wustl.edu</a></dd><br><dt>General inquiries:</dt><dd>Please email <a href=\"mailto:civic-help@genome.wustl.edu\">civic-help@genome.wustl.edu</a></dd><br><dt>Bug reports and feature requests:</dt><dd>Please create an issue in the <a href=\"https://github.com/genome/civic-server/issues\">civic-server</a> or <a href=\"https://github.com/genome/civic-client/issues\">civic-client</a> github repos as appropriate</dd><br></dl></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/faq.tpl.html',\n    '<div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><h2>Frequently Asked Questions</h2><p><strong><i>What is CIViC?</i></strong><br>CIViC is an open access, open source, community-driven web resource for Clinical Interpretation of Variants in Cancer. Our goal is to enable precision medicine by providing an educational forum for dissemination of knowledge and active discussion of the clinical significance of cancer genome alterations.</p><p><strong><i>What is precision medicine?</i></strong><br>Precision medicine refers to the use of prevention and treatment strategies that are tailored to the unique features of each individual and their disease. In the context of cancer this might involve the identification of specific mutations known to predict response to a targeted therapy. You can read more about this topic in summaries from the <a href=\"http://www.whitehouse.gov/the-press-office/2015/01/30/fact-sheet-president-obama-s-precision-medicine-initiative\">White House</a> and the <a href=\"http://www.nejm.org/doi/full/10.1056/NEJMp1500523#t=article\">New England Journal of Medicine</a>.</p><p><strong><i>Why crowdsourcing?</i></strong><br>The rapid expansion of the biomedical literature presents an intractable challenge for investigators and clinicians to interpret and synthesize, in real time, the complete array of knowledge available for each cancer-associated genomic variant into a clinically-relevant interpretation. Efforts to curate the clinical importance of variants have been undertaken by a diverse, but fragmented, community of individuals. Crowdsourcing leverages the resources of individuals to produce a centralized platform for this diverse community to discuss and share findings in their specialities. CIViC also serves as a platform for these contributors keep up to date on recent advances.</p><p><strong><i>Who should be using CIViC?</i></strong><br>CIViC is intended to bring together a diverse group of individuals interested in the clinical application and advancement of cancer genomics including health professionals (oncologists, pathologists and other clinicians), researchers (cancer genome and data scientists), and patient advocates.</p><p><strong><i>What is a <b>Variant</b>?</i></strong><br>A variant in CIViC is any genomic alteration associated with cancer. This includes single nucleotide variants (SNVs), insertion/deletion events (indels), copy number alterations (CNV\\'s), structural variants (SVs), transcript fusions, and other genomic/molecular events with cancer associations, including germline variants.</p><p><strong><i>What is an <b>Evidence Statement</b>?</i></strong><br>An evidence statement is the result of an experiment, trial or study from a published literature source. It captures a variant\\'s impact on clinical action, which can be predictive of therapy, correlated with prognostic outcome, or inform disease diagnosis. A single citation can be the source of multiple evidence statments.</p><p><strong><i>How is this information organized?</i></strong><br>An in-depth description of the data model behind CIViC can be found <a ui-sref=\"help\">here</a>.</p><p><strong><i>What information is currently in CIViC?</i></strong><br>CIViC currently houses over 450 evidence statements about 125 variants in 50 genes across 40 cancer types, and these numbers are growing rapidly with your help!</p><p><strong><i>How do I contribute information?</i></strong><br>The <a ui-sref=\"collaborate\">Collaborate</a> tab details the curation process, with links for adding and editing information.</p><p><strong><i>My favorite Gene/Variant is not in CIViC?!?</i></strong><br>The manual curation involved in adding evidence statements means we have not been able to populate a published evidence statement from every variant or gene of interest. This is precisely why we need community-driven efforts to grow this database. In order for a gene or variant to appear in CIViC, it must have an evidence statement associated with it. To add evidence statements and begin the discussion about your gene/variant of interest, go <a ui-sref=\"collaborate\">here</a>!</p><p><strong><i>What kinds of variants belong in CIViC? What does not?</i></strong><br>In order to be accepted by CIViC, a variant must be related to cancer and have some *clinical* relevance. Relevance to cancer biology alone is insufficient unless there is also some documented relationship between the variant and diagnosis, prognosis, or response to a specific treatment. Variants related to diseases other than cancer should not be entered. Most variants in CIViC are somatic but germline variants are also welcome (as long as they have diagnostic, prognostic or predictive value). The quality of evidence suggesting clinical relevance of a variant may vary considerably. Before contributing to CIViC please review the <a ui-sref=\"help\">data model</a>.</p><p><strong><i>May I enter unpublished results from n-of-1 observations?</i></strong><br>At this time, a publication is considered a minimum requirement for all evidence statements in CIViC. N-of-1 results from early stage clinical trials or patients treated under compassionate use doctrines are allowed, but only if a case report has been published in a peer reviewed journal. We are considering options for centers that wish to use a local instance of CIViC to capture individual patient observations.</p><p><strong><i>Why must my changes be approved by a moderator before I can see them?</i></strong><br>In an effort to ensure quality (and prevent automated spam), we require that edits be submitted to the review queue before they are shown on the live server. Moderators are used for this review step to protect the CIViC resource and will approve your changes as soon as possible.</p><p><strong><i>What is a Disease Ontology ID (DOID)?</i></strong><br>In order to provide a structured representation of the diseases associated with evidence statements, we ask that you provide a Disease Ontology ID from <a href=\"http://disease-ontology.org/\">disease-ontology.org</a>. This allows for consistent representation and minimized ambiguity when referring to diseases. Such ontologies also support more flexible data queries that allow disease groupings ranging from generic terms to highly specific subtypes.</p><p><strong><i>What is a PubChem ID (PCID)?</i></strong><br>Providing a PubChem ID with your evidence statement allows us to minimize ambiguity within drug naming. As a default, drug compound names are used instead of branded trade names in an effort to be as consistent across experiment types as possible. PubChem ID\\'s can be found by searching the compound <a href=\"https://pubchem.ncbi.nlm.nih.gov/\">here</a>. However, when a PCID is not available, \"N/A\" is accepted.</p><p><strong><i>Where does this information come from? Can I submit my abstract?</i></strong><br>The information in CIViC is derived from peer-reviewed, published literature. Every evidence item currently requires a citation from a PubMed ID. This means that conference abstracts are not supported until they are published and peer-reviewed with a PubMed ID.</p><p><strong><i>What does the \"Alpha\" label on CIViC mean?</i></strong><br>This is in reference to the current software release state of CIViC. The \"Alpha\" state indicates we are currently in the software testing phase with additional features actively being added.</p><p><strong><i>What if a drug is shown to have a negative effect on patients with a variant? Or the study was inconclusive?</i></strong><br>The data model, specifically the Evidence Direction field, is used to indicate whether the study supports or refutes (including inconclusive determinations) any interaction between the variant and a clinical action or result. The Clinical Significance field indicates the type of effect the variant is determined to have on clinical results within the evidence statement as having a positive, negative or neutral/no impact. These descriptions provide human readible interpretations of evidence statements that either support or refute sensitivity or resistance predictions to therapeutics (or other clinical outcomes). For more detailed definitions and specific examples, please review the data model <a ui-sref=\"help\">here</a>.</p><p><strong><i>My evidence statement disagrees with evidence from another source, should I still add it?</i></strong><br>Absolutely. CIViC provides a forum for discussion of disagreements in the field or literature. Simply log in, go to the \"Variant Talk\" or \"Evidence Talk\" pages, and discuss this disagreement with the community.</p><p><strong><i>I don\\'t want to add evidence statements, can I still contribute?</i></strong><br>Yes. Evaluation of the literature is a collaborative effort. If you don\\'t want to add new evidence you can rate, edit or discuss existing evidence. You can also help to make sure the Variant Summary is an effective, consise, and accurate summary of the current set of evidence statements for each variant.</p><p><strong><i>What is MyGene.info?</i></strong><br><a href=\"http://mygene.info/\">MyGene.info</a> is a web service that allows simple query and retrieval of gene annotation data. We use it in CIViC to automatically import gene details from Entrez Gene (<a href=\"http://www.ncbi.nlm.nih.gov/gene\">http://www.ncbi.nlm.nih.gov/gene</a>) such as gene name, synonyms, protein domains and pathways. MyGene.info was created and is maintained by the <a href=\"http://sulab.org/\">Su Lab</a> (at The Scripps Research Institute).</p><p><strong><i>Is there an API I can access?</i></strong><br>Yes! Please visit the <a ui-sref=\"api-documentation\">API documentation</a> for more details.</p><p><strong><i>What is the difference between \"Supports a Negative association\" and \"Does not support a Positive association\"?</i></strong><br>This can be confusing. We have reserved \"Does not support - Positive\" for statements that contradict previous statements that are supporting positive associations. For example, they would read \"Contrary to the previous study which found this mutation sensitive to drug X, this study reported no effect.\". The information that this study \"Does not support\" the prior study\\'s conclusion is what we are trying to capture with these classifications.</p><p><strong><i>How is CIViC licensed?</i></strong><br>The content of CIViC, hosted by <a href=\"http://genome.wustl.edu/\">The McDonnell Genome Institute at Washington University School of Medicine</a> is licensed under a <a href=\"http://creativecommons.org/licenses/by/4.0/\">Creative Commons Attribution 4.0 International License</a> and the source code for the CIViC <a href=\"https://github.com/genome/civic-server\">server</a> and <a href=\"https://github.com/genome/civic-client\">client</a> is licensed under the <a href=\"http://opensource.org/licenses/MIT\">MIT License</a>.</p></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/glossary.tpl.html',\n    '<div class=\"glossary\"><div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><dl><dt ng-repeat-start=\"(key, value) in glossary.terms\">{{ key }}</dt><dd ng-repeat-end=\"\">{{ value }}</dd></dl></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/help.tpl.html',\n    '<div class=\"row\"><div class=\"col-xs-12 col-xs-offset-0 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2\"><h2>Introduction to the CIViC Interface</h2><p><br>To learn more about the presentation of the information in CIViC, watch this video tutorial!<br><br><iframe width=\"800\" height=\"420\" src=\"https://www.youtube.com/embed/KImI_oNYtyc\" frameborder=\"0\" allowfullscreen=\"\"></iframe><br>This is the first installment in a four part series of the main CIViC functionality. Stay tuned for more videos!<br></p><h2>Understanding the CIViC Data Model</h2><p>At the heart of CIViC is the clinical evidence statement. The clinical evidence statement is a piece of information that has been manually curated from trustable medical literature about a variant or genomic \\'event\\' that has implications in cancer diagnosis, prognosis, or predictive response to therapy. For example, “Patients with BRAF V600 mutations respond well to the drug dabrafenib”. A variant may be a single nucleotide substitution, a small insertion or deletion, a chromosomal rearrangement, an RNA gene fusion, an RNA expression pattern (e.g. over-expression), and others. Each clinical evidence statement corresponds to a single citable publication.<br><br>The following tables define the minimal components and definitions required for a CIViC evidence statement. Once clinical evidence statements for a variant have been curated, a summary is manually generated describing the variant\\'s significance in cancer, along with current treatment methods. A gene level summary then synthesizes the variant summaries, and adds important gene-level information. Each variant can belong to one or more variant groups, these act to combine functionally similar variants into a single entity. For example, \\'FGFR Fusions\\' is a group that contains several gene fusions where FGFR2 (or FGFR3) is involved in a fusion with various 3\\' partner genes, and \\'Imatinib Resistance Mutations\\' is a group of variants that confer resistance to imatinib treatment.</p><h3>Minimum Requirements for Clinical Evidence Statements</h3><table class=\"table table-striped table-condensed table-responsive table-bordered\"><col width=\"167.5\"><col width=\"800\"><col width=\"500\"><tr><th>Data Type</th><th>Description</th><th>Example</th></tr><tr><td>Gene</td><td>Gene implicated (Entrez gene ID)</td><td>ESR1 (Entrez ID: 2099)</td></tr><tr><td>Variant</td><td>Event (Single nucleotide variant, Insertion/deletion, Gene fusion, Copy number variant, etc.) implicated</td><td>Y537S</td></tr><tr><td>Disease</td><td>Specific disease or disease subtype that is associated with this event and its clinical implication (Disease Ontology ID)</td><td>Estrogen-receptor positive breast cancer (DOID: 0060075)</td></tr><tr><td>Evidence type</td><td>Category of clinical action implicated by event</td><td>Predictive - The variant is predictive of sensitivity or resistance to a therapeutic.</td></tr><tr><td>Evidence level</td><td>The type of experiment from which the evidence is curated. From inferential, to proven association in clinical medicine.</td><td>Level B - Clinical Evidence</td></tr><tr><td>Evidence direction</td><td>An indicator of whether the evidence statement supports or refutes the clinical significance of an event</td><td>Supports - the evidence supports the clinical significance</td></tr><tr><td>Drug</td><td>For predictive evidence, indicates the therapy for which sensitivity or resistance is indicated (With PubChem ID if applicable)</td><td>Hormone therapy (PCID: N/A)</td></tr><tr><td>Clinical significance</td><td>Positive or negative association with treatment or diagnostic/prognostic end point</td><td>Negative - mutation is associated with resistance to therapy</td></tr><tr><td>Text summary</td><td>Human readable interpretation. Free-form text summary of this event’s effect on cancer and potential clinical interpretations. This interpretation is the synthesis of all other information about an event and its relevance to clinical action and should be the living product of active discussion</td><td>Studies suggest that ligand-binding-domain ESR1 mutants mediate clinical resistance to hormonal therapy and suggest that more potent estrogen receptor antagonists may be of substantial therapeutic benefit</td></tr><tr><td>Citation</td><td>Literature where the event was described/explored (PubMed ID)</td><td>PMID: 24185512</td></tr><tr><td>Trust Rating</td><td>A rating on a 5-star scale, portraying the curators trust in the experiments from which the evidence is curated.</td><td>5-stars - Strong, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates.</td></tr></table><h3>Breaking Down the Evidence Statement</h3><p>When curating evidence statements from published sources, to discern whether a variant has a \"clinical interpretation\", we use the data model below. Evidence statements can either be predictive of drug response, be correlated with prognostic outcome, or contribute to disease diagnosis. If an evidence item can not be placed in one of these categories, it likely lies outside of the scope of CIViC. However, published statements about a gene or variant that cannot be placed within these categories can still be added to the free-form clinical summary and variant summary.<table class=\"table table-striped table-condensed table-responsive table-bordered\"><col width=\"150\"><col width=\"250\"><col width=\"400\"><col width=\"920\"><tr><th>Evidence type</th><th>Evidence direction</th><th>Clinical significance</th><th>Example</th></tr><tr><td rowspan=\"6\"><br><br><br><br><br><b>Predictive:</b><br><br><i>Evidence pertaining to a variant’s effect on therapeutic response</i></td><td rowspan=\"3\">Supports:<br><br>The experiment or study supports this variant’s response to a drug</td><td>Sensitivity:<br>Variant is associated with positive response to treatment (e.g. sensitivity to drug)</td><td>Breast cancer cell lines with a PIK3CA H1047R mutation showed increased sensitivity to CH5132799 compared to cells with wild-type PIK3CA gene.</td></tr><tr><td>N/A:<br>Variant does not inform clinical action</td><td>OSI-906, an IGF1R/INSR inhibitor, does not have a significant effect on chemotherapy resistant castration-resistant prostate cancer cell lines.</td></tr><tr><td>Resistance or Non-Response:<br>Variant is associated with negative treatment response (e.g. resistance to drug)</td><td>In NSCLC, Exon 2 KRAS mutations were associated with resistance to the EGFR kinase inhibitors gefitinib and erlotinib.</td></tr><tr><td rowspan=\"3\">Does not support:<br><br>The experiment or study does not support, or was inconclusive of an interaction between the variant and a drug</td><td>Sensitivity:<br>Variant is associated with positive response to treatment (e.g. sensitivity to drug)</td><td>BRAF V600E mutation does not predict response in patients treated with dacarbazine or temozolomide.</td></tr><tr><td>N/A:<br>Variant does not inform clinical action</td><td>There is no statistical difference in progression free survival between lung cancer patients with or without an EGFR L858R mutation following treatment with gefitinib or erlotinib.</td></tr><tr><td>Resistance or Non-Response:<br>Variant is associated with negative treatment response (e.g. resistance to drug)</td><td>In the setting of BRAF(V600E), NF1 loss resulted in elevated activation of RAS-GTP but does not show resistance to MEK inhibitors.</td></tr><tr><td rowspan=\"4\"><br><br><br><b>Diagnostic:</b><br><br><i>Evidence pertaining to a variant’s impact on patient diagnosis</i></td><td rowspan=\"2\">Supports:<br><br>The experiment or study supports variant’s impact on the diagnosis of disease or subtype</td><td>Positive:<br>Variant is associated with diagnosis of disease or subtype</td><td>BRAF V600E is shown to be associated with the tall-cell variant of papillary thyroid carcinoma (PTC).</td></tr><tr><td>Negative:<br>Variant is associated with the lack of diagnosis of disease or subtype</td><td>JAK2 V617F is not associated with lymphoid leukemia (B-lineage ALL, T-ALL or CLL).</td></tr><tr><td rowspan=\"2\">Does not support:<br><br>The experiment or study does not support the variant’s impact on diagnosis of disease or subtype</td><td>Positive:<br>Variant is associated with diagnosis of disease or subtype</td><td>Frequency of NPM1 mutations was not different in normal karyotype acute myeloid leukemia patients with CEPBA, NRAS or KIT mutations.</td></tr><tr><td>Negative:<br>Variant is associated with the lack of diagnosis of disease or subtype</td><td>Study 1 found that, contrary to what was previously believed, mutation X does NOT in fact show a correlation with disease subtype A.</td></tr><tr><td rowspan=\"6\"><br><br><br><b>Prognostic:</b><br><br><i>Evidence pertaining to a variant’s impact on disease progression, severity, or patient survival</i></td><td rowspan=\"3\">Supports:<br><br>The experiment or study supports a variant’s impact on prognostic outcome</td><td>Good Outcome:<br>Variant is associated with a better overall patient outcome</td><td>In AML, patients with IDH2 R140K mutation have improved overall survival compared to those with wild-type IDH2.</td></tr><tr><td>N/A:<br>Variant does not inform clinical action</td><td>In renal clear cell carcinoma, patients with VHL mutations did not have a significant impact on cancer specific survival.</td></tr><tr><td>Poor Outcome:<br>Variant is associated with a worse overall patient outcome</td><td>WT1 mutations were associated with shorter overall and disease free survival in a cohort of cytogenetically normal, young AML patients.</td></tr><tr><td rowspan=\"3\">Does not support:<br><br>The experiment or study does not support a prognostic association between variant and outcome</td><td>Good Outcome:<br>Variant is associated with a better overall patient outcome</td><td>Mutation X was not shown to be associated with improved overall survival.</td></tr><tr><td>N/A:<br>Variant does not inform clinical action</td><td>Size of the FLT3-ITD mutant duplication had no impact on overall survival or relapse rate.</td></tr><tr><td>Poor Outcome:<br>Variant is associated with a worse overall patient outcome</td><td>Unlike other studies that suggest a poorer outcome, BRAF mutation in this study was not correlated with poorer prognosis in papillary thyroid cancer.</td></tr></table></p><h3>Evidence Levels: Overview</h3><p>Each evidence statement is the result of an experiment, trial or study in published literature. It is important to capture the nature of these experiments in the evidence entry. Evidence levels allow for the subject of an evidence item to be presented in a simple, standardized fashion.<table class=\"table table-striped table-condensed table-responsive table-bordered\"><col width=\"150\"><col width=\"300\"><col width=\"920\"><tr><th>Level of Evidence</th><th>Definition</th><th>Example</th></tr><tr><td>A - Validated association</td><td>Proven/consensus association in human medicine</td><td>\"AML with mutated NPM1\" is a provisional entity in WHO classification of acute myeloid leukemia (AML). This mutation should be tested for in clinical trials and is recommended for testing in patients with cytogentically normal AML.</td></tr><tr><td>B - Clinical evidence</td><td>Clinical trial or other primary patient data supports association</td><td>ATRA treatment did not effect overall survival in AML patients less than 60 years old with FLT3-ITD mutations.</td></tr><tr><td>C - Preclinical evidence</td><td>In vivo or in vitro models support association</td><td>Experiments showed that AG1296 is effective in triggering apoptosis in cells with the FLT3 internal tandem duplication.</td></tr><tr><td>D - Case study</td><td>Individual case reports from clinical journals.</td><td>A single patient with BRAF V600E/V600M bi-allelic mutation responded to the V600E drug dabrafenib.</td></tr><tr><td>E - Inferential association</td><td>Indirect evidence</td><td>Glioma cells harboring IDH1 mutation may be more susceptible to chemotherapy or radiotherapy due to their reduced ability to respond to oxidative stress.</td></tr></table></p><h3>Trust Ratings Explained</h3><p>In order to quickly discern how much trust curators and users have in a single evidence statement, a five star trust ratings system is used. Each evidence item is given a rating, from 1 to 5 stars, based on the quality of the source from which the evidence is curated. These ratings depend on a number of factors, including journal impact, control quality, orthogonal validation, and reproducibility.<table class=\"table table-striped table-responsive table-bordered\"><col width=\"45\"><col width=\"600\"><tr><th>Trust Rating</th><th>Definition</th></tr><tr><td>1 star</td><td>Claim is not supported well by experimental evidence. Results are not reproducible, or have very small sample size. No follow-up is done to validate novel claims.</td></tr><tr><td>2 stars</td><td>Evidence is not well supported by experimental data, and little follow-up data is available. Publication is from a journal with low academic impact. Experiments may lack proper controls, have small sample size, or are not statistically convincing.</td></tr><tr><td>3 stars</td><td>Evidence is convincing, but not supported by a breadth of experiments. May be smaller scale projects, or novel results without many follow-up experiments. Discrepancies from expected results are explained and not concerning.</td></tr><tr><td>4 stars</td><td>Strong, well supported evidence. Experiments are well controlled, and results are convincing. Any discrepancies from expected results are well-explained and not concerning.</td></tr><tr><td>5 stars</td><td>Strong, well supported evidence from a lab or journal with respected academic standing. Experiments are well controlled, and results are clean and reproducible across multiple replicates. Evidence confirmed using independent methods.</td></tr></table></p></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/home.tpl.html',\n    '<div class=\"home-view\"><div class=\"row\"><div class=\"col-xs-12 col-sm-6 discover\"><div class=\"row\"><div class=\"col-sm-12 col-md-6 icon\"><a ui-sref=\"browse\"><img src=\"assets/images/icon_discover.svg\" alt=\"Discover\" class=\"img-responsive\"></a></div><div class=\"col-sm-12 col-md-6 blurb\"><p>Discover supported clinical intepretations of mutations related to cancer.</p></div></div></div><div class=\"col-xs-12 col-sm-6 collaborate\"><div class=\"row\"><div class=\"col-sm-12 col-md-6 icon\"><a ui-sref=\"collaborate\"><img src=\"assets/images/icon_collaborate.svg\" alt=\"Discover\" class=\"img-responsive\" width=\"90%\"></a></div><div class=\"col-sm-12 col-md-6 blurb\"><p>Collaborate with colleagues to add variants and support for cancer-related mutations.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 disclaimer-block\"><div class=\"disclaimer\" style=\"margin-bottom: 32px\"><p>Precision medicine refers to the use of prevention and treatment strategies that are tailored to the unique features of each individual and their disease. In the context of cancer this might involve the identification of specific mutations shown to predict response to a targeted therapy. The biomedical literature describing these associations is large and growing rapidly. Realizing precision medicine will require this information to be centralized, debated and interpreted for application in the clinic. Currently these interpretations exist largely in private or encumbered databases resulting in extensive repetition of effort. CIViC is an open access, open source, community-driven web resource for Clinical Interpretation of Variants in Cancer. Our goal is to enable precision medicine by providing an educational forum for dissemination of knowledge and active discussion of the clinical significance of cancer genome alterations.</p></div><div class=\"disclaimer\" style=\"margin-bottom: 32px\"><p><strong>Development Disclaimer:</strong> CIViC is under heavy development, therefore you will more likely than not experience bugs, unexpected behavior, missing features, and general instability. We will also be periodically dropping and re-importing the database, so any comments or updates you make while CIViC is under development will likely be lost.</p></div><div class=\"disclaimer\"><p><strong>Medical Disclaimer: This resource is intended for purely research purposes. It should not be used for emergencies or medical or professional advice.</strong></p><p>CIViC is a community-edited forum for discussion and interpretation of peer-reviewed publications pertaining to the clinical relevance of variants (or biomarker alterations) in cancer. These interpretations may include associations between molecular alterations (or lack of alteration) and one or more drugs, diagnoses, prognoses or other treatment decisions. These interpretations of clinical significance (or lack of clinical significance) are purely for research purposes. A finding of no interpretation does not necessarily indicate lack of relevance for any specific variant or biomarker alteration. Interpretations are not presented in ranked order of potential or predicted importance.These interpretations make no promise or guarantee of any clinical benefit (or lack of clinical benefit).</p><p>The civicdb.org (civic.genome.wustl.edu) website does not provide any medical or healthcare products, services or advice, and is not for medical emergencies or urgent situations. <strong>IF YOU THINK YOU MAY HAVE A MEDICAL EMERGENCY, CALL YOUR DOCTOR OR 911 IMMEDIATELY</strong>. Information contained on this website is not a substitute for a doctor\\'s medical judgment or advice. We recommend that you discuss your specific, individual health concerns with your doctor or health care professional.</p></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/pages/releases.tpl.html',\n    '<div class=\"releasesPage\"><div class=\"row\" ng-repeat=\"release in vm.releases\"><div class=\"col-xs-4\"><h3 ng-bind=\"release.note | capitalize\">Release Type</h3><ul class=\"nav nav-pills nav-stacked\"><li ng-repeat=\"fileName in release.fileNames\"><a ng-href=\"{{release.fileUrls[$index]}}\"><span class=\"glyphicon glyphicon-download-alt\" aria-hidden=\"true\"></span>&nbsp; <strong>{{ fileName }}</strong></a></li></ul></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/cancelButton.tpl.html',\n    '<a ng-click=\"cancel()\"><button type=\"button\" class=\"btn btn-default btn-md\">Cancel</button></a>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/civicLogo.tpl.html',\n    '<div class=\"civicLogo\"><a ui-sref=\"home\"><div ng-switch=\"\" on=\"$root.view.navMode\"><span ng-switch-when=\"home\"><img src=\"assets/images/CIViC_logo.png\" alt=\"CIViC: Clinical Interpretations of Variations in Cancer\" width=\"375\" height=\"240\" class=\"img-responsive\"></span> <span ng-switch-when=\"sub\"><img src=\"assets/images/CIViC_logo_sm.png\" alt=\"CIViC: Clinical Interpretations of Variations in Cancer\" width=\"155\" height=\"76\"></span></div></a></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/footerMenu.tpl.html',\n    '<div class=\"footerMenu\"><div class=\"pull-right\"><div class=\"footer-menu\"><ul><li ng-repeat=\"item in menuItems\" ui-sref-active=\"active\"><a ui-sref=\"{{ item.state}}\">{{ item.label }}</a></li></ul></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/headerSearch.tpl.html',\n    '<div class=\"headerSearch\" ng-show=\"$root.view.navMode == \\'home\\'\"><quick-search class=\"col-xs-8 col-md-12\"></quick-search><div class=\"col-xs-4 col-md-12\"><a class=\"btn btn-browse-margin btn-justified btn-block hidden-sm hidden-xs\" ui-sref=\"browse\">Browse CIViC Database</a> <a class=\"btn btn-browse btn-justified btn-block hidden-md hidden-lg\" ui-sref=\"browse\">Browse</a></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/loginToolbar.tpl.html',\n    '<div class=\"loginToolbar\"><div class=\"login-toolbar-lg hidden-xs hidden-sm\"><div ng-show=\"isAuthenticated()\" class=\"user-controls\"><div class=\"btn-group\" dropdown=\"\"><button type=\"button\" class=\"btn btn-xs btn-info\">{{ currentUser.name ? currentUser.name : currentUser.nickname }}</button> <button type=\"button\" class=\"btn btn-xs btn-info dropdown-toggle\" dropdown-toggle=\"\"><span class=\"caret\"></span></button><ul class=\"dropdown-menu\" role=\"menu\"><li><a class=\"small\" ng-click=\"logout(currentUrl)\">Sign Out</a></li><li ng-if=\"isAdmin()\" class=\"divider\"></li><li ng-if=\"isAdmin()\"><a class=\"small\" ng-href=\"{{adminUrl}}\">Admin Console</a></li></ul></div></div><div ng-hide=\"isAuthenticated()\" class=\"viewer-controls\"><button class=\"btn btn-xs btn-login\" ng-click=\"login()\">Sign In/Sign Up</button></div></div><div class=\"login-toolbar-sm hidden-md hidden-lg\"><div ng-show=\"isAuthenticated()\" class=\"user-controls\"><div class=\"btn-group\" dropdown=\"\"><button type=\"button\" class=\"btn btn-xs btn-info\">{{ currentUser.name ? currentUser.name : currentUser.nickname }}</button> <button type=\"button\" class=\"btn btn-xs btn-info dropdown-toggle\" dropdown-toggle=\"\"><span class=\"caret\"></span></button><ul class=\"dropdown-menu\" role=\"menu\"><li><a ng-click=\"logout(currentUrl)\">Sign Out</a></li><li ng-if=\"isAdmin()\" class=\"divider\"></li><li ng-if=\"isAdmin()\"><a class=\"small\" ng-href=\"{{adminUrl}}\">Admin Console</a></li></ul></div></div><div ng-hide=\"isAuthenticated()\" class=\"viewer-controls\"><button class=\"btn btn-xs btn-login\" ng-click=\"login()\">Sign In/Sign Up</button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/mainMenu.tpl.html',\n    '<div class=\"mainMenu\"><div class=\"main-menu-lg hidden-xs hidden-sm\"><ul><li ng-repeat=\"item in menuItems\" ui-sref-active=\"active\"><a ui-sref=\"{{ item.state}}\">{{ item.label }}</a></li><li><login-toolbar></login-toolbar></li></ul></div><div class=\"main-menu-sm hidden-md hidden-lg\"><ul class=\"main-menu-sm hidden-md hidden-lg\"><li ng-repeat=\"item in menuItems\" ui-sref-active=\"active\"><a ui-sref=\"{{ item.state}}\">{{ item.label }}</a></li><li style=\"position: relative;\"><login-toolbar></login-toolbar></li></ul></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/quickSearch.tpl.html',\n    '<div class=\"quickSearch\"><form class=\"form-horizontal\"><div class=\"form-group form-group-sm has-feedback\"><input type=\"text\" class=\"form-control input-sm\" ng-model=\"asyncSelected.model\" placeholder=\"Quick Search CIViC\" typeahead=\"gene as gene.label for gene in getVariants($viewValue)\" typeahead-loading=\"loadingGenes\" typeahead-on-select=\"onSelect($item, $model, $label)\" typeahead-append-to-body=\"true\"> <span ng-show=\"loadingGenes\" class=\"glyphicon glyphicon-refresh form-control-feedback\"></span></div></form></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/subheader.tpl.html',\n    '<div class=\"subheader\" ng-hide=\"$root.view.navMode == \\'home\\'\"><div class=\"container-fluid\"><div class=\"subheader-bg\"><div class=\"row\"><div class=\"col-xs-5\"><h1>{{ view.stateTitle }}</h1></div><div class=\"col-xs-3 search-sub-input\"><quick-search></quick-search></div><div class=\"col-xs-2 search-sub-btn\"><a type=\"button\" class=\"btn btn-sm btn-browse-sub btn-block\" ui-sref=\"browse\">Browse</a></div><div class=\"col-xs-2 search-sub-btn\"><span ng-switch=\"isAuthenticated()\"><span ng-switch-when=\"false\"><span tooltip=\"Please sign in to add Evidence\" tooltip-append-to-body=\"true\"><a type=\"button\" class=\"btn btn-sm btn-add-sub btn-block disabled\" ui-sref=\"add.evidence.basic\">Add Evidence</a></span></span> <span ng-switch-when=\"true\"><a type=\"button\" class=\"btn btn-sm btn-add-sub btn-block\" ng-disabled=\"$state.includes(\\'add.evidence\\')\" ui-sref=\"add.evidence.basic\">Add Evidence</a></span></span></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/directives/userImage.tpl.html',\n    '<div class=\"userImage\"><span ng-switch=\"ctrl.hasAvatar\"><span ng-switch-when=\"true\"><img ng-src=\"{{ctrl.user.avatar_url}}\" width=\"{{ ctrl.width }}\" height=\"{{ ctrl.height }}\"></span> <span ng-switch-default=\"\"><img ng-src=\"assets/images/default-user-img.jpg\" width=\"{{ ctrl.width }}\" height=\"{{ ctrl.height }}\"></span></span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/forms/multiInput.tpl.html',\n    '<div><div class=\"clearfix\"><div class=\"row\" style=\"margin-bottom:14px\" ng-repeat=\"item in model[options.key] track by $index\" ng-init=\"itemOptions = copyItemOptions()\"><div class=\"col-xs-10\"><formly-field class=\"no-padding\" options=\"itemOptions\" model=\"model[options.key]\" form=\"form\" index=\"$index\"></formly-field></div><div class=\"col-xs-2\" style=\"margin-top:6px\"><a ng-click=\"model[options.key].splice($index, 1)\" class=\"btn btn-danger btn-sm btn-block\"><strong>X</strong></a></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><button type=\"button\" class=\"btn btn-success btn-sm btn-block\" ng-click=\"model[options.key].push(\\'\\')\">Add Item</button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/browse/browse.tpl.html',\n    '<div class=\"browseView\"><div class=\"row\"><div class=\"browseTabs col-xs-12\"><div class=\"row\"><div class=\"col-xs-6 name\"><h3>Browse by {{ ctrl.browseMode | capitalize }}</h3></div><div class=\"col-xs-6 tabs\"><ul class=\"nav nav-tabs pull-right\"><li ng-class=\"{\\'active\\': ctrl.mode == \\'variants\\'}\"><a ng-click=\"ctrl.switchMode(\\'variants\\')\">Browse by Variant</a></li><li ng-class=\"{\\'active\\': ctrl.mode == \\'genes\\'}\"><a ng-click=\"ctrl.switchMode(\\'genes\\')\">Browse by Gene</a></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"gridContainer\"><div ui-grid=\"ctrl.gridOptions\" ui-grid-cellnav=\"\" ui-grid-selection=\"\" ui-grid-pagination=\"\" ui-grid-auto-resize=\"\"></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 text-center grid-pagination\"><pagination class=\"pagination-sm\" ng-change=\"ctrl.pageChanged()\" ng-model=\"ctrl.page\" items-per-page=\"ctrl.maxRows\" max-size=\"15\" boundary-links=\"true\" rotate=\"false\" align=\"true\" total-items=\"ctrl.totalItems\" direction-links=\"true\"></pagination><p class=\"page-info small\">{{ ctrl.totalItems }} {{ ctrl.isFiltered ? \"filtered\" : \"total\" }} {{ ctrl.browseMode }} &nbsp;&nbsp;&nbsp;&nbsp; Page {{ ctrl.page }} of {{ ctrl.totalPages }}</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/browse/browseGridRow.tpl.html',\n    '<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name\" class=\"ui-grid-cell\" ng-class=\"{ \\'ui-grid-row-header-cell\\': col.isRowHeader }\" ui-grid-cell=\"\"></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/browse/browseGridTooltipCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\">{{ row.entity[col.field] }}</div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/profile/profile.tpl.html',\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('components/security/login/LoginForm.tpl.html',\n    '<form name=\"form\" novalidate=\"\" class=\"loginForm\"><div class=\"modal-header\"><h4>Sign in</h4></div><div class=\"modal-body\"><div class=\"alert alert-info\">Sign in by choosing one of the methods below:</div><ul class=\"providers\"><li class=\"google\"><a href=\"api/auth/google_oauth2?origin={{ location | encodeUri }}\"><div class=\"btn-label\">Sign in with Google</div></a></li><li class=\"orcid\"><a href=\"api/auth/orcid?origin={{ location | encodeUri }}\"><div class=\"btn-label\">Sign in with OrcID</div></a></li><li class=\"github\"><a href=\"api/auth/github?origin={{ location | encodeUri }}\"><div class=\"btn-label\">Sign in with Github</div></a></li></ul></div><div class=\"modal-footer\"><button class=\"btn btn-warning cancel\" ng-click=\"cancelLogin()\">Cancel</button></div></form>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/add/evidence/AddEvidenceView.tpl.html',\n    '<div class=\"AddEvidenceView\"><entity-view view-model=\"vm.AddEvidenceViewModel\" view-options=\"vm.AddEvidenceViewOptions\"><div class=\"row\"><div class=\"gradient-bg\"><div class=\"col-xs-12 title stripes-bg\"><h3><span class=\"entity-action\">ADD</span> <span ng-bind=\"vm.type\" class=\"entity-type\">EVIDENCE ITEM</span></h3></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view id=\"add-evidence-view\"></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/add/evidence/addEvidenceBasic.tpl.html',\n    '<div class=\"addEvidenceBasic\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>To add an evidence item, please complete the following form, provide a short statement supporting its inclusion into the CIViC database, then click the \\'Submit Evidence for Inclusion\\' button.</p></div></div></div><div class=\"row messages\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your new evidence item was successfully submitted.</span></div></div></div></div><div class=\"row errors\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"form\"><div class=\"row\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.newEvidence\" fields=\"vm.evidenceFields\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><span ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.newEvidence, vm.options)\">Submit Evidence for Inclusion</button></span></div></div></div></div></div><div class=\"dev\"><div class=\"col-xs-12\"></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/editableField.tpl.html',\n    '<div class=\"editableField\" ng-transclude=\"\" ng-mouseover=\"ctrl.mouseOver()\" ng-mouseleave=\"ctrl.mouseLeave()\" ng-click=\"ctrl.click()\" ng-class=\"{hover: ctrl.hover, active: ctrl.active}\"></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityComment.tpl.html',\n    '<div class=\"entityComment\"><div ng-if=\"ctrl.comment.title.length > 0\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"title-block\"><div class=\"user-image\"><user-image user=\"ctrl.comment.user\" height=\"32\" width=\"32\"></user-image></div><div class=\"comment-title\"><h4 class=\"title\" ng-bind=\"ctrl.comment.title\">Comment Title</h4><span class=\"small\">Posted by <strong><span ng-bind=\"ctrl.comment.user.username\">user.username</span></strong> <span ng-bind=\"ctrl.comment.created_at | timeAgo\">comment.created_at</span></span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"text-block\"><p ng-bind=\"ctrl.comment.text\">Comment Text.</p></div></div></div></div><div ng-if=\"ctrl.comment.title.length === 0\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"comment-block\"><div class=\"user-image\"><user-image user=\"ctrl.comment.user\" height=\"32\" width=\"32\"></user-image></div><div class=\"comment-content\"><div class=\"text-block\"><p ng-bind=\"ctrl.comment.text\">Comment Text.</p><span class=\"small\">Posted by <strong><span ng-bind=\"ctrl.comment.user.username\">user.username</span></strong> <span ng-bind=\"ctrl.comment.created_at | timeAgo\">comment.created_at</span></span></div></div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityCommentForm.tpl.html',\n    '<div class=\"entityCommentForm\"><div ng-switch=\"vm.isAuthenticated\"><div ng-switch-when=\"true\"><div class=\"row comment-form\"><div class=\"col-xs-12\"><form name=\"vm.commentForm\"><formly-form options=\"vm.options\" model=\"vm.newComment\" fields=\"vm.newCommentFields\" ng-submit=\"vm.submit(vm.newComment, vm.options.resetModel())\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.newComment, vm.options.resetModel)\">Submit Comment</button></div></formly-form></form></div></div></div><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><p><strong>Please Sign In to post comments.</strong></p></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityLogEntry.tpl.html',\n    '<div class=\"entityLogEntry\"><div ng-switch=\"ctrl.entry.type\"><div ng-switch-when=\"revision\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"title-block\"><div class=\"user-image\"><user-image user=\"ctrl.user\" height=\"32\" width=\"32\"></user-image></div><div class=\"entry-title\"><h4 class=\"title\">Revision Submitted {{ctrl.entry.action|capitalize}}</h4><span class=\"small\">by <strong><span ng-bind=\"ctrl.username\">ctrl.username</span></strong> <span ng-bind=\"ctrl.entry.created_at | timeAgo\">comment.created_at</span></span></div></div></div></div></div><div ng-switch-when=\"history\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"title-block\"><div class=\"user-image\"><user-image user=\"ctrl.user\" height=\"32\" width=\"32\"></user-image></div><div class=\"entry-title\"><h4 class=\"title\">Revision Applied</h4><span class=\"small\">by <strong><span ng-bind=\"ctrl.username\">ctrl.username</span></strong> <span ng-bind=\"ctrl.entry.created_at | timeAgo\">ctrl.entry.created_at</span></span></div></div></div></div></div><div ng-switch-when=\"comment\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"title-block\"><div class=\"user-image\"><user-image user=\"ctrl.user\" height=\"32\" width=\"32\"></user-image></div><div class=\"entry-title\"><h4 class=\"title\">Comment Made {{ ctrl.entry.title }}</h4><span class=\"small\">by <strong><span ng-bind=\"ctrl.username\">ctrl.username</span></strong> <span ng-bind=\"ctrl.entry.created_at | timeAgo\">ctrl.entry.created_at</span></span></div></div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityTabs.tpl.html',\n    '<div class=\"entityTabs\"><div class=\"row\"><div class=\"detail-corner\" ng-show=\"showCorner\"><div class=\"corner-edge\"></div></div><div class=\"col-xs-6 name\"><h3 editable-field=\"\" class=\"edit-icon-lg tab-name\" entity-view-model=\"entityViewModel\" entity-view-options=\"entityViewOptions\"><span ng-bind=\"vm.type\" class=\"entity-type\">Entity</span> <span ng-bind=\"vm.name\" class=\"entity-name\">Name</span></h3></div><div class=\"col-xs-6 tabs {{ viewBackground }}\"><tabset class=\"tab-container\" type=\"{{\\'tabs\\'}}\" vertical=\"{{vertical}}\" justified=\"{{justified}}\"><tab class=\"tab\" ng-repeat=\"tab in tabs\" heading=\"{{tab.heading}}\" active=\"tab.active\" disabled=\"tab.disabled\" ng-click=\"go(tab)\"></tab></tabset></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityTalkRevisionsView.tpl.html',\n    '<div class=\"entityTalkRevisionsView\"><div ng-transclude=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityTalkTabs.tpl.html',\n    '<div class=\"entityTalkTabs\"><div class=\"{{ tabRowBackground }}\"><div class=\"row\"><div class=\"col-xs-12 tabs {{ viewBackground }}\"><tabset class=\"tab-container\" type=\"{{\\'tabs\\'}}\" vertical=\"{{false}}\" justified=\"{{false}}\"><tab class=\"tab\" ng-repeat=\"tab in tabs\" heading=\"{{tab.heading}}\" active=\"tab.active\" disabled=\"tab.disabled\" ng-click=\"go(tab)\"></tab></tabset></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityTalkView.tpl.html',\n    '<div class=\"entityTalkView\"><div ng-transclude=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/entityView.tpl.html',\n    '<div class=\"entityView\"><div ng-transclude=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/revisionsGrid.tpl.html',\n    '<div class=\"revisionsGrid\"><div ui-grid=\"ctrl.revisionsGridOptions\" ui-grid-cellnav=\"\" ui-grid-auto-resize=\"\" ui-grid-pagination=\"\" ui-grid-selection=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/revisionsGridCreatedCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\">{{ row.entity[col.field] | timeAgo}}</div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/EvidenceView.tpl.html',\n    '<div class=\"EvidenceView\"><entity-view view-model=\"vm.EvidenceViewModel\" view-options=\"vm.EvidenceViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><entity-tabs></entity-tabs></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/GenesView.tpl.html',\n    '<div class=\"GenesView\"><entity-view view-model=\"vm.GenesViewModel\" view-options=\"vm.GenesViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><entity-tabs></entity-tabs></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/variantGroupsView.tpl.html',\n    '<div class=\"VariantGroupsView\"><entity-view view-model=\"vm.VariantGroupsViewModel\" view-options=\"vm.VariantGroupsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><entity-tabs show-corner=\"true\"></entity-tabs></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/VariantsView.tpl.html',\n    '<div class=\"VariantsView\"><entity-view view-model=\"vm.VariantsViewModel\" view-options=\"vm.VariantsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><entity-tabs show-corner=\"true\"></entity-tabs></div></div><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/common/diffs/description.tpl.html',\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/edit/EvidenceEditView.tpl.html',\n    '<div class=\"EvidenceEditView\"><entity-edit-view view-model=\"vm.EvidenceEditViewModel\" revisions-model=\"vm.EvidenceRevisionsModel\" view-options=\"vm.EvidenceTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><evidence-summary></evidence-summary></div></div><div class=\"row entity-talk-content {{ vm.EvidenceEditViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-edit-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/edit/evidenceEditBasic.tpl.html',\n    '<div class=\"evidenceEditBasic {{ vm.styles.edit.editBackgroundColor }}\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>Complete your edits, then click the \\'Submit Revision for Review\\' button. <span ng-if=\"vm.isAdmin\">As you are an Admin, you may also immediately update this Evidence Item by pressing the \\'Apply\\' button.</span></p></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully submitted. <a ng-href=\"#/events/genes/{{vm.stateParams.geneId}}/summary/variants/{{vm.stateParams.variantId}}/summary/evidence/{{vm.stateParams.evidenceId}}/talk/revisions/list/{{vm.newRevisionId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></span></div><div ng-message=\"applySuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully applied.</span></div></div></div></div><div class=\"row edit-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.evidenceEdit\" fields=\"vm.evidenceFields\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><span ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-if=\"vm.isAdmin\" ng-click=\"vm.apply(vm.evidenceEdit, vm.options)\">Apply</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.evidenceEdit, vm.options)\">Submit Revision for Review</button></span></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/summary/evidenceSummary.tpl.html',\n    '<div class=\"evidenceSummary {{ backgroundColor }}\"><div class=\"row\"><div class=\"col-xs-12 explanation\"><p ng-bind-html=\"evidence.description | linky\"></p></div></div><div class=\"row\"><div class=\"col-xs-12 col-md-6 details\"><table class=\"table table-condensed summary-details\"><colgroup><col width=\"40%\"><col width=\"60%\"></colgroup><tr><td class=\"name\" style=\"line-height: 2em;\">Evidence Level:</td><td class=\"value\"><span class=\"levelBadge\" ng-class=\"{\\'levelA\\': evidence.evidence_level === \\'A\\', \\'levelB\\': evidence.evidence_level === \\'B\\',\\'levelC\\': evidence.evidence_level === \\'C\\', \\'levelD\\': evidence.evidence_level === \\'D\\', \\'levelE\\': evidence.evidence_level === \\'E\\' }\">{{ evidence.evidence_level }} - {{ evidence.evidence_type }}</span></td></tr><tr><td class=\"name\">Evidence Direction:</td><td class=\"value\">{{ evidence.evidence_direction }}</td></tr><tr><td class=\"name\">Clinical Significance:</td><td class=\"value\">{{ evidence.clinical_significance }}</td></tr><tr><td class=\"name\">Variant Origin:</td><td class=\"value\">{{ evidence.variant_origin | capitalize }}</td></tr></table></div><div class=\"col-xs-12 col-md-6 details\"><table class=\"table table-condensed summary-details\"><colgroup><col width=\"40%\"><col width=\"60%\"></colgroup><tr><td class=\"name\">Disease:</td><td class=\"value\">{{ evidence.disease }}</td></tr><tr><td class=\"name\">Drug:</td><td class=\"value\">{{ evidence.drugsStr }}</td></tr><tr><td class=\"name\">Citation:</td><td class=\"value\"><a target=\"_blank\" href=\"{{ evidence.source_url }}\" _target=\"blank\">{{ evidence.citation }}</a></td></tr><tr><td class=\"name\">Trust Rating:</td><td class=\"value\"><rating ng-model=\"evidence.rating\" max=\"5\" readonly=\"true\"></rating></td></tr><tr><td class=\"name\">Coordinate:</td><td class=\"value\">{{ evidence.variant_hgvs}}</td></tr></table></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/EvidenceTalkView.tpl.html',\n    '<div class=\"EvidenceTalkView\"><entity-talk-view view-model=\"vm.EvidenceTalkViewModel\" revisions-model=\"vm.EvidenceRevisionsModel\" view-options=\"vm.EvidenceTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><evidence-summary></evidence-summary></div></div><div class=\"row evidence-talk-tabs\"><div class=\"col-xs-12\"><entity-talk-tabs vertical=\"false\" justified=\"left\"></entity-talk-tabs></div></div><div class=\"row entity-talk-content {{ vm.EvidenceTalkViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/evidenceTalkComments.tpl.html',\n    '<div class=\"evidenceTalkComments\"><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.evidenceTalkModel.data.comments.length > 0\"><div ng-switch-when=\"true\"><ul class=\"comments\"><li ng-repeat=\"comment in ctrl.evidenceTalkModel.data.comments\"><entity-comment comment-data=\"comment\"></entity-comment></li></ul></div><div ng-switch-default=\"\"><p>No Comments for Evidence Item {{ ctrl.evidenceTalkModel.data.item.name }}. You may add one below.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"entity\" entity-model=\"ctrl.evidenceTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/evidenceTalkLog.tpl.html',\n    '<div class=\"evidenceTalkLog\"><ul class=\"log-list\"><li ng-repeat=\"entry in ctrl.logItems\"><entity-log-entry entry-data=\"entry\"></entity-log-entry></li></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/edit/GeneEditView.tpl.html',\n    '<div class=\"GeneEditView\"><entity-edit-view view-model=\"vm.GeneEditViewModel\" revisions-model=\"vm.GeneRevisionsModel\" view-options=\"vm.GeneTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><gene-summary show-menu=\"false\"></gene-summary></div></div><div class=\"row entity-talk-content {{ vm.GeneEditViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-edit-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/edit/geneEditBasic.tpl.html',\n    '<div class=\"geneEditBasic {{ vm.styles.edit.editBackgroundColor }}\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>Complete your edits, then click the \\'Submit Revision for Review\\' button. <span ng-if=\"vm.isAdmin\">As you are an Admin, you may also immediately update this Gene by pressing the \\'Apply\\' button.</span></p></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully submitted. <a ng-href=\"#/events/genes/{{vm.gene.id}}/talk/revisions/list/{{vm.newRevisionId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></span></div><div ng-message=\"applySuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully applied.</span></div></div></div></div><div class=\"row edit-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.geneEdit\" fields=\"vm.geneFields\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><div ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-if=\"vm.isAdmin\" ng-click=\"vm.apply(vm.geneEdit, vm.options)\">Apply</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.geneEdit, vm.options)\">Submit Revision for Review</button></div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/geneDescription.tpl.html',\n    '<div class=\"geneDescription\"><div class=\"row\"><div class=\"col-xs-12\"><p ng-bind=\"geneData.description\" class=\"description\">Gene description.</p></div></div><div class=\"row\"><div class=\"col-xs-12\"><h5>Sources:</h5><ul class=\"sources\"><li ng-repeat=\"source in geneData.sources\"><a href=\"{{ source.source_url }}\"><span class=\"small\" ng-bind=\"source.citation\"></span></a></li></ul></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/geneSummary.tpl.html',\n    '<div class=\"geneSummary\"><div class=\"row {{ backgroundColor }}\"><div class=\"col-xs-6\"><gene-description gene-data=\"gene\"></gene-description></div><div class=\"col-xs-6\"><my-gene-info gene-info=\"myGeneInfo\"></my-gene-info></div></div><div ng-if=\"showMenu === true\"><div class=\"row\"><div class=\"col-xs-2\"><variant-menu options=\"GenesViewOptions.styles.variantMenu\"></variant-menu></div><div class=\"col-xs-10 variant-view\"><ui-view><div class=\"view-corner\"><div class=\"corner-edge\"></div></div><div class=\"alert alert-info select-prompt\">&#8672; Select a <strong>Variant</strong> <span ng-if=\"variantGroups.length > 0\">or <strong>Variant Group</strong></span> to view its details.</div></ui-view></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/myGeneInfo.tpl.html',\n    '<div class=\"myGeneInfo\"><table class=\"table table-condensed summary-details\"><colgroup><col width=\"30%\"><col width=\"70%\"></colgroup><tr><td class=\"name\">Name:</td><td class=\"value\" ng-bind=\"geneInfo.name\"></td></tr><tr><td class=\"name\">Entrez Symbol:</td><td class=\"value\"><a target=\"_blank\" href=\"{{ \\'http://www.ncbi.nlm.nih.gov/gene/\\' + geneInfo._id}}\" ng-bind=\"geneInfo.symbol\">SYMBOL</a> &nbsp; &nbsp; <strong>Entrez ID:</strong> <a target=\"_blank\" href=\"{{ \\'http://www.ncbi.nlm.nih.gov/gene/\\' + geneInfo._id}}\" ng-bind=\"geneInfo._id\">ID</a></td></tr><tr><td class=\"name\">Synonyms:</td><td class=\"value\" ng-bind=\"geneInfo.alias | arrayToList\"></td></tr><tr><td class=\"name\">Protein Domains:</td><td class=\"value\" ng-bind-html=\"geneInfo.interpro | pluck: \\'desc\\' | arrayToList:5:\\'&hellip;\\':true | unsafe\"></td></tr><tr><td class=\"name\">Pathways:</td><td class=\"value\" ng-bind-html=\"geneInfo.pathway | pluck: \\'name\\' | arrayToList:5:\\'&hellip;\\':true | unsafe\"></td></tr><tr><td>&nbsp;</td><td><button class=\"btn btn-block btn-default view-gene-details\" ng-click=\"ctrl.openDialog()\">View Full Details from MyGene.info</button></td></tr></table></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/myGeneInfoDialog.tpl.html',\n    '<div class=\"myGeneInfoDialog\"><div class=\"row header\"><div class=\"col-xs-12\"><h3>Gene {{ geneInfo.symbol }} Details from <a href=\"http://mygene.info/\" target=\"_new\">MyGene.info</a></h3></div></div><div class=\"row summary\"><div class=\"col-xs-12\"><p><strong>Gene Summary:</strong><br><span ng-bind-html=\"geneInfo.summary | unsafe\"></span></p></div></div><div class=\"row synonyms\"><div class=\"col-xs-12\"><p><strong>Synonyms:</strong><br><span ng-bind=\"geneInfo.alias\"></span></p></div></div><div class=\"row grid-row protein-domains\"><div class=\"col-xs-12\"><div ui-grid=\"ctrl.gridOptions.proteinDomains\" class=\"dataGrid\" ui-grid-auto-resize=\"\"></div></div></div><div class=\"row grid-row pathways\"><div class=\"col-xs-12\"><div ui-grid=\"ctrl.gridOptions.pathways\" class=\"dataGrid\" ui-grid-auto-resize=\"\"></div></div></div><div class=\"row buttons\"><div class=\"col-xs-12\"><div class=\"pull-right\"><button type=\"button\" class=\"btn btn-default close\" ng-click=\"ctrl.closeDialog()\">Done</button></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/summary/variantMenu.tpl.html',\n    '<div class=\"variantMenu {{ options.backgroundColor }}\"><h4 class=\"title\"><span ng-bind=\"gene.name\"></span> Variants</h4><ul class=\"variants\"><li ng-repeat=\"variant in variants\" ui-sref-active=\"active\"><a ui-sref=\"events.genes.summary.variants.summary({ geneId: gene.id, variantId: variant.id})\"><span ng-bind=\"variant.name\">Variant Name</span></a></li></ul><div ng-if=\"variantGroups.length > 0\"><h4 class=\"title\">Variant Groups</h4><ul class=\"variant-groups\"><li ng-repeat=\"variantGroup in variantGroups\" ui-sref-active=\"active\"><a class=\"sub-title\" ui-sref=\"events.genes.summary.variantGroups.summary({geneId: gene.id, variantGroupId: variantGroup.id})\"><span ng-bind=\"variantGroup.name\">Variant Group Name</span></a><ul class=\"variants\"><li ng-repeat=\"variant in variantGroup.variants\" ui-sref-active=\"active\"><a ui-sref=\"events.genes.summary.variants.summary({ geneId: gene.id, variantId: variant.id})\"><span ng-bind=\"variant.name\">Variant Name</span></a></li></ul></li></ul></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/GeneTalkView.tpl.html',\n    '<div class=\"GeneTalkView\"><entity-talk-view view-model=\"vm.GenesTalkViewModel\" revisions-model=\"vm.GeneRevisionsModel\" view-options=\"vm.GenesTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><gene-summary show-menu=\"false\"></gene-summary></div></div><div class=\"row gene-talk-tabs\"><div class=\"col-xs-12\"><entity-talk-tabs vertical=\"false\" justified=\"left\"></entity-talk-tabs></div></div><div class=\"row entity-talk-content {{ vm.GenesTalkViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/geneTalkComments.tpl.html',\n    '<div class=\"geneTalkComments\"><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.geneTalkModel.data.comments.length > 0\"><div ng-switch-when=\"true\"><ul class=\"comments\"><li ng-repeat=\"comment in ctrl.geneTalkModel.data.comments\"><entity-comment comment-data=\"comment\"></entity-comment></li></ul></div><div ng-switch-default=\"\"><p>No Comments for Gene {{ ctrl.geneTalkModel.data.item.name }}. You may add one below.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"entity\" entity-model=\"ctrl.geneTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/geneTalkLog.tpl.html',\n    '<div class=\"geneTalkLog\"><ul class=\"log-list\"><li ng-repeat=\"entry in ctrl.logItems\"><entity-log-entry entry-data=\"entry\"></entity-log-entry></li></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/edit/VariantGroupEditView.tpl.html',\n    '<div class=\"VariantGroupEditView\"><entity-edit-view view-model=\"vm.VariantGroupEditViewModel\" revisions-model=\"vm.VariantGroupRevisionsModel\" view-options=\"vm.VariantGroupTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><variant-group-summary show-variant-grid=\"false\"></variant-group-summary></div></div><div class=\"row entity-talk-content {{ vm.VariantGroupEditViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-edit-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/edit/variantGroupEditBasic.tpl.html',\n    '<div class=\"variantGroupEditBasic {{ vm.styles.edit.editBackgroundColor }}\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>Complete your edits, then click the \\'Submit Revision for Review\\' button. <span ng-if=\"vm.isAdmin\">As you are an Admin, you may also immediately update this Variant by pressing the \\'Apply\\' button.</span></p></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully submitted. <a ng-href=\"#/events/genes/{{vm.stateParams.geneId}}/summary/variantGroups/{{vm.stateParams.variantGroupId}}/talk/revisions/list/{{vm.newRevisionId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></span></div><div ng-message=\"applySuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully applied.</span></div></div></div></div><div class=\"row edit-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.variantGroupEdit\" fields=\"vm.variantGroupFields\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><span ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-if=\"vm.isAdmin\" ng-click=\"vm.apply(vm.variantGroupEdit, vm.options)\">Apply</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.variantGroupEdit, vm.options)\">Submit Revision for Review</button></span></div></div></formly-form></form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/summary/variantGrid.tpl.html',\n    '<div class=\"variantGrid\"><div ui-grid=\"ctrl.variantGridOptions\" ui-grid-cellnav=\"\" ui-grid-auto-resize=\"\" ui-grid-pagination=\"\" ui-grid-selection=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/summary/variantGroupSummary.tpl.html',\n    '<div class=\"variantGroupSummary\"><div class=\"row\"><div class=\"col-xs-12\"><p ng-bind-html=\"variantGroup.description|unsafe\"></p></div></div><div ng-if=\"showVariantGrid === true\"><div class=\"row variant-grid\"><div class=\"col-xs-12\"><variant-grid variants=\"variants\"></variant-grid></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"variant-prompt\"><div class=\"alert alert-info\">&uparrow; Click on an <strong>Variant</strong> above to view its details.</div></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/VariantGroupTalkView.tpl.html',\n    '<div class=\"VariantGroupTalkView\"><entity-talk-view view-model=\"vm.VariantGroupsTalkViewModel\" revisions-model=\"vm.VariantGroupRevisionsModel\" view-options=\"vm.VariantGroupsTalkViewOptions\"><div class=\"row variant-group-talk-summary {{ ctrl.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><variant-group-summary show-variant-grid=\"false\"></variant-group-summary></div></div><div class=\"row\"><div class=\"col-xs-12\"><entity-talk-tabs vertical=\"false\" justified=\"left\"></entity-talk-tabs></div></div><div class=\"row variant-group-talk-content {{ ctrl.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/variantGroupTalkComments.tpl.html',\n    '<div class=\"variantGroupTalkComments\"><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.variantGroupTalkModel.data.comments.length > 0\"><div ng-switch-when=\"true\"><ul class=\"comments\"><li ng-repeat=\"comment in ctrl.variantGroupTalkModel.data.comments\"><entity-comment comment-data=\"comment\"></entity-comment></li></ul></div><div ng-switch-default=\"\"><p>No comments found for Variant {{ ctrl.variantGroupTalkModel.data.entity.name }}.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form entity-model=\"ctrl.variantGroupTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/variantGroupTalkLog.tpl.html',\n    '<div class=\"variantGroupTalkLog\"><ul class=\"log-list\"><li ng-repeat=\"entry in ctrl.logItems\"><entity-log-entry entry-data=\"entry\"></entity-log-entry></li></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/edit/VariantEditView.tpl.html',\n    '<div class=\"VariantEditView\"><entity-edit-view view-model=\"vm.VariantEditViewModel\" revisions-model=\"vm.VariantRevisionsModel\" view-options=\"vm.VariantTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><variant-summary show-menu=\"false\"></variant-summary></div></div><div class=\"row entity-talk-content {{ vm.VariantEditViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-edit-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/edit/variantEditBasic.tpl.html',\n    '<div class=\"variantEditBasic {{ vm.styles.edit.editBackgroundColor }}\"><div class=\"row\"><div class=\"col-xs-12\"><div class=\"edit-instructions\"><p>Complete your edits, then click the \\'Submit Revision for Review\\' button. <span ng-if=\"vm.isAdmin\">As you are an Admin, you may also immediately update this Variant by pressing the \\'Apply\\' button.</span></p></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"edit-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">409 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"edit-messages\"><div ng-message=\"submitSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully submitted. <a ng-href=\"#/events/genes/{{vm.stateParams.geneId}}/summary/variants/{{vm.stateParams.variantId}}/talk/revisions/list/{{vm.newRevisionId}}/summary\" class=\"btn btn-small btn-default\">View it here</a></span></div><div ng-message=\"applySuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">Your revision was successfully applied.</span></div></div></div></div><div class=\"row edit-form\"><div class=\"col-xs-12\"><form class=\"form-horizontal\"><formly-form options=\"vm.options\" model=\"vm.variantEdit\" fields=\"vm.variantFields\"></formly-form></form></div></div><div class=\"row\"><div class=\"col-xs-5 col-xs-offset-2\"><div class=\"buttons\"><div class=\"pull-left\"><cancel-button></cancel-button></div><div class=\"pull-right\"><span ng-if=\"vm.isAuthenticated\"><button type=\"submit\" class=\"btn btn-default\" ng-if=\"vm.isAdmin\" ng-click=\"vm.apply(vm.variantEdit, vm.options)\">Apply</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"vm.submit(vm.variantEdit, vm.options)\">Submit Revision for Review</button></span></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/evidenceGrid.tpl.html',\n    '<div class=\"evidenceGrid\"><div ui-grid=\"ctrl.evidenceGridOptions\" ui-grid-cellnav=\"\" ui-grid-auto-resize=\"\" ui-grid-pagination=\"\" ui-grid-selection=\"\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/evidenceGridDiseaseCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\">{{ row.entity[col.field] }}</div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/evidenceGridDrugCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-append-to-body=\"true\"><div class=\"ui-grid-cell-contents\">{{ row.entity[col.field] }}</div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/evidenceGridEvidenceCell.tpl.html',\n    '<div class=\"ngCellText\" ng-class=\"col.colIndex()\" tooltip=\"{{row.entity[col.field]}}\" tooltip-append-to-body=\"true\"><div ng-switch=\"\" on=\"row.entity[col.field].length > 0\"><div ng-switch-when=\"true\" class=\"ui-grid-cell-contents\">{{ row.entity[col.field] }}</div><div ng-switch-when=\"false\">No summary found.</div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/evidenceGridLevelCell.tpl.html',\n    '<div class=\"levelCell ngCellText\" style=\"{{ \\'height:\\' + row.height + \\'px;\\'}}\"><span ng-cell-text=\"\" class=\"btn-block\" ng-class=\"{\\'levelA\\': row.entity[col.field] === \\'A\\', \\'levelB\\': row.entity[col.field] === \\'B\\',\\'levelC\\': row.entity[col.field] === \\'C\\', \\'levelD\\': row.entity[col.field] === \\'D\\', \\'levelE\\': row.entity[col.field] === \\'E\\' }\">{{ row.entity[col.field] }}</span></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/evidenceGridRatingCell.tpl.html',\n    '<div class=\"ratingCell ngCellText\" ng-class=\"col.colIndex()\"><rating ng-model=\"row.entity[col.field]\" max=\"5\" readonly=\"true\"></rating></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/evidenceGridRow.tpl.html',\n    '<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name\" class=\"ui-grid-cell\" ng-class=\"{ \\'ui-grid-row-header-cell\\': col.isRowHeader }\" ui-grid-cell=\"\"></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/summary/variantSummary.tpl.html',\n    '<div class=\"variantSummary\"><div class=\"row {{ backgroundColor }}\"><div class=\"col-xs-12\"><p ng-bind-html=\"variant.description | unsafe\"></p></div></div><div ng-if=\"showEvidenceGrid === true\"><div class=\"row\"><div class=\"col-xs-12 evidence-item-grid\"><evidence-grid evidence=\"evidence\"></evidence-grid></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"evidence-view\"><ui-view><div class=\"alert alert-info select-prompt\">&uparrow; Click on an <strong>Evidence Item</strong> above to view its details here.</div></ui-view></div></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/VariantTalkView.tpl.html',\n    '<div class=\"VariantTalkView\"><entity-talk-view view-model=\"vm.VariantsTalkViewModel\" revisions-model=\"vm.VariantRevisionsModel\" view-options=\"vm.VariantsTalkViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><variant-summary show-evidence-grid=\"false\"></variant-summary></div></div><div class=\"row variant-talk-tabs\"><div class=\"col-xs-12\"><entity-talk-tabs vertical=\"false\" justified=\"left\"></entity-talk-tabs></div></div><div class=\"row entity-talk-content {{ vm.VariantsTalkViewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/variantTalkComments.tpl.html',\n    '<div class=\"variantTalkComments\"><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.variantTalkModel.data.comments.length > 0\"><div ng-switch-when=\"true\"><ul class=\"comments\"><li ng-repeat=\"comment in ctrl.variantTalkModel.data.comments\"><entity-comment comment-data=\"comment\"></entity-comment></li></ul></div><div ng-switch-default=\"\"><p>No Comments for Variant {{ ctrl.variantTalkModel.data.item.name }}. You may add one below.</p></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"entity\" entity-model=\"ctrl.variantTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/variantTalkLog.tpl.html',\n    '<div class=\"variantTalkLog\"><ul class=\"log-list\"><li ng-repeat=\"entry in ctrl.logItems\"><entity-log-entry entry-data=\"entry\"></entity-log-entry></li></ul></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/revisions/EvidenceTalkRevisionsView.tpl.html',\n    '<div class=\"EvidencesTalkRevisionsView\"><entity-talk-revisions-view view-model=\"vm.EvidenceRevisionsModel\" view-options=\"vm.EvidencesTalkRevisionsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-revisions-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/revisions/evidenceTalkRevisionSummary.tpl.html',\n    '<div class=\"evidenceTalkRevisionSummary\"><div class=\"row revision-header\"><div class=\"stripes-bg\"><div class=\"col-xs-10 name\"><h3>Revision #<span ng-bind=\"vm.evidenceTalkModel.data.item.id\">ID</span></h3></div><div class=\"col-xs-2 status\"><div class=\"pull-right\"><span ng-bind=\"vm.evidenceTalkModel.data.item.status\">status</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"revision-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"revision-messages\"><div ng-message=\"acceptSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully applied.</span></div><div ng-message=\"rejectSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully rejected.</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 diffs\"><ul><li class=\"item\" ng-repeat=\"(field, diffs) in vm.evidenceTalkModel.data.item.diffs\"><div ng-switch=\"field\"><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12 wtf\"><span ng-bind-html=\"diffs.diff\"></span></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"res\"><span ng-bind-html=\"diffs.final\"></span></div></div></div></div></div></li></ul></div></div><div class=\"row\"><div class=\"col-xs-12 admin-buttons\" ng-if=\"vm.isAdmin === true && vm.evidenceTalkModel.data.item.status != \\'applied\\'\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"acceptRevision()\">Accept Revision</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"rejectRevision()\">Reject Revision</button></div></div></div><div class=\"row\"><div class=\"col-xs-12 comments-header\"><h4>Revision RID<span ng-bind=\"vm.evidenceTalkModel.data.item.id\">ID</span> Comments</h4></div></div><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.comments.length\"><div ng-switch-when=\"0\"><p>No comments found.</p></div><div ng-switch-default=\"\"><ul class=\"comments\"><li ng-repeat=\"comment in vm.evidenceTalkModel.data.comments\"><entity-comment comment-data=\"comment\"></entity-comment></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"revision\" entity-model=\"vm.evidenceTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/evidence/talk/revisions/evidenceTalkRevisions.tpl.html',\n    '<div class=\"evidenceTalkRevisions\"><div class=\"row revisions-list {{ viewOptions.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><revisions-grid changes=\"evidenceRevisions.data.collection\" base-state=\"events.genes.summary.variants.summary.evidence.talk.revisions\"></revisions-grid></div></div><div class=\"row revisions-view {{ viewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/revisions/GeneTalkRevisionsView.tpl.html',\n    '<div class=\"GenesTalkRevisionsView\"><entity-talk-revisions-view view-model=\"vm.GeneRevisionsModel\" view-options=\"vm.GenesTalkRevisionsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-revisions-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/revisions/geneTalkRevisionSummary.tpl.html',\n    '<div class=\"geneTalkRevisionSummary\"><div class=\"row revision-header\"><div class=\"stripes-bg\"><div class=\"col-xs-10 name\"><h3>Revision RID<span ng-bind=\"vm.geneTalkModel.data.item.id\">ID</span></h3></div><div class=\"col-xs-2 status\"><div class=\"pull-right\"><span ng-bind=\"vm.geneTalkModel.data.item.status\">status</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"revision-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"revision-messages\"><div ng-message=\"acceptSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully applied.</span></div><div ng-message=\"rejectSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully rejected.</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 diffs\"><ul><li class=\"item\" ng-repeat=\"(field, diffs) in vm.geneTalkModel.data.item.diffs\"><div ng-switch=\"field\"><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12 wtf\"><span ng-bind-html=\"diffs.diff\"></span></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"res\"><span ng-bind-html=\"diffs.final\"></span></div></div></div></div></div></li></ul></div></div><div class=\"row\"><div class=\"col-xs-12 admin-buttons\" ng-if=\"vm.isAdmin === true && vm.geneTalkModel.data.item.status != \\'applied\\'\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"acceptRevision()\">Accept Revision</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"rejectRevision()\">Reject Revision</button></div></div></div><div class=\"row\"><div class=\"col-xs-12 comments-header\"><h4>Revision RID<span ng-bind=\"vm.geneTalkModel.data.item.id\">ID</span> Comments</h4></div></div><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.comments.length\"><div ng-switch-when=\"0\"><p>No comments found.</p></div><div ng-switch-default=\"\"><ul class=\"comments\"><li ng-repeat=\"comment in vm.geneTalkModel.data.comments\"><entity-comment comment-data=\"comment\"></entity-comment></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"revision\" entity-model=\"vm.geneTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/genes/talk/revisions/geneTalkRevisions.tpl.html',\n    '<div class=\"geneTalkRevisions\"><div class=\"row revisions-list {{ viewOptions.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><revisions-grid changes=\"geneRevisions.data.collection\" base-state=\"events.genes.talk.revisions\"></revisions-grid></div></div><div class=\"row revisions-view {{ viewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/revisions/VariantGroupTalkRevisionsView.tpl.html',\n    '<div class=\"VariantsTalkRevisionsView\"><entity-talk-revisions-view view-model=\"vm.VariantRevisionsModel\" view-options=\"vm.VariantsTalkRevisionsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-revisions-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/revisions/variantGroupTalkRevisionSummary.tpl.html',\n    '<div class=\"variantGroupTalkRevisionSummary\"><div class=\"row revision-header\"><div class=\"stripes-bg\"><div class=\"col-xs-10 name\"><h3>Revision RID<span ng-bind=\"vm.variantGroupTalkModel.data.item.id\">ID</span></h3></div><div class=\"col-xs-2 status\"><div class=\"pull-right\"><span ng-bind=\"vm.variantGroupTalkModel.data.item.status\">status</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"revision-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"revision-messages\"><div ng-message=\"acceptSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully applied.</span></div><div ng-message=\"rejectSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully rejected.</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 diffs\"><ul><li class=\"item\" ng-repeat=\"(field, diffs) in vm.variantGroupTalkModel.data.item.diffs\"><div ng-switch=\"field\"><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12 wtf\"><span ng-bind-html=\"diffs.diff\"></span></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"res\"><span ng-bind-html=\"diffs.final\"></span></div></div></div></div></div></li></ul></div></div><div class=\"row\"><div class=\"col-xs-12 admin-buttons\" ng-if=\"vm.isAdmin === true && vm.variantGroupTalkModel.data.item.status != \\'applied\\'\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"acceptRevision()\">Accept Revision</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"rejectRevision()\">Reject Revision</button></div></div></div><div class=\"row\"><div class=\"col-xs-12 comments-header\"><h4>Revision RID<span ng-bind=\"vm.variantGroupTalkModel.data.item.id\">ID</span> Comments</h4></div></div><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.comments.length\"><div ng-switch-when=\"0\"><p>No comments found.</p></div><div ng-switch-default=\"\"><ul class=\"comments\"><li ng-repeat=\"comment in vm.variantGroupTalkModel.data.comments\"><entity-comment comment-data=\"comment\"></entity-comment></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"revision\" entity-model=\"vm.variantGroupTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variantGroups/talk/revisions/variantGroupTalkRevisions.tpl.html',\n    '<div class=\"variantGroupTalkRevisions\"><div class=\"row revisions-list {{ viewOptions.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><revisions-grid changes=\"variantGroupRevisions.data.collection\" base-state=\"events.genes.summary.variantGroups.talk.revisions\"></revisions-grid></div></div><div class=\"row revisions-view {{ viewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/revisions/VariantTalkRevisionsView.tpl.html',\n    '<div class=\"VariantsTalkRevisionsView\"><entity-talk-revisions-view view-model=\"vm.VariantRevisionsModel\" view-options=\"vm.VariantsTalkRevisionsViewOptions\"><div class=\"row\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></entity-talk-revisions-view></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/revisions/variantTalkRevisionSummary.tpl.html',\n    '<div class=\"variantTalkRevisionSummary\"><div class=\"row revision-header\"><div class=\"stripes-bg\"><div class=\"col-xs-10 name\"><h3>Revision RID<span ng-bind=\"vm.variantTalkModel.data.item.id\">ID</span></h3></div><div class=\"col-xs-2 status\"><div class=\"pull-right\"><span ng-bind=\"vm.variantTalkModel.data.item.status\">status</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formErrors\" class=\"revision-errors\"><div ng-message=\"500\" class=\"alert alert-danger\"><strong class=\"status\">500 <span ng-bind=\"vm.errorMessages[\\'500\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'500\\']\">error prompt</span></div><div ng-message=\"401\" class=\"alert alert-danger\"><strong class=\"status\">401 <span ng-bind=\"vm.errorMessages[\\'401\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'401\\']\">error prompt</span></div><div ng-message=\"403\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'403\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'403\\']\">error prompt</span></div><div ng-message=\"409\" class=\"alert alert-danger\"><strong class=\"status\">403 <span ng-bind=\"vm.errorMessages[\\'409\\']\" class=\"message\">error msg</span></strong> - <span ng-bind=\"vm.errorPrompts[\\'409\\']\">error prompt</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12\"><div ng-messages=\"vm.formMessages\" class=\"revision-messages\"><div ng-message=\"acceptSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully applied.</span></div><div ng-message=\"rejectSuccess\" class=\"alert alert-success\"><strong class=\"status\">Success</strong> - <span class=\"message\">The revision was successfully rejected.</span></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 diffs\"><ul><li class=\"item\" ng-repeat=\"(field, diffs) in vm.variantTalkModel.data.item.diffs\"><div ng-switch=\"field\"><div ng-switch-default=\"\"><div class=\"row\"><div class=\"col-xs-12\"><h4 class=\"field-name\">{{ field | capitalize}}</h4></div></div><div class=\"row\"><div class=\"col-xs-12 wtf\"><span ng-bind-html=\"diffs.diff\"></span></div></div><div class=\"row\"><div class=\"col-xs-12\"><div class=\"res\"><span ng-bind-html=\"diffs.final\"></span></div></div></div></div></div></li></ul></div></div><div class=\"row\"><div class=\"col-xs-12 admin-buttons\" ng-if=\"vm.isAdmin === true && vm.variantTalkModel.data.item.status != \\'applied\\'\"><div class=\"pull-right\"><button type=\"submit\" class=\"btn btn-default\" ng-click=\"acceptRevision()\">Accept Revision</button> <button type=\"submit\" class=\"btn btn-default\" ng-click=\"rejectRevision()\">Reject Revision</button></div></div></div><div class=\"row\"><div class=\"col-xs-12 comments-header\"><h4>Revision RID<span ng-bind=\"vm.variantTalkModel.data.item.id\">ID</span> Comments</h4></div></div><div class=\"row\"><div class=\"col-xs-12 comment-list\"><div ng-switch=\"ctrl.comments.length\"><div ng-switch-when=\"0\"><p>No comments found.</p></div><div ng-switch-default=\"\"><ul class=\"comments\"><li ng-repeat=\"comment in vm.variantTalkModel.data.comments\"><entity-comment comment-data=\"comment\"></entity-comment></li></ul></div></div></div></div><div class=\"row\"><div class=\"col-xs-12 comment-form\"><entity-comment-form type=\"revision\" entity-model=\"vm.variantTalkModel\"></entity-comment-form></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('civicClient');\n} catch (e) {\n  module = angular.module('civicClient', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('app/views/events/variants/talk/revisions/variantTalkRevisions.tpl.html',\n    '<div class=\"variantTalkRevisions\"><div class=\"row revisions-list {{ viewOptions.styles.view.summaryBackgroundColor }}\"><div class=\"col-xs-12\"><revisions-grid changes=\"variantRevisions.data.collection\" base-state=\"events.genes.summary.variants.talk.revisions\"></revisions-grid></div></div><div class=\"row revisions-view {{ viewOptions.styles.view.talkBackgroundColor }}\"><div class=\"col-xs-12\"><ui-view></ui-view></div></div></div>');\n}]);\n})();\n"],"sourceRoot":"/source/"}